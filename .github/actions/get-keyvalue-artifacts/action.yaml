name: Get KeyValue Artifacts
description: Sets env vars corresponding to keys and values encoded in artifact names

# If any inputs are not set, we will attempt to extract them from the event context
inputs:
  owner:
    description: The account owner of the repository. The name is not case sensitive.
    required: false
  repo:
    description: The name of the repository without the .git extension. The name is not case sensitive.
    required: false
  run_id:
    description: The unique identifier of the workflow run.
    required: false
  issue_number:
    description: The number that identifies the issue.
    required: false

runs:
  using: composite

  steps:
    - name: Get KeyValue Artifacts
      uses: actions/github-script@v7
      env:
        OWNER: ${{ inputs.owner }}
        REPO: ${{ inputs.repo }}
        RUN_ID: ${{ inputs.run_id }}
        ISSUE_NUMBER: ${{ inputs.issue_number }}
      with:
        script: |
          const action = require('./.github/actions/get-keyvalue-artifacts/action.js')
          await action({ github, context, core });
