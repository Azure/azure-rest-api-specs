variables:
  TRAVIS: 'true'
  TRAVIS_PULL_REQUEST: $(System.PullRequest.PullRequestId)
  TRAVIS_REPO_SLUG: $(Build.Repository.Name)
  TRAVIS_PULL_REQUEST_SLUG: $(Build.Repository.Name)
  TRAVIS_PULL_REQUEST_SHA: $(Build.SourceVersion)

jobs:
- job: "linter"
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      echo System.PullRequest.PullRequestId: $(System.PullRequest.PullRequestId)
      echo Build.Repository.Name: $(Build.Repository.Name)
      echo Build.Repository.Uri: $(Build.Repository.Uri)
      echo Build.SourceVersion: $(Build.SourceVersion)
  - task: Npm@1
    displayName: 'npm install'
    inputs:
      verbose: false
  - script: 'scripts/install-dotnet.sh'
  - script: 'node scripts/momentOfTruth.js && node scripts/momentOfTruthPostProcessing.js'
- job: "SDK"
  strategy:
    matrix:
      ruby:
        AZURE_SDK_REPO: azure-sdk-for-ruby
      java:
        AZURE_SDK_REPO: azure-sdk-for-java
      javascript:
        AZURE_SDK_REPO: azure-sdk-for-js
      node:
        AZURE_SDK_REPO: azure-sdk-for-node
      python:
        AZURE_SDK_REPO: azure-sdk-for-python
      go:
        AZURE_SDK_REPO: azure-sdk-for-go
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: "scripts/swagger-to-sdk.sh Azure/$(AZURE_SDK_REPO) -v"
