trigger:
  branches:
    include:
    - main
    - typespec-next

pr:
  branches:
    include:
    - main
    - typespec-next
  paths:
    include:
    - package-lock.json
    - package.json
    - tsconfig.json
    - eng/tools/TypeSpecValidation

jobs:
- job: Test_TypeSpec_Validation

  strategy:
    matrix:
      Linux:
        Pool: azsdk-pool-mms-ubuntu-2204-general
        OsVmImage: ubuntu-22.04
      Windows:
        Pool: azsdk-pool-mms-win-2022-general
        OsVmImage: windows-2022

  pool:
    name: $(Pool)
    vmImage: $(OSVmImage)

  steps:
  - template: /eng/pipelines/templates/steps/npm-install.yml

  - script: npm test
    displayName: Test TypeSpecValidation Tool
    workingDirectory: $(Build.SourcesDirectory)/eng/tools/TypeSpecValidation
