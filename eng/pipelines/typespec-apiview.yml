parameters:
  - name: APIViewArtifactsDirectoryName
    type: string
    default: 'TypespecAPIViewArtifacts'
  - name: APIViewArtifactsName
    type: string
    default: 'typeSpecAPIViewArtifacts'
  - name: APIViewAPIUri
    type: string
    default: 'https://apiview.dev/api/PullRequests/CreateAPIRevisionIfAPIHasChanges'
    # Please use 'https://apiviewstagingtest.com/PullRequest/DetectAPIChanges' for testing purposes

jobs:
- job:
  pool:
    name: azsdk-pool
    demands: ImageOverride -equals ubuntu-24.04

  variables:
  - template: /eng/pipelines/templates/variables/globals.yml

  steps:
  - checkout: self
    # Required to compare head commit with base commit
    fetchDepth: 2

  - template: /eng/pipelines/templates/steps/use-node-version.yml

  - pwsh: |
      . $(Build.SourcesDirectory)/eng/scripts/Compare-swagger.ps1
    displayName: Run tsp-client compare
