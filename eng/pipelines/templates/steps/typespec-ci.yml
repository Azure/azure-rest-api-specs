parameters:
- name: Folder
  type: string
- name: DisplayName
  type: string

steps:
- script: |
    cd ${{parameters.Folder}}
    npx tsp compile .
    cd $(Build.SourcesDirectory)

    # Display results of "git diff" (in case there is any diff)
    git diff

    # "git diff-index --quiet HEAD --" returns zero exit code if no diff, nonzero if yes diff
    git diff-index --quiet HEAD --

    # Revert any changed files
    git restore .    
  displayName: ${{parameters.DisplayName}}
  condition: succeededOrFailed()
