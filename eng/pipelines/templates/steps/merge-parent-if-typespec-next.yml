steps:
  - script: git -c user.name="azure-sdk" -c user.email="azuresdk@microsoft.com" merge -Xours origin/main
    displayName: git merge origin/main
    condition: |
      and(
        succeeded(),
        eq(variables['Build.Repository.Name'], 'azure-rest-api-specs'),
        or(
          eq(variables['Build.SourceBranchName'], 'typespec-next'),
          eq(variables['System.PullRequest.targetBranchName'], 'typespec-next')
        )
      )

  - script: git -c user.name="azure-sdk" -c user.email="azuresdk@microsoft.com" merge -Xours origin/RPSaaSMaster
    displayName: git merge origin/RPSaaSMaster
    condition: |
      and(
        succeeded(),
        eq(variables['Build.Repository.Name'], 'azure-rest-api-specs-pr'),
        or(
          eq(variables['Build.SourceBranchName'], 'typespec-next'),
          eq(variables['System.PullRequest.targetBranchName'], 'typespec-next')
        )
      )
