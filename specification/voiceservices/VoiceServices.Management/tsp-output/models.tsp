import "@typespec/rest";
import "@typespec/http";
import "@azure-tools/typespec-azure-core";

using TypeSpec.Rest;
using TypeSpec.Http;

namespace Microsoft.VoiceServices;

enum Origin {
  user,
  system,
  `user,system`,
}

enum ActionType {
  Internal,
}

enum ProvisioningState {
  Succeeded,
  Failed,
  Canceled,
}

enum Status {
  @doc("""
The resource has been created or updated, but the CommunicationsGateway service
has not yet been updated to reflect the changes.
""")
  ChangePending,
  @doc("""
The CommunicationsGateway service is up and running with the parameters
specified in the resource.
""")
  Complete,
}

enum Connectivity {
  @doc("""
This deployment connects to the operator network using a Public IP address,
e.g. when using MAPS
""")
  PublicAddress,
}

enum TeamsCodecs {
  PCMA,
  PCMU,
  G722,
  G722_2,
  SILK_8,
  SILK_16,
}

enum E911Type {
  @doc("Emergency calls are not handled different from other calls") Standard,
  @doc("Emergency calls are routed directly to the ESRP") DirectToEsrp,
}

enum CommunicationsPlatform {
  OperatorConnect,
  TeamsPhoneMobile,
}

enum AutoGeneratedDomainNameLabelScope {
  TenantReuse,
  SubscriptionReuse,
  ResourceGroupReuse,
  NoReuse,
}

enum CreatedByType {
  User,
  Application,
  ManagedIdentity,
  Key,
}

enum CheckNameAvailabilityReason {
  Invalid,
  AlreadyExists,
}

enum TestLinePurpose {
  Manual,
  Automated,
}

@doc("""
A list of REST API operations supported by an Azure Resource Provider. It
contains an URL link to get the next set of results.
""")
model OperationListResult is Azure.Core.Page<Operation>;

@doc("""
Details of a REST API operation, returned from the Resource Provider Operations
API
""")
model Operation {
  @doc("""
The name of the operation, as per Resource-Based Access Control (RBAC).
Examples: \"Microsoft.Compute/virtualMachines/write\",
\"Microsoft.Compute/virtualMachines/capture/action\"
""")
  @visibility("read")
  name?: string;

  @doc("""
Whether the operation applies to data-plane. This is \"true\" for data-plane
operations and \"false\" for ARM/control-plane operations.
""")
  @visibility("read")
  isDataAction?: boolean;

  @doc("Localized display information for this particular operation.")
  display?: OperationDisplay;

  @doc("""
The intended executor of the operation; as in Resource Based Access Control
(RBAC) and audit logs UX. Default value is \"user,system\"
""")
  @visibility("read")
  origin?: Origin;

  @doc("""
Enum. Indicates the action type. \"Internal\" refers to actions that are for
internal only APIs.
""")
  @visibility("read")
  actionType?: ActionType;
}

@doc("Localized display information for this particular operation.")
model OperationDisplay {
  @doc("""
The localized friendly form of the resource provider name, e.g. \"Microsoft
Monitoring Insights\" or \"Microsoft Compute\".
""")
  @visibility("read")
  provider?: string;

  @doc("""
The localized friendly name of the resource type related to this operation.
E.g. \"Virtual Machines\" or \"Job Schedule Collections\".
""")
  @visibility("read")
  resource?: string;

  @doc("""
The concise, localized friendly name for the operation; suitable for dropdowns.
E.g. \"Create or Update Virtual Machine\", \"Restart Virtual Machine\".
""")
  @visibility("read")
  operation?: string;

  @doc("""
The short, localized friendly description of the operation; suitable for tool
tips and detailed views.
""")
  @visibility("read")
  description?: string;
}

@doc("""
Common error response for all Azure Resource Manager APIs to return error
details for failed operations. (This also follows the OData error response
format.).
""")
@error
model ErrorResponse {
  @doc("The error object.")
  error?: ErrorDetail;
}

@doc("The error detail.")
model ErrorDetail {
  @doc("The error code.")
  @visibility("read")
  code?: string;

  @doc("The error message.")
  @visibility("read")
  message?: string;

  @doc("The error target.")
  @visibility("read")
  target?: string;

  @doc("The error details.")
  @visibility("read")
  details?: ErrorDetail[];

  @doc("The error additional info.")
  @visibility("read")
  additionalInfo?: ErrorAdditionalInfo[];
}

@doc("The resource management error additional info.")
model ErrorAdditionalInfo {
  @doc("The additional info type.")
  @visibility("read")
  type?: string;

  @doc("The additional info.")
  @visibility("read")
  info?: unknown;
}

@doc("The response of a CommunicationsGateway list operation.")
model CommunicationsGatewayListResult is Azure.Core.Page<CommunicationsGateway>;

@doc("A CommunicationsGateway resource")
model CommunicationsGateway {
  ...TrackedResource;

  @doc("The resource-specific properties for this resource.")
  properties?: CommunicationsGatewayProperties;
}

@doc("Details of the CommunicationsGateway resource.")
model CommunicationsGatewayProperties {
  @doc("Resource provisioning state.")
  @visibility("read")
  provisioningState?: ProvisioningState;

  @doc("The current status of the deployment.")
  @visibility("read")
  status?: Status;

  @doc("The regions in which to deploy the resources needed for Teams Calling")
  serviceLocations: ServiceRegionProperties[];

  @doc("How to connect back to the operator network, e.g. MAPS")
  connectivity: Connectivity;

  @doc("Voice codecs to support")
  codecs: TeamsCodecs[];

  @doc("How to handle 911 calls")
  e911Type: E911Type;

  @doc("What platforms to support")
  platforms: CommunicationsPlatform[];

  @doc("Details of API bridge functionality, if required")
  apiBridge?: unknown;

  @doc("The scope at which the auto-generated domain name can be re-used")
  autoGeneratedDomainNameLabelScope?: AutoGeneratedDomainNameLabelScope;

  @doc("""
The autogenerated label used as part of the FQDNs for accessing the
Communications Gateway
""")
  @visibility("read")
  autoGeneratedDomainNameLabel?: string;

  @doc("""
This number is used in Teams Phone Mobile scenarios for access to the voicemail
IVR from the native dialer.
""")
  teamsVoicemailPilotNumber?: string;

  @doc("Whether an on-premises Mobile Control Point is in use.")
  onPremMcpEnabled?: boolean;

  @doc("A list of dial strings used for emergency calling.")
  emergencyDialStrings?: string[];
}

@doc("The service region configuration needed for Teams Callings.")
model ServiceRegionProperties {
  @doc("""
The name of the region in which the resources needed for Teams Calling will be
deployed.
""")
  name: string;

  @doc("The configuration used in this region as primary, and other regions as backup.")
  primaryRegionProperties: PrimaryRegionProperties;
}

@doc("The configuration used in this region as primary, and other regions as backup.")
model PrimaryRegionProperties {
  @doc("IP address to use to contact the operator network from this region")
  operatorAddresses: string[];

  @doc("IP address to use to contact the ESRP from this region")
  esrpAddresses?: string[];

  @doc("The allowed source IP address or CIDR ranges for signaling")
  allowedSignalingSourceAddressPrefixes?: string[];

  @doc("The allowed source IP address or CIDR ranges for media")
  allowedMediaSourceAddressPrefixes?: string[];
}

@doc("""
The resource model definition for an Azure Resource Manager tracked top level
resource which has 'tags' and a 'location'
""")
model TrackedResource {
  ...Resource;

  @doc("Resource tags.")
  tags?: Record<string>;

  @doc("The geo-location where the resource lives")
  location: string;
}

@doc("""
Common fields that are returned in the response for all Azure Resource Manager
resources
""")
model Resource {
  @doc("""
Fully qualified resource ID for the resource. Ex -
/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
""")
  @visibility("read")
  id?: string;

  @doc("The name of the resource")
  @visibility("read")
  name?: string;

  @doc("""
The type of the resource. E.g. \"Microsoft.Compute/virtualMachines\" or
\"Microsoft.Storage/storageAccounts\"
""")
  @visibility("read")
  type?: string;

  @doc("Azure Resource Manager metadata containing createdBy and modifiedBy information.")
  @visibility("read")
  systemData?: SystemData;
}

@doc("Metadata pertaining to creation and last modification of the resource.")
model SystemData {
  @doc("The identity that created the resource.")
  createdBy?: string;

  @doc("The type of identity that created the resource.")
  createdByType?: CreatedByType;

  @doc("The timestamp of resource creation (UTC).")
  // FIXME: (utcDateTime) Please double check that this is the correct type for your scenario.
  createdAt?: utcDateTime;

  @doc("The identity that last modified the resource.")
  lastModifiedBy?: string;

  @doc("The type of identity that last modified the resource.")
  lastModifiedByType?: CreatedByType;

  @doc("The timestamp of resource last modification (UTC)")
  // FIXME: (utcDateTime) Please double check that this is the correct type for your scenario.
  lastModifiedAt?: utcDateTime;
}

@doc("The check availability request body.")
model CheckNameAvailabilityRequest {
  @doc("The name of the resource for which availability needs to be checked.")
  name?: string;

  @doc("The resource type.")
  type?: string;
}

@doc("The check availability result.")
model CheckNameAvailabilityResponse {
  @doc("Indicates if the resource name is available.")
  nameAvailable?: boolean;

  @doc("The reason why the given name is not available.")
  reason?: CheckNameAvailabilityReason;

  @doc("Detailed reason why the given name is not available.")
  message?: string;
}

@doc("The type used for update operations of the CommunicationsGateway.")
model CommunicationsGatewayUpdate {
  @doc("Resource tags.")
  tags?: Record<string>;
}

@doc("The response of a TestLine list operation.")
model TestLineListResult is Azure.Core.Page<TestLine>;

@doc("A TestLine resource")
model TestLine {
  ...TrackedResource;

  @doc("The resource-specific properties for this resource.")
  properties?: TestLineProperties;
}

@doc("Details of the TestLine resource.")
model TestLineProperties {
  @doc("Resource provisioning state.")
  @visibility("read")
  provisioningState?: ProvisioningState;

  @doc("The phone number")
  phoneNumber: string;

  @doc("Purpose of this test line, e.g. automated or manual testing")
  purpose: TestLinePurpose;
}

@doc("The type used for update operations of the TestLine.")
model TestLineUpdate {
  @doc("Resource tags.")
  tags?: Record<string>;
}
