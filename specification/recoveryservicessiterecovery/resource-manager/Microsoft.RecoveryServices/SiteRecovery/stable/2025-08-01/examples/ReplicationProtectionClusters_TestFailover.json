{
  "parameters": {
    "api-version": "2025-08-01",
    "fabricName": "fabric-pri-eastus",
    "failoverInput": {
      "properties": {
        "failoverDirection": "PrimaryToRecovery",
        "networkId": "/subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/ClusterTestRG-19-01-asr/providers/Microsoft.Network/virtualNetworks/adVNET-asr",
        "networkType": "VmNetworkAsInput",
        "providerSpecificDetails": {
          "clusterRecoveryPointId": "/Subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/fabric-pri-eastus/replicationProtectionContainers/pri-cloud-eastus/replicationProtectionClusters/testcluster/recoveryPoints/cc48b7f3-b267-432b-ad76-45528974dc62",
          "individualNodeRecoveryPoints": [
            "/Subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/fabric-pri-eastus/replicationProtectionContainers/pri-cloud-eastus/replicationProtectedItems/testVM/recoveryPoints/b5c2051b-79e3-41ad-9d25-244f6ef8ce7d"
          ],
          "instanceType": "A2A"
        }
      }
    },
    "protectionContainerName": "pri-cloud-eastus",
    "replicationProtectionClusterName": "testcluster",
    "resourceGroupName": "resourceGroupPS1",
    "resourceName": "vault1",
    "subscriptionId": "7c943c1b-5122-4097-90c8-861411bdd574"
  },
  "responses": {
    "200": {
      "body": {
        "name": "testcluster",
        "type": "Microsoft.RecoveryServices/vaults/replicationFabrics/replicationProtectionContainers/replicationProtectionClusters",
        "id": "/Subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/fabric-pri-eastus/replicationProtectionContainers/pri-cloud-eastus/replicationProtectionClusters/testcluster",
        "properties": {
          "activeLocation": "Primary",
          "agentClusterId": "aeeca6a3-171b-4c9d-ae22-0e4adb6416a0",
          "allowedOperations": [
            "ClusterTestFailoverCleanup",
            "PurgeProtectionCluster"
          ],
          "areAllClusterNodesRegistered": true,
          "clusterFqdn": "sdgqlc",
          "clusterNodeFqdns": [
            "sdgql0",
            "sdgql1"
          ],
          "clusterProtectedItemIds": [
            "/Subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/fabric-pri-eastus/replicationProtectionContainers/pri-cloud-eastus/replicationProtectedItems/yNdYnDYKZ7hYU7zyVeBychFBCyAbEkrJcJNUarDrXio",
            "/Subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/fabric-pri-eastus/replicationProtectionContainers/pri-cloud-eastus/replicationProtectedItems/kdUdWvpVnm3QgOQPHoVMX8YAtAO8OC4kKNjt40ERSr4"
          ],
          "clusterRegisteredNodes": [
            {
              "biosId": "37D0059C-9118-4220-AA1D-58A10EFA7660",
              "clusterNodeFqdn": "sdgql0",
              "isSharedDiskVirtualNode": false,
              "machineId": "3794026b-6792-4d12-9c0c-de0c79376c90"
            },
            {
              "biosId": "aeeca6a3-171b-4c9d-ae22-0e4adb6416a0",
              "clusterNodeFqdn": "aeeca6a3-171b-4c9d-ae22-0e4adb6416a0",
              "isSharedDiskVirtualNode": true,
              "machineId": "aeeca6a3-171b-4c9d-ae22-0e4adb6416a0"
            },
            {
              "biosId": "83CCE932-67EC-4C13-AB29-ACF5F8F7ED48",
              "clusterNodeFqdn": "sdgql1",
              "isSharedDiskVirtualNode": false,
              "machineId": "cb27913a-a5f2-4691-9eba-78b67f45a57a"
            }
          ],
          "currentScenario": {
            "jobId": "/Subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationJobs/None",
            "scenarioName": "None",
            "startTime": "1753-01-01T01:01:01Z"
          },
          "healthErrors": [],
          "lastSuccessfulFailoverTime": null,
          "lastSuccessfulTestFailoverTime": "2024-01-22T06:08:01.7440966Z",
          "policyFriendlyName": "klncksan",
          "policyId": "/Subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationPolicies/klncksan",
          "primaryFabricFriendlyName": "East US",
          "primaryFabricProvider": "AzureFabric",
          "primaryProtectionContainerFriendlyName": "East US",
          "protectionClusterType": "WindowsServerFailoverCluster",
          "protectionState": "Protected",
          "protectionStateDescription": "Protected",
          "providerSpecificDetails": {
            "clusterManagementId": "a24d47b2-a80b-4553-9c16-499c30c3be07",
            "failoverRecoveryPointId": null,
            "initialPrimaryExtendedLocation": null,
            "initialPrimaryFabricLocation": "eastus",
            "initialPrimaryZone": "",
            "initialRecoveryExtendedLocation": null,
            "initialRecoveryFabricLocation": "westus",
            "initialRecoveryZone": "",
            "instanceType": "A2A",
            "lastRpoCalculatedTime": "2024-01-22T06:12:49.8370065Z",
            "lifecycleId": "3d523ab9-8c6d-40af-850d-ccee06513dc6",
            "multiVmGroupCreateOption": "UserSpecified",
            "multiVmGroupId": "a7ef77cb-ae59-545f-a32a-bf30575ab1c6",
            "multiVmGroupName": "testcluster",
            "primaryAvailabilityZone": null,
            "primaryExtendedLocation": null,
            "primaryFabricLocation": "eastus",
            "recoveryAvailabilityZone": null,
            "recoveryExtendedLocation": null,
            "recoveryFabricLocation": "westus",
            "rpoInSeconds": 192
          },
          "provisioningState": "Created",
          "recoveryContainerId": "/Subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/fabric-rec-westus/replicationProtectionContainers/rec-cloud-westus",
          "recoveryFabricFriendlyName": "West US",
          "recoveryFabricId": "/Subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/fabric-rec-westus",
          "recoveryProtectionContainerFriendlyName": "pri-cloud-eastus",
          "replicationHealth": "Normal",
          "sharedDiskProperties": {
            "activeLocation": null,
            "allowedOperations": [],
            "currentScenario": null,
            "healthErrors": [],
            "protectionState": "Protected",
            "replicationHealth": "Normal",
            "sharedDiskProviderSpecificDetails": {
              "failoverRecoveryPointId": null,
              "instanceType": "A2A",
              "lastRpoCalculatedTime": "2024-01-22T06:12:52.499131Z",
              "managementId": "a24d47b2-a80b-4553-9c16-499c30c3be07",
              "monitoringJobType": null,
              "monitoringPercentageCompletion": null,
              "primaryFabricLocation": "eastus",
              "protectedManagedDisks": [
                {
                  "allowedDiskLevelOperation": [],
                  "dataPendingAtSourceAgentInMB": 0,
                  "dataPendingInStagingStorageAccountInMB": 0,
                  "dekKeyVaultArmId": null,
                  "diskCapacityInBytes": 274877906944,
                  "diskId": "/subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourcegroups/clustertestrg-19-01/providers/microsoft.compute/disks/sdgql-datadisk0",
                  "diskName": "sdgql-datadisk0",
                  "diskState": "Protected",
                  "diskType": "Data",
                  "failoverDiskName": "sdgql-datadisk0",
                  "isDiskEncrypted": false,
                  "isDiskKeyEncrypted": false,
                  "kekKeyVaultArmId": null,
                  "keyIdentifier": null,
                  "monitoringJobType": null,
                  "monitoringPercentageCompletion": null,
                  "primaryDiskEncryptionSetId": null,
                  "primaryStagingAzureStorageAccountId": "/subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.Storage/storageAccounts/ix701lshashankvaasrcache",
                  "recoveryDiskEncryptionSetId": null,
                  "recoveryOrignalTargetDiskId": null,
                  "recoveryReplicaDiskAccountType": "Premium_LRS",
                  "recoveryReplicaDiskId": "/subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/ClusterTestRG-19-01-asr/providers/Microsoft.Compute/disks/sdgql-datadisk0-ASRReplica",
                  "recoveryResourceGroupId": "/subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/ClusterTestRG-19-01-asr",
                  "recoveryTargetDiskAccountType": "Premium_LRS",
                  "recoveryTargetDiskId": null,
                  "resyncRequired": false,
                  "secretIdentifier": null,
                  "tfoDiskName": "sdgql-datadisk0-ASRtest"
                }
              ],
              "recoveryFabricLocation": "westus",
              "rpoInSeconds": 195,
              "sharedDiskIRErrors": null,
              "unprotectedDisks": null
            },
            "testFailoverState": "WaitingForCompletion"
          },
          "testFailoverState": "WaitingForCleanup",
          "testFailoverStateDescription": "Waiting for Test Failover Cleanup to start"
        }
      }
    },
    "202": {
      "headers": {
        "Azure-AsyncOperation": "https://management.azure.com/Subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationOperationStatus/49660b52-ccaa-4f22-87d6-a9c8f0b17674?api-version=2025-08-01",
        "Location": "https://management.azure.com/Subscriptions/7c943c1b-5122-4097-90c8-861411bdd574/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/fabric-pri-eastus/replicationProtectionContainers/pri-cloud-eastus/replicationProtectionClusters/testcluster/operationresults/76e220ab-8ae8-4047-b6e0-e6c0f6fc2241?api-version=2025-08-01",
        "Retry-After": 30
      }
    }
  },
  "operationId": "ReplicationProtectionClusters_TestFailover",
  "title": "Execute test failover for cluster."
}
