{
  "parameters": {
    "api-version": "2025-01-15-preview",
    "clusterName": "cluster1",
    "parameters": {
      "properties": {
        "clusterDefinition": {
          "configurations": {
            "gateway": {
              "restAuthCredential.isEnabled": true,
              "restAuthCredential.password": "**********",
              "restAuthCredential.username": "admin"
            }
          },
          "kind": "Hadoop"
        },
        "clusterVersion": "3.6",
        "computeProfile": {
          "roles": [
            {
              "name": "headnode",
              "hardwareProfile": {
                "vmSize": "Standard_DS14_v2"
              },
              "osProfile": {
                "linuxOperatingSystemProfile": {
                  "password": "**********",
                  "username": "sshuser"
                }
              },
              "targetInstanceCount": 2
            },
            {
              "name": "workernode",
              "hardwareProfile": {
                "vmSize": "Standard_DS14_v2"
              },
              "osProfile": {
                "linuxOperatingSystemProfile": {
                  "password": "**********",
                  "username": "sshuser"
                }
              },
              "targetInstanceCount": 3
            },
            {
              "name": "zookeepernode",
              "hardwareProfile": {
                "vmSize": "Standard_DS14_v2"
              },
              "osProfile": {
                "linuxOperatingSystemProfile": {
                  "password": "**********",
                  "username": "sshuser"
                }
              },
              "targetInstanceCount": 3
            }
          ]
        },
        "diskEncryptionProperties": {
          "encryptionAtHost": true
        },
        "osType": "Linux",
        "storageProfile": {
          "storageaccounts": [
            {
              "name": "mystorage.blob.core.windows.net",
              "container": "default8525",
              "enableSecureChannel": true,
              "isDefault": true,
              "key": "storagekey"
            }
          ]
        },
        "tier": "Standard"
      }
    },
    "resourceGroupName": "rg1",
    "subscriptionId": "subid"
  },
  "responses": {
    "200": {
      "body": {
        "name": "cluster1",
        "type": "Microsoft.HDInsight/clusters",
        "etag": "3b76ce3d-892c-4036-9d8b-8ade18ba7a4b",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.HDInsight/clusters/cluster1",
        "location": "South Central US",
        "properties": {
          "clusterDefinition": {
            "blueprint": "https://blueprints.azurehdinsight.net/hadoop-3.6.1000.67.2001080246.json",
            "componentVersion": {
              "Hadoop": "2.7"
            },
            "kind": "Hadoop"
          },
          "clusterState": "Running",
          "clusterVersion": "3.6.1000.67",
          "computeProfile": {
            "roles": [
              {
                "name": "headnode",
                "hardwareProfile": {
                  "vmSize": "standard_ds14_v2"
                },
                "osProfile": {
                  "linuxOperatingSystemProfile": {
                    "username": "sshuser"
                  }
                },
                "targetInstanceCount": 2
              },
              {
                "name": "workernode",
                "hardwareProfile": {
                  "vmSize": "standard_ds14_v2"
                },
                "osProfile": {
                  "linuxOperatingSystemProfile": {
                    "username": "sshuser"
                  }
                },
                "targetInstanceCount": 3
              },
              {
                "name": "zookeepernode",
                "hardwareProfile": {
                  "vmSize": "standard_ds14_v2"
                },
                "osProfile": {
                  "linuxOperatingSystemProfile": {
                    "username": "sshuser"
                  }
                },
                "targetInstanceCount": 3
              }
            ]
          },
          "connectivityEndpoints": [
            {
              "name": "SSH",
              "location": "cluster1-ssh.azurehdinsight.net",
              "port": 22,
              "protocol": "TCP"
            },
            {
              "name": "HTTPS",
              "location": "cluster1.azurehdinsight.net",
              "port": 443,
              "protocol": "TCP"
            }
          ],
          "createdDate": "2020-01-10T08:36:39.153",
          "diskEncryptionProperties": {
            "encryptionAlgorithm": null,
            "encryptionAtHost": true,
            "keyName": null,
            "keyVersion": null,
            "msiResourceId": null,
            "vaultUri": null
          },
          "osType": "Linux",
          "provisioningState": "Succeeded",
          "quotaInfo": {
            "coresUsed": 20
          },
          "tier": "Standard"
        },
        "tags": null
      },
      "headers": {
        "location": "https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.HDInsight/clusters/cluster1/azureasyncoperations/create?api-version=2025-01-15-preview"
      }
    }
  },
  "operationId": "Clusters_Create",
  "title": "Create cluster with encryption at host"
}
