{
  "swagger": "2.0",
  "info": {
    "title": "Metrics Advisor",
    "description": "Microsoft Azure Metrics Advisor REST API (OpenAPI v2)",
    "version": "1.0"
  },
  "paths": {
    "/stats/latest": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Get latest usage stats",
        "operationId": "getActiveSeriesCount",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/UsageStats"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Get latest usage stats": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "timestamp": "2020-03-01T00:00:00.000Z",
                  "activeSeriesCount": 100,
                  "allSeriesCount": 1000,
                  "metricsCount": 10,
                  "dataFeedCount": 5
                }
              }
            }
          }
        }
      }
    },
    "/alert/anomaly/configurations/{configurationId}": {
      "get": {
        "tags": [
          "AnomalyAlerting"
        ],
        "summary": "Query a single anomaly alerting configuration",
        "operationId": "getAlertConfiguration",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly alerting configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/AnomalyAlertConfiguration"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Query a single anomaly alerting configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "44444444-4444-4444-4444-000000000001"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "anomalyAlertingConfigurationId": "44444444-4444-4444-4444-000000000001",
                  "name": "alerting configuration name",
                  "description": "this is an anomaly alerting configuration",
                  "crossMetricsOperator": "AND",
                  "hookIds": [
                    "00000000-0000-0000-0000-000000000001"
                  ],
                  "metricAlertingConfigurations": [
                    {
                      "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                      "anomalyScopeType": "All",
                      "negationOperation": false,
                      "severityFilter": {
                        "minAlertSeverity": "Medium",
                        "maxAlertSeverity": "High"
                      },
                      "snoozeFilter": {
                        "autoSnooze": 0,
                        "snoozeScope": "Series",
                        "onlyForSuccessive": true
                      }
                    },
                    {
                      "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000002",
                      "anomalyScopeType": "Dimension",
                      "negationOperation": false,
                      "dimensionAnomalyScope": {
                        "dimension": {
                          "city": "Beijing"
                        }
                      },
                      "severityFilter": {
                        "minAlertSeverity": "Low",
                        "maxAlertSeverity": "High"
                      },
                      "snoozeFilter": {
                        "autoSnooze": 0,
                        "snoozeScope": "Series",
                        "onlyForSuccessive": true
                      },
                      "valueFilter": {
                        "lower": 0,
                        "upper": 1000,
                        "direction": "Both"
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "AnomalyAlerting"
        ],
        "summary": "Update anomaly alerting configuration",
        "operationId": "updateAlertConfiguration",
        "consumes": [
          "application/merge-patch+json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly alerting configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "body",
            "name": "body",
            "description": "anomaly alerting configuration",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AnomalyAlertingConfigurationPatch"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/AnomalyAlertConfiguration"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Update anomaly alerting configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "44444444-4444-4444-4444-000000000001",
              "Content-Type": "application/merge-patch+json",
              "body": {
                "name": "alerting configuration name",
                "description": "this is an anomaly alerting configuration",
                "crossMetricsOperator": "AND",
                "hookIds": [
                  "00000000-0000-0000-0000-000000000001"
                ],
                "metricAlertingConfigurations": [
                  {
                    "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                    "anomalyScopeType": "All",
                    "negationOperation": false,
                    "severityFilter": {
                      "minAlertSeverity": "Medium",
                      "maxAlertSeverity": "High"
                    },
                    "snoozeFilter": {
                      "autoSnooze": 0,
                      "snoozeScope": "Series",
                      "onlyForSuccessive": true
                    }
                  },
                  {
                    "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000002",
                    "anomalyScopeType": "Dimension",
                    "negationOperation": false,
                    "dimensionAnomalyScope": {
                      "dimension": {
                        "city": "Beijing"
                      }
                    },
                    "severityFilter": {
                      "minAlertSeverity": "Low",
                      "maxAlertSeverity": "High"
                    },
                    "snoozeFilter": {
                      "autoSnooze": 0,
                      "snoozeScope": "Series",
                      "onlyForSuccessive": true
                    },
                    "valueFilter": {
                      "lower": 0,
                      "upper": 1000,
                      "direction": "Both"
                    }
                  }
                ]
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "anomalyAlertingConfigurationId": "44444444-4444-4444-4444-000000000001",
                  "name": "alerting configuration name",
                  "description": "this is an anomaly alerting configuration",
                  "crossMetricsOperator": "AND",
                  "hookIds": [
                    "00000000-0000-0000-0000-000000000001"
                  ],
                  "metricAlertingConfigurations": [
                    {
                      "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                      "anomalyScopeType": "All",
                      "negationOperation": false,
                      "severityFilter": {
                        "minAlertSeverity": "Medium",
                        "maxAlertSeverity": "High"
                      },
                      "snoozeFilter": {
                        "autoSnooze": 0,
                        "snoozeScope": "Series",
                        "onlyForSuccessive": true
                      }
                    },
                    {
                      "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000002",
                      "anomalyScopeType": "Dimension",
                      "negationOperation": false,
                      "dimensionAnomalyScope": {
                        "dimension": {
                          "city": "Beijing"
                        }
                      },
                      "severityFilter": {
                        "minAlertSeverity": "Low",
                        "maxAlertSeverity": "High"
                      },
                      "snoozeFilter": {
                        "autoSnooze": 0,
                        "snoozeScope": "Series",
                        "onlyForSuccessive": true
                      },
                      "valueFilter": {
                        "lower": 0,
                        "upper": 1000,
                        "direction": "Both"
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "AnomalyAlerting"
        ],
        "summary": "Delete anomaly alerting configuration",
        "operationId": "deleteAlertConfiguration",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly alerting configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "204": {
            "description": "The resource is deleted successfully or does not exist."
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Delete anomaly alerting configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "44444444-4444-4444-4444-000000000001"
            },
            "responses": {
              "204": {}
            }
          }
        }
      }
    },
    "/alert/anomaly/configurations": {
      "post": {
        "tags": [
          "AnomalyAlerting"
        ],
        "summary": "Create anomaly alerting configuration",
        "operationId": "createAlertConfiguration",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "anomaly alerting configuration",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AnomalyAlertConfiguration"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "headers": {
              "Location": {
                "description": "Location of the newly created resource.",
                "type": "string"
              }
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Create anomaly alerting configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "Content-Type": "application/json",
              "body": {
                "name": "alerting configuration name",
                "crossMetricsOperator": "AND",
                "hookIds": [
                  "00000000-0000-0000-0000-000000000001"
                ],
                "metricAlertingConfigurations": [
                  {
                    "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                    "anomalyScopeType": "All",
                    "negationOperation": false,
                    "severityFilter": {
                      "minAlertSeverity": "Medium",
                      "maxAlertSeverity": "High"
                    },
                    "snoozeFilter": {
                      "autoSnooze": 0,
                      "snoozeScope": "Series",
                      "onlyForSuccessive": true
                    }
                  },
                  {
                    "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000002",
                    "anomalyScopeType": "Dimension",
                    "negationOperation": false,
                    "dimensionAnomalyScope": {
                      "dimension": {
                        "city": "Beijing"
                      }
                    },
                    "severityFilter": {
                      "minAlertSeverity": "Low",
                      "maxAlertSeverity": "High"
                    },
                    "snoozeFilter": {
                      "autoSnooze": 0,
                      "snoozeScope": "Series",
                      "onlyForSuccessive": true
                    },
                    "valueFilter": {
                      "lower": 0,
                      "upper": 1000,
                      "direction": "Both",
                      "type": "Value"
                    }
                  }
                ]
              }
            },
            "responses": {
              "201": {
                "headers": {
                  "Location": ""
                }
              }
            }
          }
        }
      }
    },
    "/alert/anomaly/configurations/{configurationId}/alerts/query": {
      "post": {
        "tags": [
          "AnomalyAlerting"
        ],
        "summary": "Query alerts under anomaly alerting configuration",
        "operationId": "listAlerts",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly alerting configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "query alerting result request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AlertingResultQuery"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/AlertResultList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "Query alerts under anomaly alerting configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "44444444-4444-4444-4444-000000000001",
              "Content-Type": "application/json",
              "body": {
                "startTime": "2020-01-01T00:00:00.000Z",
                "endTime": "2020-02-01T00:00:00.000Z",
                "timeMode": "AnomalyTime"
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    {
                      "alertId": "aaaaaaaaaaaa",
                      "timestamp": "2020-01-01T00:00:00.000Z",
                      "createdTime": "2020-03-01T00:00:00.000Z",
                      "modifiedTime": "2020-03-01T00:00:00.000Z"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/alert/anomaly/configurations/{configurationId}/alerts/{alertId}/anomalies": {
      "get": {
        "tags": [
          "AnomalyAlerting"
        ],
        "summary": "Query anomalies under a specific alert",
        "operationId": "getAnomaliesFromAlertByAnomalyAlertingConfiguration",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly alerting configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "path",
            "name": "alertId",
            "description": "alert id",
            "required": true,
            "type": "string"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/AnomalyResultList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "Query anomalies under a specific alert": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "44444444-4444-4444-4444-000000000001",
              "alertId": "aaaaaaaaaaaa"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    {
                      "dataFeedId": "11111111-1111-1111-1111-000000000001",
                      "metricId": "22222222-2222-2222-2222-000000000001",
                      "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                      "timestamp": "2020-01-01T00:00:00.000Z",
                      "createdTime": "2020-03-01T00:00:00.000Z",
                      "modifiedTime": "2020-03-01T00:00:00.000Z",
                      "dimension": {
                        "category": "__SUM__",
                        "city": "Beijing"
                      },
                      "property": {
                        "anomalySeverity": "High",
                        "anomalyStatus": "Active",
                        "value": 1,
                        "expectedValue": 100
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/alert/anomaly/configurations/{configurationId}/alerts/{alertId}/incidents": {
      "get": {
        "tags": [
          "AnomalyAlerting"
        ],
        "summary": "Query incidents under a specific alert",
        "operationId": "getIncidentsFromAlertByAnomalyAlertingConfiguration",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly alerting configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "path",
            "name": "alertId",
            "description": "alert id",
            "required": true,
            "type": "string"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/IncidentResultList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "Query incidents under a specific alert": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "44444444-4444-4444-4444-000000000001",
              "alertId": "aaaaaaaaaaaa"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    {
                      "dataFeedId": "11111111-1111-1111-1111-000000000001",
                      "metricId": "22222222-2222-2222-2222-000000000001",
                      "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                      "incidentId": "iiiiiiiiiiii",
                      "startTime": "2020-01-01T00:00:00.000Z",
                      "lastTime": "2020-02-01T00:00:00.000Z",
                      "rootNode": {
                        "dimension": {
                          "category": "__SUM__",
                          "city": "Beijing"
                        }
                      },
                      "property": {
                        "maxSeverity": "High",
                        "incidentStatus": "Active",
                        "valueOfRootNode": 1,
                        "expectedValueOfRootNode": 100
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/enrichment/anomalyDetection/configurations/{configurationId}": {
      "get": {
        "tags": [
          "AnomalyDetection"
        ],
        "summary": "Query a single anomaly detection configuration",
        "operationId": "getDetectionConfiguration",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly detection configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid",
            "x-ms-client-name": "detectionConfigurationId"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/AnomalyDetectionConfiguration"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Query a single anomaly detection configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "33333333-3333-3333-3333-000000000001"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                  "name": "Anomaly detection configuration name",
                  "description": "Anomaly detection configuration description",
                  "metricId": "22222222-2222-2222-2222-000000000001",
                  "wholeMetricConfiguration": {
                    "conditionOperator": "AND",
                    "smartDetectionCondition": {
                      "sensitivity": 91,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    },
                    "hardThresholdCondition": {
                      "lowerBound": 1,
                      "upperBound": 100,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    },
                    "changeThresholdCondition": {
                      "changePercentage": 5,
                      "shiftPoint": 1,
                      "withinRange": false,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    }
                  },
                  "dimensionGroupOverrideConfigurations": [
                    {
                      "group": {
                        "dimension": {
                          "city": "Beijing"
                        }
                      },
                      "conditionOperator": "AND",
                      "smartDetectionCondition": {
                        "sensitivity": 91,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      },
                      "hardThresholdCondition": {
                        "lowerBound": 1,
                        "upperBound": 100,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      },
                      "changeThresholdCondition": {
                        "changePercentage": 5,
                        "shiftPoint": 1,
                        "withinRange": false,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      }
                    }
                  ],
                  "seriesOverrideConfigurations": [
                    {
                      "series": {
                        "dimension": {
                          "category": "Jewelry",
                          "city": "Beijing"
                        }
                      },
                      "conditionOperator": "AND",
                      "smartDetectionCondition": {
                        "sensitivity": 91,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      },
                      "hardThresholdCondition": {
                        "lowerBound": 1,
                        "upperBound": 100,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      },
                      "changeThresholdCondition": {
                        "changePercentage": 5,
                        "shiftPoint": 1,
                        "withinRange": false,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "AnomalyDetection"
        ],
        "summary": "Update anomaly detection configuration",
        "operationId": "updateDetectionConfiguration",
        "consumes": [
          "application/merge-patch+json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly detection configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "body",
            "name": "body",
            "description": "anomaly detection configuration",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AnomalyDetectionConfigurationPatch"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/AnomalyDetectionConfiguration"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Update anomaly detection configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "33333333-3333-3333-3333-000000000001",
              "Content-Type": "application/merge-patch+json",
              "body": {
                "wholeMetricConfiguration": {
                  "smartDetectionCondition": {
                    "sensitivity": 91
                  }
                }
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                  "name": "Anomaly detection configuration name",
                  "description": "Anomaly detection configuration description",
                  "metricId": "22222222-2222-2222-2222-000000000001",
                  "wholeMetricConfiguration": {
                    "conditionOperator": "AND",
                    "smartDetectionCondition": {
                      "sensitivity": 91,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    },
                    "hardThresholdCondition": {
                      "lowerBound": 1,
                      "upperBound": 100,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    },
                    "changeThresholdCondition": {
                      "changePercentage": 5,
                      "shiftPoint": 1,
                      "withinRange": false,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    }
                  },
                  "dimensionGroupOverrideConfigurations": [
                    {
                      "group": {
                        "dimension": {
                          "city": "Beijing"
                        }
                      },
                      "conditionOperator": "AND",
                      "smartDetectionCondition": {
                        "sensitivity": 91,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      },
                      "hardThresholdCondition": {
                        "lowerBound": 1,
                        "upperBound": 100,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      },
                      "changeThresholdCondition": {
                        "changePercentage": 5,
                        "shiftPoint": 1,
                        "withinRange": false,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      }
                    }
                  ],
                  "seriesOverrideConfigurations": [
                    {
                      "series": {
                        "dimension": {
                          "category": "Jewelry",
                          "city": "Beijing"
                        }
                      },
                      "conditionOperator": "AND",
                      "smartDetectionCondition": {
                        "sensitivity": 91,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      },
                      "hardThresholdCondition": {
                        "lowerBound": 1,
                        "upperBound": 100,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      },
                      "changeThresholdCondition": {
                        "changePercentage": 5,
                        "shiftPoint": 1,
                        "withinRange": false,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "AnomalyDetection"
        ],
        "summary": "Delete anomaly detection configuration",
        "operationId": "deleteDetectionConfiguration",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly detection configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "204": {
            "description": "The resource is deleted successfully or does not exist."
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Delete anomaly detection configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "33333333-3333-3333-3333-000000000001"
            },
            "responses": {
              "204": {}
            }
          }
        }
      }
    },
    "/enrichment/anomalyDetection/configurations": {
      "post": {
        "tags": [
          "AnomalyDetection"
        ],
        "summary": "Create anomaly detection configuration",
        "operationId": "createDetectionConfiguration",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "anomaly detection configuration",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AnomalyDetectionConfiguration"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "headers": {
              "Location": {
                "description": "Location of the newly created resource.",
                "type": "string"
              }
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Create anomaly detection configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "Content-Type": "application/json",
              "body": {
                "name": "Anomaly detection configuration name",
                "description": "Anomaly detection configuration description",
                "metricId": "22222222-2222-2222-2222-000000000001",
                "wholeMetricConfiguration": {
                  "conditionOperator": "AND",
                  "smartDetectionCondition": {
                    "sensitivity": 91,
                    "anomalyDetectorDirection": "Both",
                    "suppressCondition": {
                      "minNumber": 1,
                      "minRatio": 100
                    }
                  },
                  "hardThresholdCondition": {
                    "lowerBound": 1,
                    "upperBound": 100,
                    "anomalyDetectorDirection": "Both",
                    "suppressCondition": {
                      "minNumber": 1,
                      "minRatio": 100
                    }
                  },
                  "changeThresholdCondition": {
                    "changePercentage": 5,
                    "shiftPoint": 1,
                    "withinRange": false,
                    "anomalyDetectorDirection": "Both",
                    "suppressCondition": {
                      "minNumber": 1,
                      "minRatio": 100
                    }
                  }
                },
                "dimensionGroupOverrideConfigurations": [
                  {
                    "group": {
                      "dimension": {
                        "city": "Beijing"
                      }
                    },
                    "conditionOperator": "AND",
                    "smartDetectionCondition": {
                      "sensitivity": 91,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    },
                    "hardThresholdCondition": {
                      "lowerBound": 1,
                      "upperBound": 100,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    },
                    "changeThresholdCondition": {
                      "changePercentage": 5,
                      "shiftPoint": 1,
                      "withinRange": false,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    }
                  }
                ],
                "seriesOverrideConfigurations": [
                  {
                    "series": {
                      "dimension": {
                        "category": "Jewelry",
                        "city": "Beijing"
                      }
                    },
                    "conditionOperator": "AND",
                    "smartDetectionCondition": {
                      "sensitivity": 91,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    },
                    "hardThresholdCondition": {
                      "lowerBound": 1,
                      "upperBound": 100,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    },
                    "changeThresholdCondition": {
                      "changePercentage": 5,
                      "shiftPoint": 1,
                      "withinRange": false,
                      "anomalyDetectorDirection": "Both",
                      "suppressCondition": {
                        "minNumber": 1,
                        "minRatio": 100
                      }
                    }
                  }
                ]
              }
            },
            "responses": {
              "201": {
                "headers": {
                  "Location": ""
                }
              }
            }
          }
        }
      }
    },
    "/enrichment/anomalyDetection/configurations/{configurationId}/alert/anomaly/configurations": {
      "get": {
        "tags": [
          "AnomalyDetection"
        ],
        "summary": "List all anomaly alerting configurations for specific anomaly detection configuration",
        "operationId": "listAlertConfigurations",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly detection configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/AnomalyAlertingConfigurationList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "List all anomaly alerting configurations for specific anomaly detection configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "33333333-3333-3333-3333-000000000001"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    {
                      "anomalyAlertingConfigurationId": "44444444-4444-4444-4444-000000000001",
                      "name": "alerting configuration name",
                      "description": "this is an anomaly alerting configuration",
                      "crossMetricsOperator": "AND",
                      "hookIds": [
                        "00000000-0000-0000-0000-000000000001"
                      ],
                      "metricAlertingConfigurations": [
                        {
                          "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                          "anomalyScopeType": "All",
                          "negationOperation": false,
                          "severityFilter": {
                            "minAlertSeverity": "Medium",
                            "maxAlertSeverity": "High"
                          },
                          "snoozeFilter": {
                            "autoSnooze": 0,
                            "snoozeScope": "Series",
                            "onlyForSuccessive": true
                          }
                        },
                        {
                          "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000002",
                          "anomalyScopeType": "Dimension",
                          "negationOperation": false,
                          "dimensionAnomalyScope": {
                            "dimension": {
                              "city": "Beijing"
                            }
                          },
                          "severityFilter": {
                            "minAlertSeverity": "Low",
                            "maxAlertSeverity": "High"
                          },
                          "snoozeFilter": {
                            "autoSnooze": 0,
                            "snoozeScope": "Series",
                            "onlyForSuccessive": true
                          },
                          "valueFilter": {
                            "lower": 0,
                            "upper": 1000,
                            "direction": "Both"
                          }
                        }
                      ]
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/enrichment/anomalyDetection/configurations/{configurationId}/series/query": {
      "post": {
        "tags": [
          "AnomalyDetection"
        ],
        "summary": "Query series enriched by anomaly detection",
        "operationId": "listMetricEnrichedSeriesData",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly detection configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "body",
            "name": "body",
            "description": "query series detection result request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DetectionSeriesQuery"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SeriesResultList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Query series enriched by anomaly detection": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "33333333-3333-3333-3333-000000000001",
              "Content-Type": "application/json",
              "body": {
                "startTime": "2020-01-01T00:00:00.000Z",
                "endTime": "2020-02-01T00:00:00.000Z",
                "series": [
                  {
                    "dimension": {
                      "category": "Jewelry",
                      "city": "Beijing"
                    }
                  }
                ]
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    {
                      "series": {
                        "dimension": {
                          "category": "Jewelry",
                          "city": "Beijing"
                        }
                      },
                      "timestampList": [
                        "2020-01-01T00:00:00.000Z"
                      ],
                      "valueList": [
                        108.3
                      ],
                      "isAnomalyList": [
                        false
                      ],
                      "periodList": [
                        0
                      ],
                      "expectedValueList": [
                        108
                      ],
                      "lowerBoundaryList": [
                        100.1
                      ],
                      "upperBoundaryList": [
                        112.8
                      ]
                    }
                  ]
                }
              }
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": null
        }
      }
    },
    "/enrichment/anomalyDetection/configurations/{configurationId}/anomalies/query": {
      "post": {
        "tags": [
          "AnomalyDetection"
        ],
        "summary": "Query anomalies under anomaly detection configuration",
        "operationId": "getAnomaliesByAnomalyDetectionConfiguration",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly detection configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "query detection anomaly result request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DetectionAnomalyResultQuery"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/AnomalyResultList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "Query anomalies under anomaly detection configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "33333333-3333-3333-3333-000000000001",
              "Content-Type": "application/json",
              "body": {
                "startTime": "2020-01-01T00:00:00.000Z",
                "endTime": "2020-02-01T00:00:00.000Z",
                "filter": {
                  "dimensionFilter": [
                    {
                      "dimension": {
                        "city": "Beijing"
                      }
                    }
                  ],
                  "severityFilter": {
                    "min": "Low",
                    "max": "High"
                  }
                }
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    {
                      "dataFeedId": "11111111-1111-1111-1111-000000000001",
                      "metricId": "22222222-2222-2222-2222-000000000001",
                      "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                      "timestamp": "2020-01-01T00:00:00.000Z",
                      "createdTime": "2020-03-01T00:00:00.000Z",
                      "modifiedTime": "2020-03-01T00:00:00.000Z",
                      "dimension": {
                        "category": "__SUM__",
                        "city": "Beijing"
                      },
                      "property": {
                        "anomalySeverity": "High",
                        "anomalyStatus": "Active",
                        "value": 1,
                        "expectedValue": 100
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/enrichment/anomalyDetection/configurations/{configurationId}/anomalies/dimension/query": {
      "post": {
        "tags": [
          "AnomalyDetection"
        ],
        "summary": "Query dimension values of anomalies",
        "operationId": "listAnomalyDimensionValues",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly detection configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "query dimension values request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AnomalyDimensionQuery"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/AnomalyDimensionList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "Query dimension values of anomalies": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "33333333-3333-3333-3333-000000000001",
              "Content-Type": "application/json",
              "body": {
                "startTime": "2020-01-01T00:00:00.000Z",
                "endTime": "2020-02-01T00:00:00.000Z",
                "dimensionName": "category",
                "dimensionFilter": {
                  "dimension": {
                    "city": "Beijing"
                  }
                }
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    "Jewelry"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/enrichment/anomalyDetection/configurations/{configurationId}/incidents/query": {
      "post": {
        "tags": [
          "AnomalyDetection"
        ],
        "summary": "Query incidents under anomaly detection configuration",
        "operationId": "getIncidentsByAnomalyDetectionConfiguration",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly detection configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "query detection incident result request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DetectionIncidentResultQuery"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/IncidentResultList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "Query incidents under anomaly detection configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "33333333-3333-3333-3333-000000000001",
              "Content-Type": "application/json",
              "body": {
                "startTime": "2020-01-01T00:00:00.000Z",
                "endTime": "2020-02-01T00:00:00.000Z",
                "filter": {
                  "dimensionFilter": [
                    {
                      "dimension": {
                        "city": "Beijing"
                      }
                    }
                  ]
                }
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    {
                      "dataFeedId": "11111111-1111-1111-1111-000000000001",
                      "metricId": "22222222-2222-2222-2222-000000000001",
                      "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                      "incidentId": "iiiiiiiiiiii",
                      "startTime": "2020-01-01T00:00:00.000Z",
                      "lastTime": "2020-02-01T00:00:00.000Z",
                      "rootNode": {
                        "dimension": {
                          "category": "__SUM__",
                          "city": "Beijing"
                        }
                      },
                      "property": {
                        "maxSeverity": "High",
                        "incidentStatus": "Active",
                        "valueOfRootNode": 1,
                        "expectedValueOfRootNode": 100
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "AnomalyDetection"
        ],
        "summary": "Query incidents under anomaly detection configuration",
        "operationId": "getIncidentsByAnomalyDetectionConfigurationNextPages",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly detection configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$token",
            "description": "the token for getting the next page",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/IncidentResultList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "Query incidents under anomaly detection configuration": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "33333333-3333-3333-3333-000000000001"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    {
                      "dataFeedId": "11111111-1111-1111-1111-000000000001",
                      "metricId": "22222222-2222-2222-2222-000000000001",
                      "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                      "incidentId": "iiiiiiiiiiii",
                      "startTime": "2020-01-01T00:00:00.000Z",
                      "lastTime": "2020-02-01T00:00:00.000Z",
                      "rootNode": {
                        "dimension": {
                          "category": "__SUM__",
                          "city": "Beijing"
                        }
                      },
                      "property": {
                        "maxSeverity": "High",
                        "incidentStatus": "Active",
                        "valueOfRootNode": 1,
                        "expectedValueOfRootNode": 100
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/enrichment/anomalyDetection/configurations/{configurationId}/incidents/{incidentId}/rootCause": {
      "get": {
        "tags": [
          "AnomalyDetection"
        ],
        "summary": "Query root cause for incident",
        "operationId": "listIncidentRootCauses",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "configurationId",
            "description": "anomaly detection configuration unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "path",
            "name": "incidentId",
            "description": "incident id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/RootCauseList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Query root cause for incident": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "configurationId": "33333333-3333-3333-3333-000000000001",
              "incidentId": "iiiiiiiiiiii"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    {
                      "rootCause": {
                        "dimension": {
                          "city": "Beijing"
                        }
                      },
                      "path": [
                        "city"
                      ],
                      "score": 0.67,
                      "description": "city = Beijing contributes the most to this anomaly."
                    }
                  ]
                }
              }
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": null
        }
      }
    },
    "/credentials": {
      "post": {
        "tags": [
          "Credential"
        ],
        "summary": "Create a new data source credential",
        "operationId": "createDatasourceCredential",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Create data source credential request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DataSourceCredential"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "headers": {
              "Location": {
                "description": "Location of the newly created resource.",
                "type": "string"
              }
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Create a new data source credential": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "Content-Type": "application/json",
              "body": {
                "parameters": {
                  "clientId": "88888888-8888-8888-8888-888888888888",
                  "clientSecret": "fake-client-secret",
                  "tenantId": "12345678-1234-1234-1234-123456788888"
                },
                "dataSourceCredentialName": "A data source credential",
                "dataSourceCredentialDescription": "This is a data source credential",
                "dataSourceCredentialType": "ServicePrincipal"
              }
            },
            "responses": {
              "201": {
                "headers": {
                  "Location": ""
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Credential"
        ],
        "summary": "List all credentials",
        "operationId": "listDatasourceCredentials",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/DataSourceCredentialList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "List all credentials": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "@nextLink": "https://localhost/credentials?$skip=1&$maxpagesize=1",
                  "value": [
                    {
                      "parameters": {
                        "clientId": "88888888-8888-8888-8888-888888888888",
                        "clientSecret": "fake-client-secret",
                        "tenantId": "12345678-1234-1234-1234-123456788888"
                      },
                      "dataSourceCredentialId": "01234567-0000-0000-0000-000000000002",
                      "dataSourceCredentialName": "A data source credential",
                      "dataSourceCredentialDescription": "This is a data source credential",
                      "dataSourceCredentialType": "ServicePrincipal"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/credentials/{credentialId}": {
      "patch": {
        "tags": [
          "Credential"
        ],
        "summary": "Update a data source credential",
        "operationId": "updateDatasourceCredential",
        "consumes": [
          "application/merge-patch+json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "credentialId",
            "description": "Data source credential unique ID",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Update data source credential request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DataSourceCredentialPatch"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/DataSourceCredential"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Update a data source credential": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "credentialId": "01234567-8901-2345-6789-012345678901",
              "Content-Type": "application/merge-patch+json",
              "body": {
                "dataSourceCredentialDescription": "This is a data source credential"
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "parameters": {
                    "clientId": "88888888-8888-8888-8888-888888888888",
                    "clientSecret": "fake-client-secret",
                    "tenantId": "12345678-1234-1234-1234-123456788888"
                  },
                  "dataSourceCredentialName": "A data source credential",
                  "dataSourceCredentialDescription": "This is a data source credential",
                  "dataSourceCredentialType": "ServicePrincipal"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Credential"
        ],
        "summary": "Delete a data source credential",
        "operationId": "deleteDatasourceCredential",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "credentialId",
            "description": "Data source credential unique ID",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "204": {
            "description": "The resource is deleted successfully or does not exist."
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Delete a data source credential": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "credentialId": "01234567-8901-2345-6789-012345678901"
            },
            "responses": {
              "204": {}
            }
          }
        }
      },
      "get": {
        "tags": [
          "Credential"
        ],
        "summary": "Get a data source credential",
        "operationId": "getDatasourceCredential",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "credentialId",
            "description": "Data source credential unique ID",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/DataSourceCredential"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Get a data source credential": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "credentialId": "01234567-8901-2345-6789-012345678901"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "parameters": {
                    "clientId": "88888888-8888-8888-8888-888888888888",
                    "clientSecret": "fake-client-secret",
                    "tenantId": "12345678-1234-1234-1234-123456788888"
                  },
                  "dataSourceCredentialName": "A data source credential",
                  "dataSourceCredentialDescription": "This is a data source credential",
                  "dataSourceCredentialType": "ServicePrincipal"
                }
              }
            }
          }
        }
      }
    },
    "/dataFeeds": {
      "get": {
        "tags": [
          "DataFeed"
        ],
        "summary": "List all data feeds",
        "operationId": "listDataFeeds",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "dataFeedName",
            "description": "filter data feed by its name",
            "type": "string"
          },
          {
            "in": "query",
            "name": "dataSourceType",
            "description": "filter data feed by its source type",
            "type": "string",
            "enum": [
              "AzureApplicationInsights",
              "AzureBlob",
              "AzureCosmosDB",
              "AzureDataExplorer",
              "AzureDataLakeStorageGen2",
              "AzureEventHubs",
              "AzureLogAnalytics",
              "AzureTable",
              "InfluxDB",
              "MongoDB",
              "MySql",
              "PostgreSql",
              "SqlServer"
            ],
            "x-ms-enum": {
              "name": "DataSourceType",
              "modelAsString": true
            }
          },
          {
            "in": "query",
            "name": "granularityName",
            "description": "filter data feed by its granularity",
            "type": "string",
            "enum": [
              "Yearly",
              "Monthly",
              "Weekly",
              "Daily",
              "Hourly",
              "Minutely",
              "Custom"
            ],
            "x-ms-enum": {
              "name": "DataFeedGranularityType",
              "modelAsString": true
            }
          },
          {
            "in": "query",
            "name": "status",
            "description": "filter data feed by its status",
            "type": "string",
            "enum": [
              "Active",
              "Paused"
            ],
            "x-ms-enum": {
              "name": "DataFeedStatus",
              "modelAsString": true
            }
          },
          {
            "in": "query",
            "name": "creator",
            "description": "filter data feed by its creator",
            "type": "string"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/DataFeedList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "List all data feeds": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "dataFeedName": "name_prefix",
              "dataSourceType": "SqlServer",
              "granularityName": "Daily",
              "status": "Active",
              "creator": "demo@microsoft.com"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "@nextLink": "https://localhost/dataFeeds?$skip=1&$maxpagesize=1",
                  "value": [
                    {
                      "dataSourceParameter": {
                        "connectionString": "Server=PlaceholderSqlServer,1433;Initial Catalog=PlaceholderDatabase;User ID=PlaceholderUserName;Password=PlaceholderPassword;",
                        "query": "select * from your_table where timestamp = @StartTime"
                      },
                      "dataFeedId": "11111111-1111-1111-1111-000000000001",
                      "dataFeedName": "Sample - cost/revenue - city/category",
                      "dataFeedDescription": "This is a sample data feed.",
                      "granularityName": "Daily",
                      "metrics": [
                        {
                          "metricId": "22222222-2222-2222-2222-000000000001",
                          "metricName": "cost",
                          "metricDisplayName": "cost"
                        },
                        {
                          "metricId": "22222222-2222-2222-2222-000000000002",
                          "metricName": "revenue",
                          "metricDisplayName": "revenue"
                        }
                      ],
                      "dimension": [
                        {
                          "dimensionName": "category",
                          "dimensionDisplayName": "category"
                        },
                        {
                          "dimensionName": "city",
                          "dimensionDisplayName": "city"
                        }
                      ],
                      "timestampColumn": "timestamp",
                      "dataStartFrom": "2020-01-01T00:00:00.000Z",
                      "dataSourceType": "SqlServer",
                      "startOffsetInSeconds": 86400,
                      "maxConcurrency": 5,
                      "minRetryIntervalInSeconds": 3600,
                      "stopRetryAfterInSeconds": 604800,
                      "needRollup": "NeedRollup",
                      "rollUpMethod": "Sum",
                      "allUpIdentification": "__SUM__",
                      "fillMissingPointType": "SmartFilling",
                      "viewMode": "Private",
                      "admins": [
                        "admin@company.example"
                      ],
                      "viewers": [],
                      "isAdmin": true,
                      "creator": "admin@company.example",
                      "status": "Active",
                      "createdTime": "2020-03-01T00:00:00.000Z",
                      "authenticationType": "Basic"
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "DataFeed"
        ],
        "summary": "Create a new data feed",
        "operationId": "createDataFeed",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "parameters to create a data feed",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DataFeed"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "headers": {
              "Location": {
                "description": "Location of the newly created resource.",
                "type": "string"
              }
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Create a new data feed": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "Content-Type": "application/json",
              "body": {
                "dataSourceParameter": {
                  "connectionString": "Server=PlaceholderSqlServer,1433;Initial Catalog=PlaceholderDatabase;User ID=PlaceholderUserName;Password=PlaceholderPassword;",
                  "query": "select * from your_table where timestamp = @StartTime"
                },
                "dataFeedName": "Sample - cost/revenue - city/category",
                "dataFeedDescription": "This is a sample data feed.",
                "granularityName": "Daily",
                "metrics": [
                  {
                    "metricName": "cost",
                    "metricDisplayName": "cost"
                  },
                  {
                    "metricName": "revenue",
                    "metricDisplayName": "revenue"
                  }
                ],
                "dimension": [
                  {
                    "dimensionName": "category",
                    "dimensionDisplayName": "category"
                  },
                  {
                    "dimensionName": "city",
                    "dimensionDisplayName": "city"
                  }
                ],
                "timestampColumn": "timestamp",
                "dataStartFrom": "2020-01-01T00:00:00.000Z",
                "dataSourceType": "SqlServer",
                "startOffsetInSeconds": 86400,
                "maxConcurrency": 5,
                "minRetryIntervalInSeconds": 3600,
                "stopRetryAfterInSeconds": 604800,
                "needRollup": "NeedRollup",
                "rollUpMethod": "Sum",
                "allUpIdentification": "__SUM__",
                "fillMissingPointType": "SmartFilling",
                "viewMode": "Private",
                "authenticationType": "Basic"
              }
            },
            "responses": {
              "201": {
                "headers": {
                  "Location": ""
                }
              }
            }
          }
        }
      }
    },
    "/dataFeeds/{dataFeedId}": {
      "get": {
        "tags": [
          "DataFeed"
        ],
        "summary": "Get a data feed by its id",
        "operationId": "getDataFeed",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "dataFeedId",
            "description": "The data feed unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/DataFeed"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Get a data feed by its id": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "dataFeedId": "01234567-8901-2345-6789-012345678901"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "dataSourceParameter": {
                    "connectionString": "Server=PlaceholderSqlServer,1433;Initial Catalog=PlaceholderDatabase;User ID=PlaceholderUserName;Password=PlaceholderPassword;",
                    "query": "select * from your_table where timestamp = @StartTime"
                  },
                  "dataFeedId": "11111111-1111-1111-1111-000000000001",
                  "dataFeedName": "Sample - cost/revenue - city/category",
                  "dataFeedDescription": "This is a sample data feed.",
                  "granularityName": "Daily",
                  "metrics": [
                    {
                      "metricId": "22222222-2222-2222-2222-000000000001",
                      "metricName": "cost",
                      "metricDisplayName": "cost"
                    },
                    {
                      "metricId": "22222222-2222-2222-2222-000000000002",
                      "metricName": "revenue",
                      "metricDisplayName": "revenue"
                    }
                  ],
                  "dimension": [
                    {
                      "dimensionName": "category",
                      "dimensionDisplayName": "category"
                    },
                    {
                      "dimensionName": "city",
                      "dimensionDisplayName": "city"
                    }
                  ],
                  "timestampColumn": "timestamp",
                  "dataStartFrom": "2020-01-01T00:00:00.000Z",
                  "dataSourceType": "SqlServer",
                  "startOffsetInSeconds": 86400,
                  "maxConcurrency": 5,
                  "minRetryIntervalInSeconds": 3600,
                  "stopRetryAfterInSeconds": 604800,
                  "needRollup": "NeedRollup",
                  "rollUpMethod": "Sum",
                  "allUpIdentification": "__SUM__",
                  "fillMissingPointType": "SmartFilling",
                  "viewMode": "Private",
                  "admins": [
                    "admin@company.example"
                  ],
                  "viewers": [],
                  "isAdmin": true,
                  "creator": "admin@company.example",
                  "status": "Active",
                  "createdTime": "2020-03-01T00:00:00.000Z",
                  "authenticationType": "Basic"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "DataFeed"
        ],
        "summary": "Update a data feed",
        "operationId": "updateDataFeed",
        "consumes": [
          "application/merge-patch+json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "dataFeedId",
            "description": "The data feed unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "body",
            "name": "body",
            "description": "parameters to update a data feed",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DataFeedDetailPatch"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/DataFeed"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Update a data feed": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "dataFeedId": "01234567-8901-2345-6789-012345678901",
              "Content-Type": "application/merge-patch+json",
              "body": {
                "dataFeedName": "Sample - cost/revenue - city/category"
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "dataSourceParameter": {
                    "connectionString": "Server=PlaceholderSqlServer,1433;Initial Catalog=PlaceholderDatabase;User ID=PlaceholderUserName;Password=PlaceholderPassword;",
                    "query": "select * from your_table where timestamp = @StartTime"
                  },
                  "dataFeedId": "11111111-1111-1111-1111-000000000001",
                  "dataFeedName": "Sample - cost/revenue - city/category",
                  "dataFeedDescription": "This is a sample data feed.",
                  "granularityName": "Daily",
                  "metrics": [
                    {
                      "metricId": "22222222-2222-2222-2222-000000000001",
                      "metricName": "cost",
                      "metricDisplayName": "cost"
                    },
                    {
                      "metricId": "22222222-2222-2222-2222-000000000002",
                      "metricName": "revenue",
                      "metricDisplayName": "revenue"
                    }
                  ],
                  "dimension": [
                    {
                      "dimensionName": "category",
                      "dimensionDisplayName": "category"
                    },
                    {
                      "dimensionName": "city",
                      "dimensionDisplayName": "city"
                    }
                  ],
                  "timestampColumn": "timestamp",
                  "dataStartFrom": "2020-01-01T00:00:00.000Z",
                  "dataSourceType": "SqlServer",
                  "startOffsetInSeconds": 86400,
                  "maxConcurrency": 5,
                  "minRetryIntervalInSeconds": 3600,
                  "stopRetryAfterInSeconds": 604800,
                  "needRollup": "NeedRollup",
                  "rollUpMethod": "Sum",
                  "allUpIdentification": "__SUM__",
                  "fillMissingPointType": "SmartFilling",
                  "viewMode": "Private",
                  "admins": [
                    "admin@company.example"
                  ],
                  "viewers": [],
                  "isAdmin": true,
                  "creator": "admin@company.example",
                  "status": "Active",
                  "createdTime": "2020-03-01T00:00:00.000Z",
                  "authenticationType": "Basic"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "DataFeed"
        ],
        "summary": "Delete a data feed",
        "operationId": "deleteDataFeed",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "dataFeedId",
            "description": "The data feed unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "204": {
            "description": "The resource is deleted successfully or does not exist."
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Delete a data feed": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "dataFeedId": "01234567-8901-2345-6789-012345678901"
            },
            "responses": {
              "204": {}
            }
          }
        }
      }
    },
    "/feedback/metric/{feedbackId}": {
      "get": {
        "tags": [
          "Feedback"
        ],
        "summary": "Get a metric feedback by its id",
        "operationId": "getFeedback",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "feedbackId",
            "description": "the unique feedback ID",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/MetricFeedback"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Get a metric feedback by its id": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "feedbackId": "99998888-7777-6666-5555-444433332222"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "startTime": "2020-01-01T00:00:00.000Z",
                  "endTime": "2020-01-01T00:00:00.000Z",
                  "value": {
                    "anomalyValue": "NotAnomaly"
                  },
                  "anomalyDetectionConfigurationId": "00000000-0000-0000-0000-000000000000",
                  "anomalyDetectionConfigurationSnapshot": {
                    "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                    "name": "Anomaly detection configuration name",
                    "description": "Anomaly detection configuration description",
                    "metricId": "22222222-2222-2222-2222-000000000001",
                    "wholeMetricConfiguration": {
                      "conditionOperator": "AND",
                      "smartDetectionCondition": {
                        "sensitivity": 91,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      },
                      "hardThresholdCondition": {
                        "lowerBound": 1,
                        "upperBound": 100,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      },
                      "changeThresholdCondition": {
                        "changePercentage": 5,
                        "shiftPoint": 1,
                        "withinRange": false,
                        "anomalyDetectorDirection": "Both",
                        "suppressCondition": {
                          "minNumber": 1,
                          "minRatio": 100
                        }
                      }
                    },
                    "dimensionGroupOverrideConfigurations": [
                      {
                        "group": {
                          "dimension": {
                            "city": "Beijing"
                          }
                        },
                        "conditionOperator": "AND",
                        "smartDetectionCondition": {
                          "sensitivity": 91,
                          "anomalyDetectorDirection": "Both",
                          "suppressCondition": {
                            "minNumber": 1,
                            "minRatio": 100
                          }
                        },
                        "hardThresholdCondition": {
                          "lowerBound": 1,
                          "upperBound": 100,
                          "anomalyDetectorDirection": "Both",
                          "suppressCondition": {
                            "minNumber": 1,
                            "minRatio": 100
                          }
                        },
                        "changeThresholdCondition": {
                          "changePercentage": 5,
                          "shiftPoint": 1,
                          "withinRange": false,
                          "anomalyDetectorDirection": "Both",
                          "suppressCondition": {
                            "minNumber": 1,
                            "minRatio": 100
                          }
                        }
                      }
                    ],
                    "seriesOverrideConfigurations": [
                      {
                        "series": {
                          "dimension": {
                            "category": "Jewelry",
                            "city": "Beijing"
                          }
                        },
                        "conditionOperator": "AND",
                        "smartDetectionCondition": {
                          "sensitivity": 91,
                          "anomalyDetectorDirection": "Both",
                          "suppressCondition": {
                            "minNumber": 1,
                            "minRatio": 100
                          }
                        },
                        "hardThresholdCondition": {
                          "lowerBound": 1,
                          "upperBound": 100,
                          "anomalyDetectorDirection": "Both",
                          "suppressCondition": {
                            "minNumber": 1,
                            "minRatio": 100
                          }
                        },
                        "changeThresholdCondition": {
                          "changePercentage": 5,
                          "shiftPoint": 1,
                          "withinRange": false,
                          "anomalyDetectorDirection": "Both",
                          "suppressCondition": {
                            "minNumber": 1,
                            "minRatio": 100
                          }
                        }
                      }
                    ]
                  },
                  "feedbackId": "99999999-9999-9999-9999-000000000001",
                  "createdTime": "2020-03-01T00:00:00.000Z",
                  "userPrincipal": "viewer@company.example",
                  "metricId": "22222222-2222-2222-2222-000000000001",
                  "dimensionFilter": {
                    "dimension": {
                      "city": "Beijing"
                    }
                  },
                  "feedbackType": "Anomaly"
                }
              }
            }
          }
        }
      }
    },
    "/feedback/metric/query": {
      "post": {
        "tags": [
          "Feedback"
        ],
        "summary": "List feedback on the given metric",
        "operationId": "listFeedback",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "metric feedback filter",
            "required": true,
            "schema": {
              "$ref": "#/definitions/MetricFeedbackFilter"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/MetricFeedbackList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "List feedback on the given metric": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "Content-Type": "application/json",
              "body": {
                "metricId": "22222222-2222-2222-2222-000000000001",
                "feedbackType": "Anomaly",
                "startTime": "2020-01-01T00:00:00.000Z",
                "endTime": "2020-01-01T00:00:00.000Z",
                "timeMode": "MetricTimestamp"
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "@nextLink": "https://localhost/feedback?$skip=1&$maxpagesize=1",
                  "value": [
                    {
                      "startTime": "2020-01-01T00:00:00.000Z",
                      "endTime": "2020-01-01T00:00:00.000Z",
                      "value": {
                        "anomalyValue": "NotAnomaly"
                      },
                      "anomalyDetectionConfigurationId": "00000000-0000-0000-0000-000000000000",
                      "anomalyDetectionConfigurationSnapshot": {
                        "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                        "name": "Anomaly detection configuration name",
                        "description": "Anomaly detection configuration description",
                        "metricId": "22222222-2222-2222-2222-000000000001",
                        "wholeMetricConfiguration": {
                          "conditionOperator": "AND",
                          "smartDetectionCondition": {
                            "sensitivity": 91,
                            "anomalyDetectorDirection": "Both",
                            "suppressCondition": {
                              "minNumber": 1,
                              "minRatio": 100
                            }
                          },
                          "hardThresholdCondition": {
                            "lowerBound": 1,
                            "upperBound": 100,
                            "anomalyDetectorDirection": "Both",
                            "suppressCondition": {
                              "minNumber": 1,
                              "minRatio": 100
                            }
                          },
                          "changeThresholdCondition": {
                            "changePercentage": 5,
                            "shiftPoint": 1,
                            "withinRange": false,
                            "anomalyDetectorDirection": "Both",
                            "suppressCondition": {
                              "minNumber": 1,
                              "minRatio": 100
                            }
                          }
                        },
                        "dimensionGroupOverrideConfigurations": [
                          {
                            "group": {
                              "dimension": {
                                "city": "Beijing"
                              }
                            },
                            "conditionOperator": "AND",
                            "smartDetectionCondition": {
                              "sensitivity": 91,
                              "anomalyDetectorDirection": "Both",
                              "suppressCondition": {
                                "minNumber": 1,
                                "minRatio": 100
                              }
                            },
                            "hardThresholdCondition": {
                              "lowerBound": 1,
                              "upperBound": 100,
                              "anomalyDetectorDirection": "Both",
                              "suppressCondition": {
                                "minNumber": 1,
                                "minRatio": 100
                              }
                            },
                            "changeThresholdCondition": {
                              "changePercentage": 5,
                              "shiftPoint": 1,
                              "withinRange": false,
                              "anomalyDetectorDirection": "Both",
                              "suppressCondition": {
                                "minNumber": 1,
                                "minRatio": 100
                              }
                            }
                          }
                        ],
                        "seriesOverrideConfigurations": [
                          {
                            "series": {
                              "dimension": {
                                "category": "Jewelry",
                                "city": "Beijing"
                              }
                            },
                            "conditionOperator": "AND",
                            "smartDetectionCondition": {
                              "sensitivity": 91,
                              "anomalyDetectorDirection": "Both",
                              "suppressCondition": {
                                "minNumber": 1,
                                "minRatio": 100
                              }
                            },
                            "hardThresholdCondition": {
                              "lowerBound": 1,
                              "upperBound": 100,
                              "anomalyDetectorDirection": "Both",
                              "suppressCondition": {
                                "minNumber": 1,
                                "minRatio": 100
                              }
                            },
                            "changeThresholdCondition": {
                              "changePercentage": 5,
                              "shiftPoint": 1,
                              "withinRange": false,
                              "anomalyDetectorDirection": "Both",
                              "suppressCondition": {
                                "minNumber": 1,
                                "minRatio": 100
                              }
                            }
                          }
                        ]
                      },
                      "feedbackId": "99999999-9999-9999-9999-000000000001",
                      "createdTime": "2020-03-01T00:00:00.000Z",
                      "userPrincipal": "viewer@company.example",
                      "metricId": "22222222-2222-2222-2222-000000000001",
                      "dimensionFilter": {
                        "dimension": {
                          "city": "Beijing"
                        }
                      },
                      "feedbackType": "Anomaly"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/feedback/metric": {
      "post": {
        "tags": [
          "Feedback"
        ],
        "summary": "Create a new metric feedback",
        "operationId": "addFeedback",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "metric feedback",
            "required": true,
            "schema": {
              "$ref": "#/definitions/MetricFeedback"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "headers": {
              "Location": {
                "description": "Location of the newly created resource.",
                "type": "string"
              }
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Create a new metric feedback": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "Content-Type": "application/json",
              "body": {
                "startTime": "2020-01-01T00:00:00.000Z",
                "endTime": "2020-01-01T00:00:00.000Z",
                "value": {
                  "anomalyValue": "NotAnomaly"
                },
                "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                "metricId": "22222222-2222-2222-2222-000000000001",
                "dimensionFilter": {
                  "dimension": {
                    "city": "Beijing"
                  }
                },
                "feedbackType": "Anomaly"
              }
            },
            "responses": {
              "201": {
                "headers": {
                  "Location": ""
                }
              }
            }
          }
        }
      }
    },
    "/hooks": {
      "get": {
        "tags": [
          "Hook"
        ],
        "summary": "List all hooks",
        "operationId": "listHooks",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "hookName",
            "description": "filter hook by its name",
            "type": "string"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/HookList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "List all hooks": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "hookName": "name_prefix"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "@nextLink": "https://localhost/hooks?$skip=1&$maxpagesize=1",
                  "value": [
                    {
                      "hookParameter": {
                        "endpoint": "https://localhost/demo/post"
                      },
                      "hookId": "00000000-0000-0000-0000-000000000001",
                      "hookName": "A webhook",
                      "hookType": "Webhook",
                      "description": "This is a webhook.",
                      "externalLink": "",
                      "admins": [
                        "admin@company.example"
                      ]
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Hook"
        ],
        "summary": "Create a new hook",
        "operationId": "createHook",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Create hook request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/NotificationHook"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "headers": {
              "Location": {
                "description": "Location of the newly created resource.",
                "type": "string"
              }
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Create a new hook": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "Content-Type": "application/json",
              "body": {
                "hookParameter": {
                  "endpoint": "https://localhost/demo/post"
                },
                "hookName": "A webhook",
                "hookType": "Webhook",
                "description": "This is a webhook.",
                "externalLink": ""
              }
            },
            "responses": {
              "201": {
                "headers": {
                  "Location": ""
                }
              }
            }
          }
        }
      }
    },
    "/hooks/{hookId}": {
      "get": {
        "tags": [
          "Hook"
        ],
        "summary": "Get a hook by its id",
        "operationId": "getHook",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "hookId",
            "description": "Hook unique ID",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/NotificationHook"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Get a hook by its id": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "hookId": "01234567-8901-2345-6789-012345678901"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "hookParameter": {
                    "endpoint": "https://localhost/demo/post"
                  },
                  "hookId": "00000000-0000-0000-0000-000000000001",
                  "hookName": "A webhook",
                  "hookType": "Webhook",
                  "description": "This is a webhook.",
                  "externalLink": "",
                  "admins": [
                    "admin@company.example"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Hook"
        ],
        "summary": "Update a hook",
        "operationId": "updateHook",
        "consumes": [
          "application/merge-patch+json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "hookId",
            "description": "Hook unique ID",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Update hook request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/NotificationHook"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/NotificationHook"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Update a hook": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "hookId": "01234567-8901-2345-6789-012345678901",
              "Content-Type": "application/merge-patch+json",
              "body": {
                "description": "This is a webhook."
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "hookParameter": {
                    "endpoint": "https://localhost/demo/post"
                  },
                  "hookId": "00000000-0000-0000-0000-000000000001",
                  "hookName": "A webhook",
                  "hookType": "Webhook",
                  "description": "This is a webhook.",
                  "externalLink": "",
                  "admins": [
                    "admin@company.example"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Hook"
        ],
        "summary": "Delete a hook",
        "operationId": "deleteHook",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "hookId",
            "description": "Hook unique ID",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "204": {
            "description": "The resource is deleted successfully or does not exist."
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Delete a hook": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "hookId": "01234567-8901-2345-6789-012345678901"
            },
            "responses": {
              "204": {}
            }
          }
        }
      }
    },
    "/dataFeeds/{dataFeedId}/ingestionStatus/query": {
      "post": {
        "tags": [
          "IngestionStatus"
        ],
        "summary": "Get data ingestion status by data feed",
        "operationId": "listDataFeedIngestionStatus",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "dataFeedId",
            "description": "The data feed unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "The query time range",
            "required": true,
            "schema": {
              "$ref": "#/definitions/IngestionStatusQueryOptions"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/IngestionStatusList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "Get data ingestion status by data feed": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "dataFeedId": "01234567-8901-2345-6789-012345678901",
              "Content-Type": "application/json",
              "body": {
                "startTime": "2020-01-01T00:00:00.000Z",
                "endTime": "2020-02-01T00:00:00.000Z"
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "@nextLink": "https://localhost/dataFeeds/01234567-8901-2345-6789-012345678901/ingestionStatus/query?$skip=2&$maxpagesize=2",
                  "value": [
                    {
                      "timestamp": "2020-01-01T00:00:00.000Z",
                      "status": "Succeeded",
                      "message": ""
                    },
                    {
                      "timestamp": "2020-01-02T00:00:00.000Z",
                      "status": "Succeeded",
                      "message": ""
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/dataFeeds/{dataFeedId}/ingestionProgress/reset": {
      "post": {
        "tags": [
          "IngestionStatus"
        ],
        "summary": "Reset data ingestion status by data feed to backfill data",
        "operationId": "refreshDataFeedIngestion",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "dataFeedId",
            "description": "The data feed unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "body",
            "name": "body",
            "description": "The backfill time range",
            "required": true,
            "schema": {
              "$ref": "#/definitions/IngestionProgressResetOptions"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Success"
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Reset data ingestion status by data feed to backfill data": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "dataFeedId": "01234567-8901-2345-6789-012345678901",
              "Content-Type": "application/json",
              "body": {
                "startTime": "2020-01-01T00:00:00.000Z",
                "endTime": "2020-02-01T00:00:00.000Z"
              }
            },
            "responses": {
              "204": {}
            }
          }
        }
      }
    },
    "/dataFeeds/{dataFeedId}/ingestionProgress": {
      "get": {
        "tags": [
          "IngestionStatus"
        ],
        "summary": "Get data last success ingestion job timestamp by data feed",
        "operationId": "getDataFeedIngestionProgress",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "dataFeedId",
            "description": "The data feed unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/DataFeedIngestionProgress"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Get data last success ingestion job timestamp by data feed": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "dataFeedId": "01234567-8901-2345-6789-012345678901"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "latestSuccessTimestamp": "2020-01-30T00:00:00.000Z",
                  "latestActiveTimestamp": "2020-01-31T00:00:00.000Z"
                }
              }
            }
          }
        }
      }
    },
    "/metrics/{metricId}/data/query": {
      "post": {
        "tags": [
          "Metric"
        ],
        "summary": "Get time series data from metric",
        "operationId": "listMetricSeriesData",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "metricId",
            "description": "metric unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "body",
            "name": "body",
            "description": "query time series data condition",
            "required": true,
            "schema": {
              "$ref": "#/definitions/MetricDataQueryOptions"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/MetricDataList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-examples": {
          "Get time series data from metric": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "metricId": "22222222-2222-2222-2222-000000000001",
              "Content-Type": "application/json",
              "body": {
                "startTime": "2020-01-01T00:00:00.000Z",
                "endTime": "2020-02-01T00:00:00.000Z",
                "series": [
                  {
                    "category": "__SUM__",
                    "city": "Beijing"
                  }
                ]
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    {
                      "id": {
                        "metricId": "22222222-2222-2222-2222-000000000001",
                        "dimension": {
                          "category": "__SUM__",
                          "city": "Beijing"
                        }
                      },
                      "timestampList": [
                        "2020-01-01T00:00:00.000Z",
                        "2020-01-02T00:00:00.000Z"
                      ],
                      "valueList": [
                        2.718281828459045,
                        3.141592653589793
                      ]
                    }
                  ]
                }
              }
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": null
        }
      }
    },
    "/metrics/{metricId}/series/query": {
      "post": {
        "tags": [
          "Metric"
        ],
        "summary": "List series (dimension combinations) from metric",
        "operationId": "listMetricSeriesDefinitions",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "metricId",
            "description": "metric unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "filter to query series",
            "required": true,
            "schema": {
              "$ref": "#/definitions/MetricSeriesQueryOptions"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/MetricSeriesList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "List series (dimension combinations) from metric": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "metricId": "22222222-2222-2222-2222-000000000001",
              "Content-Type": "application/json",
              "body": {
                "activeSince": "2020-01-01T00:00:00.000Z",
                "dimensionFilter": {
                  "city": [
                    "Beijing"
                  ]
                }
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "@nextLink": "https://localhost/metrics/22222222-2222-2222-2222-000000000001/series/query?$skip=2&$maxpagesize=2",
                  "value": [
                    {
                      "metricId": "22222222-2222-2222-2222-000000000001",
                      "dimension": {
                        "category": "__SUM__",
                        "city": "Beijing"
                      }
                    },
                    {
                      "metricId": "22222222-2222-2222-2222-000000000001",
                      "dimension": {
                        "category": "Jewelry",
                        "city": "Beijing"
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/metrics/{metricId}/dimension/query": {
      "post": {
        "tags": [
          "Metric"
        ],
        "summary": "List dimension from certain metric",
        "operationId": "listMetricDimensionValues",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "metricId",
            "description": "metric unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "query dimension option",
            "required": true,
            "schema": {
              "$ref": "#/definitions/MetricDimensionQueryOptions"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/MetricDimensionList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "List dimension from certain metric": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "metricId": "22222222-2222-2222-2222-000000000001",
              "Content-Type": "application/json",
              "body": {
                "dimensionName": "city"
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "@nextLink": "https://localhost/metrics/22222222-2222-2222-2222-000000000001/dimension/query?$skip=2&$maxpagesize=2",
                  "value": [
                    "__SUM__",
                    "Beijing"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/metrics/{metricId}/enrichment/anomalyDetection/configurations": {
      "get": {
        "tags": [
          "Metric"
        ],
        "summary": "List all anomaly detection configurations for specific metric",
        "operationId": "listDetectionConfigurations",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "metricId",
            "description": "metric unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/AnomalyDetectionConfigurationList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "List all anomaly detection configurations for specific metric": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "metricId": "22222222-2222-2222-2222-000000000001"
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "value": [
                    {
                      "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
                      "name": "Anomaly detection configuration name",
                      "description": "Anomaly detection configuration description",
                      "metricId": "22222222-2222-2222-2222-000000000001",
                      "wholeMetricConfiguration": {
                        "conditionOperator": "AND",
                        "smartDetectionCondition": {
                          "sensitivity": 91,
                          "anomalyDetectorDirection": "Both",
                          "suppressCondition": {
                            "minNumber": 1,
                            "minRatio": 100
                          }
                        },
                        "hardThresholdCondition": {
                          "lowerBound": 1,
                          "upperBound": 100,
                          "anomalyDetectorDirection": "Both",
                          "suppressCondition": {
                            "minNumber": 1,
                            "minRatio": 100
                          }
                        },
                        "changeThresholdCondition": {
                          "changePercentage": 5,
                          "shiftPoint": 1,
                          "withinRange": false,
                          "anomalyDetectorDirection": "Both",
                          "suppressCondition": {
                            "minNumber": 1,
                            "minRatio": 100
                          }
                        }
                      },
                      "dimensionGroupOverrideConfigurations": [
                        {
                          "group": {
                            "dimension": {
                              "city": "Beijing"
                            }
                          },
                          "conditionOperator": "AND",
                          "smartDetectionCondition": {
                            "sensitivity": 91,
                            "anomalyDetectorDirection": "Both",
                            "suppressCondition": {
                              "minNumber": 1,
                              "minRatio": 100
                            }
                          },
                          "hardThresholdCondition": {
                            "lowerBound": 1,
                            "upperBound": 100,
                            "anomalyDetectorDirection": "Both",
                            "suppressCondition": {
                              "minNumber": 1,
                              "minRatio": 100
                            }
                          },
                          "changeThresholdCondition": {
                            "changePercentage": 5,
                            "shiftPoint": 1,
                            "withinRange": false,
                            "anomalyDetectorDirection": "Both",
                            "suppressCondition": {
                              "minNumber": 1,
                              "minRatio": 100
                            }
                          }
                        }
                      ],
                      "seriesOverrideConfigurations": [
                        {
                          "series": {
                            "dimension": {
                              "category": "Jewelry",
                              "city": "Beijing"
                            }
                          },
                          "conditionOperator": "AND",
                          "smartDetectionCondition": {
                            "sensitivity": 91,
                            "anomalyDetectorDirection": "Both",
                            "suppressCondition": {
                              "minNumber": 1,
                              "minRatio": 100
                            }
                          },
                          "hardThresholdCondition": {
                            "lowerBound": 1,
                            "upperBound": 100,
                            "anomalyDetectorDirection": "Both",
                            "suppressCondition": {
                              "minNumber": 1,
                              "minRatio": 100
                            }
                          },
                          "changeThresholdCondition": {
                            "changePercentage": 5,
                            "shiftPoint": 1,
                            "withinRange": false,
                            "anomalyDetectorDirection": "Both",
                            "suppressCondition": {
                              "minNumber": 1,
                              "minRatio": 100
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/metrics/{metricId}/status/enrichment/anomalyDetection/query": {
      "post": {
        "tags": [
          "Metric"
        ],
        "summary": "Query anomaly detection status",
        "operationId": "listMetricEnrichmentStatus",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "metricId",
            "description": "metric unique id",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "in": "query",
            "name": "$skip",
            "description": "for paging, skipped number",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "query",
            "name": "$maxpagesize",
            "description": "the maximum number of items in one page",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "query options",
            "required": true,
            "schema": {
              "$ref": "#/definitions/EnrichmentStatusQueryOption"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/EnrichmentStatusList"
            }
          },
          "default": {
            "description": "Client error or server error (4xx or 5xx)",
            "schema": {
              "$ref": "#/definitions/ErrorCode"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "@nextLink"
        },
        "x-ms-examples": {
          "Query anomaly detection status": {
            "parameters": {
              "endpoint": "{endpoint}",
              "Ocp-Apim-Subscription-Key": "{API key}",
              "metricId": "22222222-2222-2222-2222-000000000001",
              "Content-Type": "application/json",
              "body": {
                "startTime": "2020-01-01T00:00:00.000Z",
                "endTime": "2020-02-01T00:00:00.000Z"
              }
            },
            "responses": {
              "200": {
                "headers": {},
                "body": {
                  "@nextLink": "https://localhost/metrics/22222222-2222-2222-2222-000000000001/status/enrichment/anomalyDetection/query?$skip=2&$maxpagesize=2",
                  "value": [
                    {
                      "timestamp": "2020-01-01T00:00:00.000Z",
                      "status": "Succeeded",
                      "message": ""
                    },
                    {
                      "timestamp": "2020-01-02T00:00:00.000Z",
                      "status": "Succeeded",
                      "message": ""
                    }
                  ]
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "UsageStats": {
      "type": "object",
      "properties": {
        "timestamp": {
          "format": "date-time",
          "description": "The timestamp of the stats",
          "type": "string",
          "readOnly": true
        },
        "activeSeriesCount": {
          "format": "int32",
          "description": "The active series count",
          "type": "integer",
          "readOnly": true
        },
        "allSeriesCount": {
          "format": "int32",
          "description": "All series count under non deleted data feed",
          "type": "integer",
          "readOnly": true
        },
        "metricsCount": {
          "format": "int32",
          "description": "The metrics count under non deleted data feed",
          "type": "integer",
          "readOnly": true
        },
        "dataFeedCount": {
          "format": "int32",
          "description": "The count of non deleted data feed",
          "type": "integer",
          "readOnly": true
        }
      }
    },
    "ErrorCode": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        },
        "code": {
          "type": "string"
        }
      }
    },
    "DimensionGroupIdentity": {
      "required": [
        "dimension"
      ],
      "type": "object",
      "properties": {
        "dimension": {
          "description": "dimension specified for series group",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "x-ms-client-name": "seriesGroupKey"
        }
      }
    },
    "TopNGroupScope": {
      "required": [
        "minTopCount",
        "period",
        "top"
      ],
      "type": "object",
      "properties": {
        "top": {
          "format": "int32",
          "description": "top N, value range : [1, +)",
          "type": "integer"
        },
        "period": {
          "format": "int32",
          "description": "point count used to look back, value range : [1, +)",
          "type": "integer"
        },
        "minTopCount": {
          "format": "int32",
          "description": "min count should be in top N, value range : [1, +)\r\n\r\nshould be less than or equal to period",
          "type": "integer"
        }
      }
    },
    "SeverityCondition": {
      "required": [
        "maxAlertSeverity",
        "minAlertSeverity"
      ],
      "type": "object",
      "properties": {
        "minAlertSeverity": {
          "description": "min alert severity",
          "enum": [
            "Low",
            "Medium",
            "High"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalySeverity",
            "modelAsString": true
          }
        },
        "maxAlertSeverity": {
          "description": "max alert severity",
          "enum": [
            "Low",
            "Medium",
            "High"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalySeverity",
            "modelAsString": true
          }
        }
      }
    },
    "ValueCondition": {
      "required": [
        "direction"
      ],
      "type": "object",
      "properties": {
        "lower": {
          "format": "double",
          "description": "lower bound\r\n\r\nshould be specified when direction is Both or Down",
          "type": "number"
        },
        "upper": {
          "format": "double",
          "description": "upper bound\r\n\r\nshould be specified when direction is Both or Up",
          "type": "number"
        },
        "direction": {
          "description": "value filter direction",
          "enum": [
            "Both",
            "Down",
            "Up"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "Direction",
            "modelAsString": true
          }
        },
        "type": {
          "description": "data used to implement value filter",
          "default": "Value",
          "enum": [
            "Value",
            "Mean"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "ValueType",
            "modelAsString": true
          }
        },
        "metricId": {
          "format": "uuid",
          "description": "the other metric unique id used for value filter",
          "type": "string"
        },
        "triggerForMissing": {
          "description": "trigger alert when the corresponding point is missing in the other metric\r\n\r\nshould be specified only when using other metric to filter",
          "type": "boolean"
        }
      }
    },
    "MetricAlertingConfiguration": {
      "required": [
        "anomalyDetectionConfigurationId",
        "anomalyScopeType"
      ],
      "type": "object",
      "properties": {
        "anomalyDetectionConfigurationId": {
          "format": "uuid",
          "description": "Anomaly detection configuration unique id",
          "type": "string",
          "x-ms-client-name": "detectionConfigurationId"
        },
        "anomalyScopeType": {
          "description": "Anomaly scope",
          "enum": [
            "WholeSeries",
            "SeriesGroup",
            "TopN"
          ],
          "type": "string",
          "example": "All",
          "x-ms-enum": {
            "name": "metricAnomalyAlertScopeType",
            "modelAsString": true
          },
          "x-ms-client-name": "alertScope"
        },
        "negationOperation": {
          "description": "Negation operation",
          "default": false,
          "type": "boolean"
        },
        "dimensionAnomalyScope": {
          "$ref": "#/definitions/DimensionGroupIdentity"
        },
        "topNAnomalyScope": {
          "$ref": "#/definitions/TopNGroupScope"
        },
        "severityFilter": {
          "$ref": "#/definitions/SeverityCondition"
        },
        "snoozeFilter": {
          "$ref": "#/definitions/MetricAnomalyAlertSnoozeCondition",
          "x-ms-client-name": "alertSnoozeCondition"
        },
        "valueFilter": {
          "$ref": "#/definitions/ValueCondition"
        }
      },
      "x-ms-client-name": "MetricAlertConfiguration"
    },
    "AnomalyAlertingConfigurationPatch": {
      "type": "object",
      "properties": {
        "name": {
          "description": "Anomaly alerting configuration name",
          "type": "string"
        },
        "description": {
          "description": "anomaly alerting configuration description",
          "default": "",
          "type": "string"
        },
        "crossMetricsOperator": {
          "description": "cross metrics operator",
          "enum": [
            "AND",
            "OR",
            "XOR"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalyAlertingConfigurationLogicType",
            "modelAsString": true
          }
        },
        "splitAlertByDimensions": {
          "description": "dimensions used to split alert",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "hookIds": {
          "description": "hook unique ids",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "format": "uuid",
            "type": "string"
          }
        },
        "metricAlertingConfigurations": {
          "description": "Anomaly alerting configurations",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "$ref": "#/definitions/MetricAlertingConfiguration"
          }
        }
      },
      "example": {
        "name": "alerting configuration name",
        "description": "this is an anomaly alerting configuration",
        "crossMetricsOperator": "AND",
        "hookIds": [
          "00000000-0000-0000-0000-000000000001"
        ],
        "metricAlertingConfigurations": [
          {
            "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
            "anomalyScopeType": "All",
            "negationOperation": false,
            "severityFilter": {
              "minAlertSeverity": "Medium",
              "maxAlertSeverity": "High"
            },
            "snoozeFilter": {
              "autoSnooze": 0,
              "snoozeScope": "Series",
              "onlyForSuccessive": true
            }
          },
          {
            "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000002",
            "anomalyScopeType": "Dimension",
            "negationOperation": false,
            "dimensionAnomalyScope": {
              "dimension": {
                "city": "Beijing"
              }
            },
            "severityFilter": {
              "minAlertSeverity": "Low",
              "maxAlertSeverity": "High"
            },
            "snoozeFilter": {
              "autoSnooze": 0,
              "snoozeScope": "Series",
              "onlyForSuccessive": true
            },
            "valueFilter": {
              "lower": 0,
              "upper": 1000,
              "direction": "Both"
            }
          }
        ]
      }
    },
    "AlertingResultQuery": {
      "required": [
        "endTime",
        "startTime",
        "timeMode"
      ],
      "type": "object",
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "start time",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "end time",
          "type": "string"
        },
        "timeMode": {
          "description": "time mode",
          "enum": [
            "AnomalyTime",
            "CreatedTime",
            "ModifiedTime"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AlertQueryTimeMode",
            "modelAsString": true
          }
        }
      },
      "example": {
        "startTime": "2020-01-01T00:00:00Z",
        "endTime": "2020-02-01T00:00:00Z",
        "timeMode": "AnomalyTime"
      }
    },
    "AlertResultList": {
      "required": [
        "value"
      ],
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/AnomalyAlert"
          }
        }
      }
    },
    "AnomalyProperty": {
      "required": [
        "anomalySeverity"
      ],
      "type": "object",
      "properties": {
        "anomalySeverity": {
          "description": "anomaly severity",
          "enum": [
            "Low",
            "Medium",
            "High"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalySeverity",
            "modelAsString": true
          }
        },
        "anomalyStatus": {
          "description": "anomaly status\r\n\r\nonly return for alerting anomaly result",
          "enum": [
            "Active",
            "Resolved"
          ],
          "type": "string",
          "readOnly": true,
          "x-ms-enum": {
            "name": "AnomalyStatus",
            "modelAsString": true
          }
        },
        "value": {
          "format": "double",
          "description": "value of the anomaly",
          "type": "number",
          "readOnly": true
        },
        "expectedValue": {
          "format": "double",
          "description": "expected value of the anomaly given by smart detector",
          "type": "number",
          "readOnly": true
        }
      }
    },
    "AnomalyResultList": {
      "required": [
        "value"
      ],
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DataPointAnomaly"
          }
        }
      }
    },
    "SeriesIdentity": {
      "required": [
        "dimension"
      ],
      "type": "object",
      "properties": {
        "dimension": {
          "description": "dimension specified for series",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "x-ms-client-name": "seriesKey"
        }
      }
    },
    "IncidentProperty": {
      "required": [
        "maxSeverity"
      ],
      "type": "object",
      "properties": {
        "maxSeverity": {
          "description": "max severity of latest anomalies in the incident",
          "enum": [
            "Low",
            "Medium",
            "High"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalySeverity",
            "modelAsString": true
          }
        },
        "incidentStatus": {
          "description": "incident status\r\n\r\nonly return for alerting incident result",
          "enum": [
            "Active",
            "Resolved"
          ],
          "type": "string",
          "readOnly": true,
          "x-ms-enum": {
            "name": "AnomalyIncidentStatus",
            "modelAsString": true
          }
        },
        "valueOfRootNode": {
          "format": "double",
          "description": "value of the root node",
          "type": "number",
          "readOnly": true
        },
        "expectedValueOfRootNode": {
          "format": "double",
          "description": "expected value of the root node given by smart detector",
          "type": "number",
          "readOnly": true
        }
      }
    },
    "IncidentResultList": {
      "required": [
        "value"
      ],
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/AnomalyIncident"
          }
        }
      }
    },
    "SuppressCondition": {
      "required": [],
      "type": "object",
      "properties": {
        "minNumber": {
          "format": "int32",
          "description": "min point number, value range : [1, +)",
          "type": "integer"
        },
        "minRatio": {
          "format": "double",
          "description": "min point ratio, value range : (0, 100]",
          "type": "number"
        }
      }
    },
    "SmartDetectionCondition": {
      "required": [],
      "type": "object",
      "properties": {
        "sensitivity": {
          "format": "double",
          "description": "sensitivity, value range : (0, 100]",
          "type": "number"
        },
        "anomalyDetectorDirection": {
          "description": "detection direction",
          "enum": [
            "Both",
            "Down",
            "Up"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalyDetectorDirection",
            "modelAsString": true
          }
        },
        "suppressCondition": {
          "$ref": "#/definitions/SuppressCondition"
        }
      }
    },
    "HardThresholdCondition": {
      "required": [],
      "type": "object",
      "properties": {
        "lowerBound": {
          "format": "double",
          "description": "lower bound\r\n\r\nshould be specified when anomalyDetectorDirection is Both or Down",
          "type": "number"
        },
        "upperBound": {
          "format": "double",
          "description": "upper bound\r\n\r\nshould be specified when anomalyDetectorDirection is Both or Up",
          "type": "number"
        },
        "anomalyDetectorDirection": {
          "description": "detection direction",
          "enum": [
            "Both",
            "Down",
            "Up"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalyDetectorDirection",
            "modelAsString": true
          }
        },
        "suppressCondition": {
          "$ref": "#/definitions/SuppressCondition"
        }
      }
    },
    "ChangeThresholdCondition": {
      "required": [],
      "type": "object",
      "properties": {
        "changePercentage": {
          "format": "double",
          "description": "change percentage, value range : [0, +)",
          "type": "number"
        },
        "shiftPoint": {
          "format": "int32",
          "description": "shift point, value range : [1, +)",
          "type": "integer"
        },
        "withinRange": {
          "description": "if the withinRange = true, detected data is abnormal when the value falls in the range, in this case anomalyDetectorDirection must be Both\r\nif the withinRange = false, detected data is abnormal when the value falls out of the range",
          "type": "boolean"
        },
        "anomalyDetectorDirection": {
          "description": "detection direction",
          "enum": [
            "Both",
            "Down",
            "Up"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalyDetectorDirection",
            "modelAsString": true
          }
        },
        "suppressCondition": {
          "$ref": "#/definitions/SuppressCondition"
        }
      }
    },
    "AnomalyDetectionConfiguration": {
      "required": [
        "metricId",
        "name",
        "wholeMetricConfiguration"
      ],
      "type": "object",
      "properties": {
        "anomalyDetectionConfigurationId": {
          "format": "uuid",
          "description": "anomaly detection configuration unique id",
          "type": "string",
          "readOnly": true,
          "x-ms-client-name": "id"
        },
        "name": {
          "description": "anomaly detection configuration name",
          "type": "string"
        },
        "description": {
          "description": "anomaly detection configuration description",
          "default": "",
          "type": "string"
        },
        "metricId": {
          "format": "uuid",
          "description": "metric unique id",
          "type": "string"
        },
        "wholeMetricConfiguration": {
          "$ref": "#/definitions/MetricDetectionCondition",
          "x-ms-client-name": "wholeSeriesDetectionCondition"
        },
        "dimensionGroupOverrideConfigurations": {
          "description": "detection configuration for series group",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "$ref": "#/definitions/MetricSeriesGroupDetectionCondition"
          },
          "x-ms-client-name": "seriesGroupDetectionConditions"
        },
        "seriesOverrideConfigurations": {
          "description": "detection configuration for specific series",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "$ref": "#/definitions/MetricSingleSeriesDetectionCondition"
          },
          "x-ms-client-name": "seriesDetectionConditions"
        }
      },
      "example": {
        "name": "Anomaly detection configuration name",
        "description": "Anomaly detection configuration description",
        "metricId": "22222222-2222-2222-2222-000000000001",
        "wholeMetricConfiguration": {
          "conditionOperator": "AND",
          "smartDetectionCondition": {
            "sensitivity": 91,
            "anomalyDetectorDirection": "Both",
            "suppressCondition": {
              "minNumber": 1,
              "minRatio": 100
            }
          },
          "hardThresholdCondition": {
            "lowerBound": 1,
            "upperBound": 100,
            "anomalyDetectorDirection": "Both",
            "suppressCondition": {
              "minNumber": 1,
              "minRatio": 100
            }
          },
          "changeThresholdCondition": {
            "changePercentage": 5,
            "shiftPoint": 1,
            "withinRange": false,
            "anomalyDetectorDirection": "Both",
            "suppressCondition": {
              "minNumber": 1,
              "minRatio": 100
            }
          }
        },
        "dimensionGroupOverrideConfigurations": [
          {
            "group": {
              "dimension": {
                "city": "Beijing"
              }
            },
            "conditionOperator": "AND",
            "smartDetectionCondition": {
              "sensitivity": 91,
              "anomalyDetectorDirection": "Both",
              "suppressCondition": {
                "minNumber": 1,
                "minRatio": 100
              }
            },
            "hardThresholdCondition": {
              "lowerBound": 1,
              "upperBound": 100,
              "anomalyDetectorDirection": "Both",
              "suppressCondition": {
                "minNumber": 1,
                "minRatio": 100
              }
            },
            "changeThresholdCondition": {
              "changePercentage": 5,
              "shiftPoint": 1,
              "withinRange": false,
              "anomalyDetectorDirection": "Both",
              "suppressCondition": {
                "minNumber": 1,
                "minRatio": 100
              }
            }
          }
        ],
        "seriesOverrideConfigurations": [
          {
            "series": {
              "dimension": {
                "category": "Jewelry",
                "city": "Beijing"
              }
            },
            "conditionOperator": "AND",
            "smartDetectionCondition": {
              "sensitivity": 91,
              "anomalyDetectorDirection": "Both",
              "suppressCondition": {
                "minNumber": 1,
                "minRatio": 100
              }
            },
            "hardThresholdCondition": {
              "lowerBound": 1,
              "upperBound": 100,
              "anomalyDetectorDirection": "Both",
              "suppressCondition": {
                "minNumber": 1,
                "minRatio": 100
              }
            },
            "changeThresholdCondition": {
              "changePercentage": 5,
              "shiftPoint": 1,
              "withinRange": false,
              "anomalyDetectorDirection": "Both",
              "suppressCondition": {
                "minNumber": 1,
                "minRatio": 100
              }
            }
          }
        ]
      }
    },
    "AnomalyAlertingConfigurationList": {
      "type": "object",
      "properties": {
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/AnomalyAlertConfiguration"
          },
          "readOnly": true
        },
        "@nextLink": {
          "type": "string",
          "readOnly": true
        }
      }
    },
    "DetectionSeriesQuery": {
      "required": [
        "endTime",
        "series",
        "startTime"
      ],
      "type": "object",
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "This is inclusive. The maximum number of data points (series number * time range) is 10000.",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "This is exclusive. The maximum number of data points (series number * time range) is 10000.",
          "type": "string"
        },
        "series": {
          "description": "The series to be queried. The identity must be able to define one single time series instead of a group of time series. The maximum number of series is 100.",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "$ref": "#/definitions/SeriesIdentity"
          }
        }
      },
      "example": {
        "startTime": "2020-01-01T00:00:00Z",
        "endTime": "2020-02-01T00:00:00Z",
        "series": [
          {
            "dimension": {
              "category": "Jewelry",
              "city": "Beijing"
            }
          }
        ]
      }
    },
    "SeriesResultList": {
      "required": [
        "value"
      ],
      "type": "object",
      "properties": {
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MetricEnrichedSeriesData"
          }
        }
      }
    },
    "SeverityFilterCondition": {
      "required": [
        "max",
        "min"
      ],
      "type": "object",
      "properties": {
        "min": {
          "description": "min severity",
          "enum": [
            "Low",
            "Medium",
            "High"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalySeverity",
            "modelAsString": true
          }
        },
        "max": {
          "description": "max severity",
          "enum": [
            "Low",
            "Medium",
            "High"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalySeverity",
            "modelAsString": true
          }
        }
      }
    },
    "DetectionAnomalyFilterCondition": {
      "type": "object",
      "properties": {
        "dimensionFilter": {
          "description": "dimension filter",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "$ref": "#/definitions/DimensionGroupIdentity"
          }
        },
        "severityFilter": {
          "$ref": "#/definitions/SeverityFilterCondition"
        }
      }
    },
    "DetectionAnomalyResultQuery": {
      "required": [
        "endTime",
        "startTime"
      ],
      "type": "object",
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "start time",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "end time",
          "type": "string"
        },
        "filter": {
          "$ref": "#/definitions/DetectionAnomalyFilterCondition"
        }
      },
      "example": {
        "startTime": "2020-01-01T00:00:00Z",
        "endTime": "2020-02-01T00:00:00Z",
        "filter": {
          "dimensionFilter": [
            {
              "dimension": {
                "city": "Beijing"
              }
            }
          ],
          "severityFilter": {
            "min": "Low",
            "max": "High"
          }
        }
      }
    },
    "AnomalyDimensionQuery": {
      "required": [
        "dimensionName",
        "endTime",
        "startTime"
      ],
      "type": "object",
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "start time",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "end time",
          "type": "string"
        },
        "dimensionName": {
          "description": "dimension to query",
          "type": "string"
        },
        "dimensionFilter": {
          "$ref": "#/definitions/DimensionGroupIdentity"
        }
      },
      "example": {
        "startTime": "2020-01-01T00:00:00Z",
        "endTime": "2020-02-01T00:00:00Z",
        "dimensionName": "category",
        "dimensionFilter": {
          "dimension": {
            "city": "Beijing"
          }
        }
      }
    },
    "AnomalyDimensionList": {
      "required": [
        "value"
      ],
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "DetectionIncidentFilterCondition": {
      "type": "object",
      "properties": {
        "dimensionFilter": {
          "description": "dimension filter",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "$ref": "#/definitions/DimensionGroupIdentity"
          }
        }
      }
    },
    "DetectionIncidentResultQuery": {
      "required": [
        "endTime",
        "startTime"
      ],
      "type": "object",
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "start time",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "end time",
          "type": "string"
        },
        "filter": {
          "$ref": "#/definitions/DetectionIncidentFilterCondition"
        }
      },
      "example": {
        "startTime": "2020-01-01T00:00:00Z",
        "endTime": "2020-02-01T00:00:00Z",
        "filter": {
          "dimensionFilter": [
            {
              "dimension": {
                "city": "Beijing"
              }
            }
          ]
        }
      }
    },
    "RootCauseList": {
      "required": [
        "value"
      ],
      "type": "object",
      "properties": {
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/IncidentRootCause"
          }
        }
      }
    },
    "AzureSQLConnectionStringParam": {
      "type": "object",
      "properties": {
        "connectionString": {
          "description": "The connection string to access the Azure SQL.",
          "type": "string"
        }
      }
    },
    "DataSourceCredential": {
      "required": [
        "dataSourceCredentialName",
        "dataSourceCredentialType"
      ],
      "type": "object",
      "properties": {
        "dataSourceCredentialType": {
          "description": "Type of data source credential",
          "enum": [
            "AzureSQLConnectionString",
            "DataLakeGen2SharedKey",
            "ServicePrincipal",
            "ServicePrincipalInKV"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DatasourceCredentialType",
            "modelAsString": true
          }
        },
        "dataSourceCredentialId": {
          "format": "uuid",
          "description": "Unique id of data source credential",
          "type": "string",
          "readOnly": true
        },
        "dataSourceCredentialName": {
          "description": "Name of data source credential",
          "type": "string"
        },
        "dataSourceCredentialDescription": {
          "description": "Description of data source credential",
          "type": "string"
        }
      },
      "discriminator": "dataSourceCredentialType",
      "example": {
        "parameters": {
          "clientId": "88888888-8888-8888-8888-888888888888",
          "clientSecret": "fake-client-secret",
          "tenantId": "12345678-1234-1234-1234-123456788888"
        },
        "dataSourceCredentialName": "A data source credential",
        "dataSourceCredentialDescription": "This is a data source credential",
        "dataSourceCredentialType": "ServicePrincipal"
      }
    },
    "DataLakeGen2SharedKeyParam": {
      "type": "object",
      "properties": {
        "accountKey": {
          "description": "The account key to access the Azure Data Lake Storage Gen2.",
          "type": "string"
        }
      }
    },
    "ServicePrincipalParam": {
      "required": [
        "clientId",
        "tenantId"
      ],
      "type": "object",
      "properties": {
        "clientId": {
          "description": "The client id of the service principal.",
          "type": "string"
        },
        "clientSecret": {
          "description": "The client secret of the service principal.",
          "type": "string"
        },
        "tenantId": {
          "description": "The tenant id of the service principal.",
          "type": "string"
        }
      }
    },
    "ServicePrincipalInKVParam": {
      "required": [
        "keyVaultClientId",
        "keyVaultEndpoint",
        "servicePrincipalIdNameInKV",
        "servicePrincipalSecretNameInKV",
        "tenantId"
      ],
      "type": "object",
      "properties": {
        "keyVaultEndpoint": {
          "description": "The Key Vault endpoint that storing the service principal.",
          "type": "string"
        },
        "keyVaultClientId": {
          "description": "The Client Id to access the Key Vault.",
          "type": "string"
        },
        "keyVaultClientSecret": {
          "description": "The Client Secret to access the Key Vault.",
          "type": "string"
        },
        "servicePrincipalIdNameInKV": {
          "description": "The secret name of the service principal's client Id in the Key Vault.",
          "type": "string"
        },
        "servicePrincipalSecretNameInKV": {
          "description": "The secret name of the service principal's client secret in the Key Vault.",
          "type": "string"
        },
        "tenantId": {
          "description": "The tenant id of your service principal.",
          "type": "string"
        }
      }
    },
    "DataSourceCredentialList": {
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "uniqueItems": true,
          "type": "array",
          "items": {
            "$ref": "#/definitions/DataSourceCredential"
          },
          "readOnly": true
        }
      }
    },
    "AzureSQLConnectionStringParamPatch": {
      "type": "object",
      "properties": {
        "connectionString": {
          "description": "The connection string to access the Azure SQL.",
          "type": "string"
        }
      }
    },
    "DataSourceCredentialPatch": {
      "required": [
        "dataSourceCredentialType"
      ],
      "type": "object",
      "properties": {
        "dataSourceCredentialType": {
          "description": "Type of data source credential",
          "enum": [
            "AzureSQLConnectionString",
            "DataLakeGen2SharedKey",
            "ServicePrincipal",
            "ServicePrincipalInKV"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DatasourceCredentialType",
            "modelAsString": true
          }
        },
        "dataSourceCredentialName": {
          "description": "Name of data source credential",
          "type": "string"
        },
        "dataSourceCredentialDescription": {
          "description": "Description of data source credential",
          "type": "string"
        }
      },
      "discriminator": "dataSourceCredentialType",
      "example": {
        "dataSourceCredentialDescription": "This is a data source credential"
      }
    },
    "AzureSQLConnectionStringCredentialPatch": {
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/DataSourceCredentialPatch"
        }
      ],
      "properties": {
        "parameters": {
          "$ref": "#/definitions/AzureSQLConnectionStringParamPatch"
        }
      },
      "x-ms-discriminator-value": "AzureSQLConnectionString"
    },
    "DataLakeGen2SharedKeyParamPatch": {
      "type": "object",
      "properties": {
        "accountKey": {
          "description": "The account key to access the Azure Data Lake Storage Gen2.",
          "type": "string"
        }
      }
    },
    "DataLakeGen2SharedKeyCredentialPatch": {
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/DataSourceCredentialPatch"
        }
      ],
      "properties": {
        "parameters": {
          "$ref": "#/definitions/DataLakeGen2SharedKeyParamPatch"
        }
      },
      "x-ms-discriminator-value": "DataLakeGen2SharedKey"
    },
    "ServicePrincipalParamPatch": {
      "type": "object",
      "properties": {
        "clientId": {
          "description": "The client id of the service principal.",
          "type": "string"
        },
        "clientSecret": {
          "description": "The client secret of the service principal.",
          "type": "string"
        },
        "tenantId": {
          "description": "The tenant id of the service principal.",
          "type": "string"
        }
      }
    },
    "ServicePrincipalCredentialPatch": {
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/DataSourceCredentialPatch"
        }
      ],
      "properties": {
        "parameters": {
          "$ref": "#/definitions/ServicePrincipalParamPatch"
        }
      },
      "x-ms-discriminator-value": "ServicePrincipal"
    },
    "ServicePrincipalInKVParamPatch": {
      "type": "object",
      "properties": {
        "keyVaultEndpoint": {
          "description": "The Key Vault endpoint that storing the service principal.",
          "type": "string"
        },
        "keyVaultClientId": {
          "description": "The Client Id to access the Key Vault.",
          "type": "string"
        },
        "keyVaultClientSecret": {
          "description": "The Client Secret to access the Key Vault.",
          "type": "string"
        },
        "servicePrincipalIdNameInKV": {
          "description": "The secret name of the service principal's client Id in the Key Vault.",
          "type": "string"
        },
        "servicePrincipalSecretNameInKV": {
          "description": "The secret name of the service principal's client secret in the Key Vault.",
          "type": "string"
        },
        "tenantId": {
          "description": "The tenant id of your service principal.",
          "type": "string"
        }
      }
    },
    "ServicePrincipalInKVCredentialPatch": {
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/DataSourceCredentialPatch"
        }
      ],
      "properties": {
        "parameters": {
          "$ref": "#/definitions/ServicePrincipalInKVParamPatch"
        }
      },
      "x-ms-discriminator-value": "ServicePrincipalInKV"
    },
    "DataFeedList": {
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DataFeed"
          },
          "readOnly": true
        }
      }
    },
    "DataFeedDetailPatch": {
      "required": [
        "dataSourceType"
      ],
      "type": "object",
      "properties": {
        "dataSourceType": {
          "description": "data source type",
          "enum": [
            "AzureApplicationInsights",
            "AzureBlob",
            "AzureCosmosDB",
            "AzureDataExplorer",
            "AzureDataLakeStorageGen2",
            "AzureEventHubs",
            "AzureLogAnalytics",
            "AzureTable",
            "InfluxDB",
            "MongoDB",
            "MySql",
            "PostgreSql",
            "SqlServer"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DatasourceType",
            "modelAsString": true
          }
        },
        "dataFeedName": {
          "description": "data feed name",
          "type": "string"
        },
        "dataFeedDescription": {
          "description": "data feed description",
          "type": "string"
        },
        "timestampColumn": {
          "description": "user-defined timestamp column. if timestampColumn is null, start time of every time slice will be used as default value.",
          "type": "string"
        },
        "dataStartFrom": {
          "format": "date-time",
          "description": "ingestion start time",
          "type": "string"
        },
        "startOffsetInSeconds": {
          "format": "int64",
          "description": "the time that the beginning of data ingestion task will delay for every data slice according to this offset.",
          "type": "integer"
        },
        "maxConcurrency": {
          "format": "int32",
          "description": "the max concurrency of data ingestion queries against user data source. 0 means no limitation.",
          "type": "integer"
        },
        "minRetryIntervalInSeconds": {
          "format": "int64",
          "description": "the min retry interval for failed data ingestion tasks.",
          "type": "integer"
        },
        "stopRetryAfterInSeconds": {
          "format": "int64",
          "description": "stop retry data ingestion after the data slice first schedule time in seconds.",
          "type": "integer"
        },
        "needRollup": {
          "description": "mark if the data feed need rollup",
          "enum": [
            "NoRollup",
            "NeedRollup",
            "AlreadyRollup"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "NeedRollupEnum",
            "modelAsString": true
          }
        },
        "rollUpMethod": {
          "description": "roll up method",
          "enum": [
            "None",
            "Sum",
            "Max",
            "Min",
            "Avg",
            "Count"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DataFeedAutoRollupMethod",
            "modelAsString": true
          }
        },
        "rollUpColumns": {
          "description": "roll up columns",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "allUpIdentification": {
          "description": "the identification value for the row of calculated all-up value.",
          "type": "string"
        },
        "fillMissingPointType": {
          "description": "the type of fill missing point for anomaly detection",
          "enum": [
            "SmartFilling",
            "PreviousValue",
            "CustomValue",
            "NoFilling"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DatasourceMissingDataPointFillType",
            "modelAsString": true
          }
        },
        "fillMissingPointValue": {
          "format": "double",
          "description": "the value of fill missing point for anomaly detection",
          "type": "number"
        },
        "viewMode": {
          "description": "data feed access mode, default is Private",
          "enum": [
            "Private",
            "Public"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DataFeedAccessMode",
            "modelAsString": true
          }
        },
        "admins": {
          "description": "data feed administrator",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "viewers": {
          "description": "data feed viewer",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "status": {
          "description": "data feed status",
          "enum": [
            "Active",
            "Paused"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DataFeedStatus",
            "modelAsString": true
          }
        },
        "actionLinkTemplate": {
          "description": "action link for alert",
          "type": "string"
        },
        "authenticationType": {
          "description": "authentication type for corresponding data source",
          "enum": [
            "Basic",
            "ManagedIdentity",
            "AzureSQLConnectionString",
            "DataLakeGen2SharedKey",
            "ServicePrincipal",
            "ServicePrincipalInKV"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DatasourceAuthenticationType",
            "modelAsString": true
          }
        },
        "credentialId": {
          "description": "The credential entity id",
          "type": "string"
        }
      },
      "discriminator": "dataSourceType"
    },
    "AnomalyFeedbackValue": {
      "required": [
        "anomalyValue"
      ],
      "type": "object",
      "properties": {
        "anomalyValue": {
          "enum": [
            "AutoDetect",
            "Anomaly",
            "NotAnomaly"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalyValue",
            "modelAsString": true
          }
        }
      }
    },
    "FeedbackDimensionFilter": {
      "required": [
        "dimension"
      ],
      "type": "object",
      "properties": {
        "dimension": {
          "description": "metric dimension filter",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    },
    "MetricFeedback": {
      "required": [
        "dimensionFilter",
        "feedbackType",
        "metricId"
      ],
      "type": "object",
      "properties": {
        "feedbackType": {
          "description": "feedback type",
          "enum": [
            "Anomaly",
            "ChangePoint",
            "Period",
            "Comment"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "FeedbackType",
            "modelAsString": true
          }
        },
        "feedbackId": {
          "format": "uuid",
          "description": "feedback unique id",
          "type": "string",
          "readOnly": true
        },
        "createdTime": {
          "format": "date-time",
          "description": "feedback created time",
          "type": "string",
          "readOnly": true
        },
        "userPrincipal": {
          "description": "user who gives this feedback",
          "type": "string",
          "readOnly": true
        },
        "metricId": {
          "format": "uuid",
          "description": "metric unique id",
          "type": "string"
        },
        "dimensionFilter": {
          "$ref": "#/definitions/FeedbackDimensionFilter"
        }
      },
      "discriminator": "feedbackType"
    },
    "AnomalyFeedback": {
      "required": [
        "endTime",
        "startTime",
        "value"
      ],
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/MetricFeedback"
        }
      ],
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "the start timestamp of feedback time range",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "the end timestamp of feedback time range, when equals to startTime means only one timestamp",
          "type": "string"
        },
        "value": {
          "$ref": "#/definitions/AnomalyFeedbackValue"
        },
        "anomalyDetectionConfigurationId": {
          "format": "uuid",
          "description": "the corresponding anomaly detection configuration of this feedback",
          "type": "string"
        },
        "anomalyDetectionConfigurationSnapshot": {
          "$ref": "#/definitions/AnomalyDetectionConfiguration"
        }
      },
      "example": {
        "startTime": "2020-01-01T00:00:00Z",
        "endTime": "2020-01-01T00:00:00Z",
        "value": {
          "anomalyValue": "NotAnomaly"
        },
        "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
        "metricId": "22222222-2222-2222-2222-000000000001",
        "dimensionFilter": {
          "dimension": {
            "city": "Beijing"
          }
        },
        "feedbackType": "Anomaly"
      },
      "x-ms-discriminator-value": "Anomaly"
    },
    "ChangePointFeedbackValue": {
      "required": [
        "changePointValue"
      ],
      "type": "object",
      "properties": {
        "changePointValue": {
          "enum": [
            "AutoDetect",
            "ChangePoint",
            "NotChangePoint"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "ChangePointValue",
            "modelAsString": true
          }
        }
      }
    },
    "ChangePointFeedback": {
      "required": [
        "endTime",
        "startTime",
        "value"
      ],
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/MetricFeedback"
        }
      ],
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "the start timestamp of feedback time range",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "the end timestamp of feedback time range, when equals to startTime means only one timestamp",
          "type": "string"
        },
        "value": {
          "$ref": "#/definitions/ChangePointFeedbackValue"
        }
      },
      "x-ms-discriminator-value": "ChangePoint"
    },
    "CommentFeedbackValue": {
      "required": [
        "commentValue"
      ],
      "type": "object",
      "properties": {
        "commentValue": {
          "description": "the comment string",
          "type": "string"
        }
      }
    },
    "CommentFeedback": {
      "required": [
        "value"
      ],
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/MetricFeedback"
        }
      ],
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "the start timestamp of feedback time range",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "the end timestamp of feedback time range, when equals to startTime means only one timestamp",
          "type": "string"
        },
        "value": {
          "$ref": "#/definitions/CommentFeedbackValue"
        }
      },
      "x-ms-discriminator-value": "Comment"
    },
    "PeriodFeedbackValue": {
      "required": [
        "periodType",
        "periodValue"
      ],
      "type": "object",
      "properties": {
        "periodType": {
          "description": "the type of setting period",
          "enum": [
            "AutoDetect",
            "AssignValue"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "PeriodType",
            "modelAsString": true
          }
        },
        "periodValue": {
          "format": "int32",
          "description": "the number of intervals a period contains, when no period set to 0",
          "default": 0,
          "type": "integer"
        }
      }
    },
    "PeriodFeedback": {
      "required": [
        "value"
      ],
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/MetricFeedback"
        }
      ],
      "properties": {
        "value": {
          "$ref": "#/definitions/PeriodFeedbackValue"
        }
      },
      "x-ms-discriminator-value": "Period"
    },
    "MetricFeedbackFilter": {
      "required": [
        "metricId"
      ],
      "type": "object",
      "properties": {
        "metricId": {
          "format": "uuid",
          "description": "filter feedbacks by metric id",
          "type": "string"
        },
        "dimensionFilter": {
          "$ref": "#/definitions/FeedbackDimensionFilter"
        },
        "feedbackType": {
          "description": "filter feedbacks by type",
          "enum": [
            "Anomaly",
            "ChangePoint",
            "Period",
            "Comment"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "FeedbackType",
            "modelAsString": true
          }
        },
        "startTime": {
          "format": "date-time",
          "description": "start time filter under chosen time mode",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "end time filter under chosen time mode",
          "type": "string"
        },
        "timeMode": {
          "description": "time mode to filter feedback",
          "enum": [
            "MetricTimestamp",
            "FeedbackCreatedTime"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "FeedbackQueryTimeMode",
            "modelAsString": true
          }
        }
      },
      "example": {
        "metricId": "22222222-2222-2222-2222-000000000001",
        "feedbackType": "Anomaly",
        "startTime": "2020-01-01T00:00:00Z",
        "endTime": "2020-01-01T00:00:00Z",
        "timeMode": "MetricTimestamp"
      }
    },
    "MetricFeedbackList": {
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MetricFeedback"
          },
          "readOnly": true
        }
      }
    },
    "EmailHookParameter": {
      "required": [],
      "type": "object",
      "properties": {
        "toList": {
          "description": "Email TO: list.",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          },
          "x-ms-client-name": "emailsToAlert"
        }
      }
    },
    "WebhookHookParameter": {
      "required": [],
      "type": "object",
      "properties": {
        "endpoint": {
          "description": "API address, will be called when alert is triggered, only support POST method via SSL",
          "type": "string"
        },
        "username": {
          "description": "(Deprecated) The username, if using basic authentication",
          "type": "string"
        },
        "password": {
          "description": "(Deprecated) The password, if using basic authentication",
          "type": "string"
        },
        "certificateKey": {
          "description": "The certificate key/URL, if using client certificate, please read documents for more informations.",
          "type": "string"
        },
        "certificatePassword": {
          "description": "The certificate password, if using client certificate, please read documents for more informations.",
          "type": "string"
        }
      }
    },
    "HookList": {
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "uniqueItems": true,
          "type": "array",
          "items": {
            "$ref": "#/definitions/NotificationHook"
          },
          "readOnly": true
        }
      }
    },
    "EmailHookParameterPatch": {
      "type": "object",
      "properties": {
        "toList": {
          "description": "Email TO: list.",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "WebhookHookParameterPatch": {
      "type": "object",
      "properties": {
        "endpoint": {
          "description": "API address, will be called when alert is triggered, only support POST method via SSL",
          "type": "string"
        },
        "username": {
          "description": "(Deprecated) The username, if using basic authentication",
          "type": "string"
        },
        "password": {
          "description": "(Deprecated) The password, if using basic authentication",
          "type": "string"
        },
        "headers": {
          "description": "custom headers in api call",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "certificateKey": {
          "description": "The certificate key, if using client certificate",
          "type": "string"
        },
        "certificatePassword": {
          "description": "The certificate password, if using client certificate",
          "type": "string"
        }
      }
    },
    "IngestionStatusQueryOptions": {
      "required": [
        "endTime",
        "startTime"
      ],
      "type": "object",
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "the start point of time range to query data ingestion status.",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "the end point of time range to query data ingestion status.",
          "type": "string"
        }
      },
      "example": {
        "startTime": "2020-01-01T00:00:00Z",
        "endTime": "2020-02-01T00:00:00Z"
      }
    },
    "IngestionStatusList": {
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DataFeedIngestionStatus"
          },
          "readOnly": true
        }
      }
    },
    "IngestionProgressResetOptions": {
      "required": [
        "endTime",
        "startTime"
      ],
      "type": "object",
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "the start point of time range to reset data ingestion status.",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "the end point of time range to reset data ingestion status.",
          "type": "string"
        }
      },
      "example": {
        "startTime": "2020-01-01T00:00:00Z",
        "endTime": "2020-02-01T00:00:00Z"
      }
    },
    "DataFeedIngestionProgress": {
      "type": "object",
      "properties": {
        "latestSuccessTimestamp": {
          "format": "date-time",
          "description": "the timestamp of latest success ingestion job.\r\nnull indicates not available",
          "type": "string",
          "readOnly": true
        },
        "latestActiveTimestamp": {
          "format": "date-time",
          "description": "the timestamp of latest ingestion job with status update.\r\nnull indicates not available",
          "type": "string",
          "readOnly": true
        }
      }
    },
    "MetricDataQueryOptions": {
      "required": [
        "endTime",
        "series",
        "startTime"
      ],
      "type": "object",
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "start time of query a time series data, and format should be yyyy-MM-ddThh:mm:ssZ. The maximum number of data points (series number * time range) is 10000.",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "start time of query a time series data, and format should be yyyy-MM-ddThh:mm:ssZ. The maximum number of data points (series number * time range) is 10000.",
          "type": "string"
        },
        "series": {
          "description": "query specific series. The maximum number of series is 100.",
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          }
        }
      },
      "example": {
        "startTime": "2020-01-01T00:00:00Z",
        "endTime": "2020-02-01T00:00:00Z",
        "series": [
          {
            "category": "__SUM__",
            "city": "Beijing"
          }
        ]
      }
    },
    "MetricDataItem": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "#/definitions/MetricSeriesDefinition"
        },
        "timestampList": {
          "description": "timestamps of the data related to this time series",
          "type": "array",
          "items": {
            "format": "date-time",
            "type": "string"
          },
          "readOnly": true
        },
        "valueList": {
          "description": "values of the data related to this time series",
          "type": "array",
          "items": {
            "format": "double",
            "type": "number"
          },
          "readOnly": true
        }
      }
    },
    "MetricDataList": {
      "type": "object",
      "properties": {
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MetricDataItem"
          },
          "readOnly": true
        }
      }
    },
    "MetricSeriesQueryOptions": {
      "required": [
        "activeSince"
      ],
      "type": "object",
      "properties": {
        "activeSince": {
          "format": "date-time",
          "description": "query series ingested after this time, the format should be yyyy-MM-ddTHH:mm:ssZ",
          "type": "string"
        },
        "dimensionFilter": {
          "description": "filter specific dimension name and values",
          "type": "object",
          "additionalProperties": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "example": {
        "activeSince": "2020-01-01T00:00:00Z",
        "dimensionFilter": {
          "city": [
            "Beijing"
          ]
        }
      }
    },
    "MetricSeriesList": {
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MetricSeriesDefinition"
          },
          "readOnly": true
        }
      }
    },
    "MetricDimensionQueryOptions": {
      "required": [
        "dimensionName"
      ],
      "type": "object",
      "properties": {
        "dimensionName": {
          "description": "dimension name",
          "type": "string"
        },
        "dimensionValueFilter": {
          "description": "dimension value to be filtered",
          "type": "string"
        }
      },
      "example": {
        "dimensionName": "city"
      }
    },
    "MetricDimensionList": {
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          },
          "readOnly": true
        }
      }
    },
    "AnomalyDetectionConfigurationList": {
      "type": "object",
      "properties": {
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/AnomalyDetectionConfiguration"
          },
          "readOnly": true
        },
        "@nextLink": {
          "type": "string",
          "readOnly": true
        }
      }
    },
    "EnrichmentStatusQueryOption": {
      "required": [
        "endTime",
        "startTime"
      ],
      "type": "object",
      "properties": {
        "startTime": {
          "format": "date-time",
          "description": "the start point of time range to query anomaly detection status.",
          "type": "string"
        },
        "endTime": {
          "format": "date-time",
          "description": "the end point of time range to query anomaly detection status.",
          "type": "string"
        }
      },
      "example": {
        "startTime": "2020-01-01T00:00:00Z",
        "endTime": "2020-02-01T00:00:00Z"
      }
    },
    "EnrichmentStatus": {
      "type": "object",
      "properties": {
        "timestamp": {
          "format": "date-time",
          "description": "data slice timestamp.",
          "type": "string",
          "readOnly": true
        },
        "status": {
          "description": "latest enrichment status for this data slice.",
          "type": "string",
          "readOnly": true
        },
        "message": {
          "description": "the trimmed message describes details of the enrichment status.",
          "type": "string",
          "readOnly": true
        }
      }
    },
    "EnrichmentStatusList": {
      "type": "object",
      "properties": {
        "@nextLink": {
          "type": "string",
          "readOnly": true
        },
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/EnrichmentStatus"
          },
          "readOnly": true
        }
      }
    },
    "MetricSeriesDefinition": {
      "type": "object",
      "properties": {
        "metricId": {
          "format": "uuid",
          "description": "metric unique id",
          "type": "string",
          "readOnly": true
        },
        "dimension": {
          "description": "dimension name and value pair",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "readOnly": true
        }
      }
    },
    "DataFeedIngestionStatus": {
      "type": "object",
      "properties": {
        "timestamp": {
          "format": "date-time",
          "description": "data slice timestamp.",
          "type": "string",
          "readOnly": true
        },
        "status": {
          "description": "latest ingestion task status for this data slice.",
          "enum": [
            "NotStarted",
            "Scheduled",
            "Running",
            "Succeeded",
            "Failed",
            "NoData",
            "Error",
            "Paused"
          ],
          "type": "string",
          "readOnly": true,
          "x-ms-enum": {
            "name": "IngestionStatusType",
            "modelAsString": true
          }
        },
        "message": {
          "description": "the trimmed message of last ingestion job.",
          "type": "string",
          "readOnly": true
        }
      }
    },
    "MetricAnomalyAlertSnoozeCondition": {
      "required": [
        "autoSnooze",
        "onlyForSuccessive",
        "snoozeScope"
      ],
      "type": "object",
      "properties": {
        "autoSnooze": {
          "format": "int32",
          "description": "snooze point count, value range : [0, +)",
          "type": "integer"
        },
        "snoozeScope": {
          "description": "snooze scope",
          "enum": [
            "Metric",
            "Series"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "SnoozeScope",
            "modelAsString": true
          }
        },
        "onlyForSuccessive": {
          "description": "only snooze for successive anomalies",
          "type": "boolean"
        }
      }
    },
    "AnomalyAlertConfiguration": {
      "required": [
        "hookIds",
        "metricAlertingConfigurations",
        "name"
      ],
      "type": "object",
      "properties": {
        "anomalyAlertingConfigurationId": {
          "format": "uuid",
          "description": "anomaly alerting configuration unique id",
          "type": "string",
          "readOnly": true,
          "x-ms-client-name": "id"
        },
        "name": {
          "description": "anomaly alerting configuration name",
          "type": "string"
        },
        "description": {
          "description": "anomaly alerting configuration description",
          "default": "",
          "type": "string"
        },
        "crossMetricsOperator": {
          "description": "cross metrics operator\r\n\r\nshould be specified when setting up multiple metric alerting configurations",
          "enum": [
            "AND",
            "OR",
            "XOR"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalyAlertingConfigurationLogicType",
            "modelAsString": true
          }
        },
        "splitAlertByDimensions": {
          "description": "dimensions used to split alert",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          },
          "x-ms-client-name": "dimensionsToSplitAlert"
        },
        "hookIds": {
          "description": "hook unique ids",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "format": "uuid",
            "type": "string"
          }
        },
        "metricAlertingConfigurations": {
          "description": "Anomaly alerting configurations",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "$ref": "#/definitions/MetricAlertingConfiguration"
          },
          "x-ms-client-name": "metricAlertConfigurations"
        }
      },
      "example": {
        "name": "alerting configuration name",
        "crossMetricsOperator": "AND",
        "hookIds": [
          "00000000-0000-0000-0000-000000000001"
        ],
        "metricAlertingConfigurations": [
          {
            "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000001",
            "anomalyScopeType": "All",
            "negationOperation": false,
            "severityFilter": {
              "minAlertSeverity": "Medium",
              "maxAlertSeverity": "High"
            },
            "snoozeFilter": {
              "autoSnooze": 0,
              "snoozeScope": "Series",
              "onlyForSuccessive": true
            }
          },
          {
            "anomalyDetectionConfigurationId": "33333333-3333-3333-3333-000000000002",
            "anomalyScopeType": "Dimension",
            "negationOperation": false,
            "dimensionAnomalyScope": {
              "dimension": {
                "city": "Beijing"
              }
            },
            "severityFilter": {
              "minAlertSeverity": "Low",
              "maxAlertSeverity": "High"
            },
            "snoozeFilter": {
              "autoSnooze": 0,
              "snoozeScope": "Series",
              "onlyForSuccessive": true
            },
            "valueFilter": {
              "lower": 0,
              "upper": 1000,
              "direction": "Both",
              "type": "Value"
            }
          }
        ]
      }
    },
    "DataFeed": {
      "required": [
        "dataFeedName",
        "dataSourceType",
        "dataStartFrom",
        "granularityName",
        "metrics"
      ],
      "type": "object",
      "properties": {
        "dataSourceType": {
          "description": "data source type",
          "enum": [
            "AzureApplicationInsights",
            "AzureBlob",
            "AzureCosmosDB",
            "AzureDataExplorer",
            "AzureDataLakeStorageGen2",
            "AzureEventHubs",
            "AzureLogAnalytics",
            "AzureTable",
            "InfluxDB",
            "MongoDB",
            "MySql",
            "PostgreSql",
            "SqlServer"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DatasourceType",
            "modelAsString": true
          }
        },
        "dataFeedId": {
          "format": "uuid",
          "description": "data feed unique id",
          "type": "string",
          "readOnly": true,
          "x-ms-client-name": "id"
        },
        "dataFeedName": {
          "description": "data feed name",
          "type": "string",
          "example": "dummy data feed name",
          "x-ms-client-name": "name"
        },
        "dataFeedDescription": {
          "description": "data feed description",
          "default": "",
          "type": "string"
        },
        "granularityName": {
          "description": "granularity of the time series",
          "enum": [
            "Yearly",
            "Monthly",
            "Weekly",
            "Daily",
            "Hourly",
            "Minutely",
            "Custom"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "Granularity",
            "modelAsString": true
          }
        },
        "granularityAmount": {
          "format": "int32",
          "description": "if granularity is custom,it is required.",
          "type": "integer"
        },
        "metrics": {
          "description": "measure list",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "$ref": "#/definitions/DataFeedMetric"
          }
        },
        "dimension": {
          "description": "dimension list",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "$ref": "#/definitions/DataFeedDimension"
          }
        },
        "timestampColumn": {
          "description": "user-defined timestamp column. if timestampColumn is null, start time of every time slice will be used as default value.",
          "default": "",
          "type": "string"
        },
        "dataStartFrom": {
          "format": "date-time",
          "description": "ingestion start time",
          "type": "string"
        },
        "startOffsetInSeconds": {
          "format": "int64",
          "description": "the time that the beginning of data ingestion task will delay for every data slice according to this offset.",
          "default": 0,
          "type": "integer"
        },
        "maxConcurrency": {
          "format": "int32",
          "description": "the max concurrency of data ingestion queries against user data source. 0 means no limitation.",
          "default": -1,
          "type": "integer"
        },
        "minRetryIntervalInSeconds": {
          "format": "int64",
          "description": "the min retry interval for failed data ingestion tasks.",
          "default": -1,
          "type": "integer"
        },
        "stopRetryAfterInSeconds": {
          "format": "int64",
          "description": "stop retry data ingestion after the data slice first schedule time in seconds.",
          "default": -1,
          "type": "integer"
        },
        "needRollup": {
          "description": "mark if the data feed need rollup",
          "default": "NoRollup",
          "enum": [
            "NoRollup",
            "NeedRollup",
            "AlreadyRollup"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "NeedRollupEnum",
            "modelAsString": true
          }
        },
        "rollUpMethod": {
          "description": "roll up method",
          "default": "None",
          "enum": [
            "None",
            "Sum",
            "Max",
            "Min",
            "Avg",
            "Count"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DataFeedAutoRollupMethod",
            "modelAsString": true
          }
        },
        "rollUpColumns": {
          "description": "roll up columns",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "allUpIdentification": {
          "description": "the identification value for the row of calculated all-up value.",
          "type": "string"
        },
        "fillMissingPointType": {
          "description": "the type of fill missing point for anomaly detection",
          "default": "SmartFilling",
          "enum": [
            "SmartFilling",
            "PreviousValue",
            "CustomValue",
            "NoFilling"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DatasourceMissingDataPointFillType",
            "modelAsString": true
          }
        },
        "fillMissingPointValue": {
          "format": "double",
          "description": "the value of fill missing point for anomaly detection",
          "type": "number"
        },
        "viewMode": {
          "description": "data feed access mode, default is Private",
          "default": "Private",
          "enum": [
            "Private",
            "Public"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DataFeedAccessMode",
            "modelAsString": true
          },
          "x-ms-client-name": "accessMode"
        },
        "admins": {
          "description": "data feed administrator",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "viewers": {
          "description": "data feed viewer",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "isAdmin": {
          "description": "the query user is one of data feed administrator or not",
          "type": "boolean",
          "readOnly": true
        },
        "creator": {
          "description": "data feed creator",
          "type": "string",
          "readOnly": true
        },
        "status": {
          "description": "data feed status",
          "enum": [
            "Active",
            "Paused"
          ],
          "type": "string",
          "readOnly": true,
          "x-ms-enum": {
            "name": "DataFeedStatus",
            "modelAsString": true
          }
        },
        "createdTime": {
          "format": "date-time",
          "description": "data feed created time",
          "type": "string",
          "readOnly": true
        },
        "actionLinkTemplate": {
          "description": "action link for alert",
          "default": "",
          "type": "string"
        },
        "authenticationType": {
          "description": "authentication type for corresponding data source",
          "default": "Basic",
          "enum": [
            "Basic",
            "ManagedIdentity",
            "AzureSQLConnectionString",
            "DataLakeGen2SharedKey",
            "ServicePrincipal",
            "ServicePrincipalInKV"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "DatasourceAuthenticationType",
            "modelAsString": true
          }
        },
        "credentialId": {
          "description": "The credential entity id",
          "type": "string"
        },
        "dataSourceParameter": {
          "type": "object"
        }
      },
      "discriminator": "dataSourceType",
      "example": {
        "dataSourceParameter": {
          "connectionString": "Server=PlaceholderSqlServer,1433;Initial Catalog=PlaceholderDatabase;User ID=PlaceholderUserName;Password=PlaceholderPassword;",
          "query": "select * from your_table where timestamp = @StartTime"
        },
        "dataFeedName": "Sample - cost/revenue - city/category",
        "dataFeedDescription": "This is a sample data feed.",
        "granularityName": "Daily",
        "metrics": [
          {
            "metricName": "cost",
            "metricDisplayName": "cost"
          },
          {
            "metricName": "revenue",
            "metricDisplayName": "revenue"
          }
        ],
        "dimension": [
          {
            "dimensionName": "category",
            "dimensionDisplayName": "category"
          },
          {
            "dimensionName": "city",
            "dimensionDisplayName": "city"
          }
        ],
        "timestampColumn": "timestamp",
        "dataStartFrom": "2020-01-01T00:00:00Z",
        "dataSourceType": "SqlServer",
        "startOffsetInSeconds": 86400,
        "maxConcurrency": 5,
        "minRetryIntervalInSeconds": 3600,
        "stopRetryAfterInSeconds": 604800,
        "needRollup": "NeedRollup",
        "rollUpMethod": "Sum",
        "allUpIdentification": "__SUM__",
        "fillMissingPointType": "SmartFilling",
        "viewMode": "Private",
        "authenticationType": "Basic"
      }
    },
    "NotificationHook": {
      "required": [
        "hookType"
      ],
      "type": "object",
      "properties": {
        "hookType": {
          "description": "hook type",
          "enum": [
            "Webhook",
            "Email"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "HookType",
            "modelAsString": true
          }
        },
        "hookId": {
          "format": "uuid",
          "description": "Hook unique id",
          "type": "string",
          "readOnly": true,
          "x-ms-client-name": "id"
        },
        "hookName": {
          "description": "hook unique name",
          "type": "string",
          "x-ms-client-name": "name"
        },
        "description": {
          "description": "hook description",
          "default": "",
          "type": "string"
        },
        "externalLink": {
          "description": "hook external link",
          "default": "",
          "type": "string"
        },
        "admins": {
          "description": "hook administrators",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "discriminator": "hookType"
    },
    "EmailNotificationHook": {
      "required": [],
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/NotificationHook"
        }
      ],
      "properties": {
        "hookParameter": {
          "$ref": "#/definitions/EmailHookParameter",
          "x-ms-client-flatten": true
        }
      },
      "x-ms-discriminator-value": "Email"
    },
    "WebNotificationHook": {
      "required": [],
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/NotificationHook"
        }
      ],
      "properties": {
        "hookParameter": {
          "$ref": "#/definitions/WebhookHookParameter",
          "x-ms-client-flatten": true
        }
      },
      "example": {
        "hookParameter": {
          "endpoint": "https://localhost/demo/post"
        },
        "hookName": "A webhook",
        "hookType": "Webhook",
        "description": "This is a webhook.",
        "externalLink": ""
      },
      "x-ms-discriminator-value": "Webhook"
    },
    "MetricDetectionCondition": {
      "type": "object",
      "properties": {
        "conditionOperator": {
          "description": "condition operator\r\n\r\nshould be specified when combining multiple detection conditions",
          "enum": [
            "AND",
            "OR"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalyDetectionConfigurationLogicType",
            "modelAsString": true
          }
        },
        "smartDetectionCondition": {
          "$ref": "#/definitions/SmartDetectionCondition"
        },
        "hardThresholdCondition": {
          "$ref": "#/definitions/HardThresholdCondition"
        },
        "changeThresholdCondition": {
          "$ref": "#/definitions/ChangeThresholdCondition"
        }
      }
    },
    "MetricSeriesGroupDetectionCondition": {
      "required": [
        "group"
      ],
      "type": "object",
      "properties": {
        "group": {
          "$ref": "#/definitions/DimensionGroupIdentity",
          "x-ms-client-flatten": true
        },
        "conditionOperator": {
          "description": "condition operator\r\n\r\nshould be specified when combining multiple detection conditions",
          "enum": [
            "AND",
            "OR"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalyDetectionConfigurationLogicType",
            "modelAsString": true
          }
        },
        "smartDetectionCondition": {
          "$ref": "#/definitions/SmartDetectionCondition"
        },
        "hardThresholdCondition": {
          "$ref": "#/definitions/HardThresholdCondition"
        },
        "changeThresholdCondition": {
          "$ref": "#/definitions/ChangeThresholdCondition"
        }
      }
    },
    "MetricSingleSeriesDetectionCondition": {
      "required": [
        "series"
      ],
      "type": "object",
      "properties": {
        "series": {
          "$ref": "#/definitions/SeriesIdentity",
          "x-ms-client-flatten": true
        },
        "conditionOperator": {
          "description": "condition operator\r\n\r\nshould be specified when combining multiple detection conditions",
          "enum": [
            "AND",
            "OR"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "AnomalyDetectionConfigurationLogicType",
            "modelAsString": true
          }
        },
        "smartDetectionCondition": {
          "$ref": "#/definitions/SmartDetectionCondition"
        },
        "hardThresholdCondition": {
          "$ref": "#/definitions/HardThresholdCondition"
        },
        "changeThresholdCondition": {
          "$ref": "#/definitions/ChangeThresholdCondition"
        }
      }
    },
    "DataFeedMetric": {
      "required": [
        "metricName"
      ],
      "type": "object",
      "properties": {
        "metricId": {
          "format": "uuid",
          "description": "metric id",
          "type": "string",
          "readOnly": true,
          "x-ms-client-name": "id"
        },
        "metricName": {
          "description": "metric name",
          "type": "string",
          "x-ms-client-name": "name"
        },
        "metricDisplayName": {
          "description": "metric display name",
          "pattern": "[.a-zA-Z0-9_-]+",
          "type": "string",
          "x-ms-client-name": "displayName"
        },
        "metricDescription": {
          "description": "metric description",
          "type": "string",
          "x-ms-client-name": "description"
        }
      }
    },
    "DataFeedDimension": {
      "required": [
        "dimensionName"
      ],
      "type": "object",
      "properties": {
        "dimensionName": {
          "description": "dimension name",
          "type": "string",
          "x-ms-client-name": "name"
        },
        "dimensionDisplayName": {
          "description": "dimension display name",
          "pattern": "[.a-zA-Z0-9_-]+",
          "type": "string",
          "x-ms-client-name": "displayName"
        }
      }
    },
    "MetricEnrichedSeriesData": {
      "required": [
        "expectedValueList",
        "isAnomalyList",
        "lowerBoundaryList",
        "periodList",
        "series",
        "timestampList",
        "upperBoundaryList",
        "valueList"
      ],
      "type": "object",
      "properties": {
        "series": {
          "$ref": "#/definitions/SeriesIdentity"
        },
        "timestampList": {
          "description": "timestamps of the series",
          "type": "array",
          "items": {
            "format": "date-time",
            "type": "string"
          }
        },
        "valueList": {
          "description": "values of the series",
          "type": "array",
          "items": {
            "format": "double",
            "type": "number"
          }
        },
        "isAnomalyList": {
          "description": "whether points of the series are anomalies",
          "type": "array",
          "items": {
            "type": "boolean"
          }
        },
        "periodList": {
          "description": "period calculated on each point of the series",
          "type": "array",
          "items": {
            "format": "int32",
            "type": "integer"
          }
        },
        "expectedValueList": {
          "description": "expected values of the series given by smart detector",
          "type": "array",
          "items": {
            "format": "double",
            "type": "number"
          }
        },
        "lowerBoundaryList": {
          "description": "lower boundary list of the series given by smart detector",
          "type": "array",
          "items": {
            "format": "double",
            "type": "number"
          }
        },
        "upperBoundaryList": {
          "description": "upper boundary list of the series given by smart detector",
          "type": "array",
          "items": {
            "format": "double",
            "type": "number"
          }
        }
      }
    },
    "AnomalyAlert": {
      "type": "object",
      "properties": {
        "alertId": {
          "description": "alert id",
          "type": "string",
          "readOnly": true
        },
        "timestamp": {
          "format": "date-time",
          "description": "anomaly time",
          "type": "string",
          "readOnly": true
        },
        "createdTime": {
          "format": "date-time",
          "description": "created time",
          "type": "string",
          "readOnly": true
        },
        "modifiedTime": {
          "format": "date-time",
          "description": "modified time",
          "type": "string",
          "readOnly": true
        }
      }
    },
    "DataPointAnomaly": {
      "required": [
        "dimension",
        "property",
        "timestamp"
      ],
      "type": "object",
      "properties": {
        "dataFeedId": {
          "format": "uuid",
          "description": "data feed unique id\r\n\r\nonly return for alerting anomaly result",
          "type": "string",
          "readOnly": true
        },
        "metricId": {
          "format": "uuid",
          "description": "metric unique id\r\n\r\nonly return for alerting anomaly result",
          "type": "string",
          "readOnly": true
        },
        "anomalyDetectionConfigurationId": {
          "format": "uuid",
          "description": "anomaly detection configuration unique id\r\n\r\nonly return for alerting anomaly result",
          "type": "string",
          "readOnly": true
        },
        "timestamp": {
          "format": "date-time",
          "description": "anomaly time",
          "type": "string"
        },
        "createdTime": {
          "format": "date-time",
          "description": "created time\r\n\r\nonly return for alerting result",
          "type": "string",
          "readOnly": true
        },
        "modifiedTime": {
          "format": "date-time",
          "description": "modified time\r\n\r\nonly return for alerting result",
          "type": "string",
          "readOnly": true
        },
        "dimension": {
          "description": "dimension specified for series",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "property": {
          "$ref": "#/definitions/AnomalyProperty"
        }
      }
    },
    "AnomalyIncident": {
      "required": [
        "incidentId",
        "lastTime",
        "property",
        "rootNode",
        "startTime"
      ],
      "type": "object",
      "properties": {
        "dataFeedId": {
          "format": "uuid",
          "description": "data feed unique id\r\n\r\nonly return for alerting anomaly result",
          "type": "string",
          "readOnly": true
        },
        "metricId": {
          "format": "uuid",
          "description": "metric unique id\r\n\r\nonly return for alerting incident result",
          "type": "string",
          "readOnly": true
        },
        "anomalyDetectionConfigurationId": {
          "format": "uuid",
          "description": "anomaly detection configuration unique id\r\n\r\nonly return for alerting incident result",
          "type": "string",
          "readOnly": true
        },
        "incidentId": {
          "description": "incident id",
          "type": "string"
        },
        "startTime": {
          "format": "date-time",
          "description": "incident start time",
          "type": "string"
        },
        "lastTime": {
          "format": "date-time",
          "description": "incident last time",
          "type": "string"
        },
        "rootNode": {
          "$ref": "#/definitions/SeriesIdentity"
        },
        "property": {
          "$ref": "#/definitions/IncidentProperty"
        }
      }
    },
    "IncidentRootCause": {
      "required": [
        "description",
        "path",
        "rootCause",
        "score"
      ],
      "type": "object",
      "properties": {
        "rootCause": {
          "$ref": "#/definitions/DimensionGroupIdentity"
        },
        "path": {
          "description": "drilling down path from query anomaly to root cause",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "score": {
          "format": "double",
          "description": "score of the root cause",
          "type": "number"
        },
        "description": {
          "description": "description of the root cause",
          "type": "string"
        }
      }
    },
    "DatasourceSqlConnectionString": {
      "required": [
        "parameters"
      ],
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/DataSourceCredential"
        }
      ],
      "properties": {
        "parameters": {
          "$ref": "#/definitions/AzureSQLConnectionStringParam"
        }
      },
      "x-ms-discriminator-value": "AzureSQLConnectionString"
    },
    "DatasourceDataLakeGen2SharedKey": {
      "required": [
        "parameters"
      ],
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/DataSourceCredential"
        }
      ],
      "properties": {
        "parameters": {
          "$ref": "#/definitions/DataLakeGen2SharedKeyParam"
        }
      },
      "x-ms-discriminator-value": "DataLakeGen2SharedKey"
    },
    "DatasourceServicePrincipal": {
      "required": [
        "parameters"
      ],
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/DataSourceCredential"
        }
      ],
      "properties": {
        "parameters": {
          "$ref": "#/definitions/ServicePrincipalParam"
        }
      },
      "x-ms-discriminator-value": "ServicePrincipal"
    },
    "DatasourceServicePrincipalInKeyVault": {
      "required": [
        "parameters"
      ],
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/DataSourceCredential"
        }
      ],
      "properties": {
        "parameters": {
          "$ref": "#/definitions/ServicePrincipalInKVParam"
        }
      },
      "x-ms-discriminator-value": "ServicePrincipalInKV"
    },
    "AzureApplicationInsightsDataFeedSource": {
      "required": [
        "query"
      ],
      "type": "object",
      "properties": {
        "azureCloud": {
          "description": "The Azure cloud that this Azure Application Insights in",
          "type": "string"
        },
        "applicationId": {
          "description": "The application id of this Azure Application Insights",
          "type": "string"
        },
        "apiKey": {
          "description": "The API Key that can access this Azure Application Insights",
          "type": "string"
        },
        "query": {
          "description": "The statement to query this Azure Application Insights",
          "type": "string"
        }
      }
    },
    "AzureBlobDataFeedSource": {
      "required": [
        "blobTemplate",
        "container"
      ],
      "type": "object",
      "properties": {
        "connectionString": {
          "description": "The connection string of this Azure Blob",
          "type": "string"
        },
        "container": {
          "description": "The container name in this Azure Blob",
          "type": "string"
        },
        "blobTemplate": {
          "description": "The path template in this container",
          "type": "string"
        }
      }
    },
    "AzureCosmosDbDataFeedSource": {
      "required": [
        "collectionId",
        "database",
        "sqlQuery"
      ],
      "type": "object",
      "properties": {
        "connectionString": {
          "description": "The connection string of this Azure CosmosDB",
          "type": "string"
        },
        "sqlQuery": {
          "description": "The statement to query this collection",
          "type": "string"
        },
        "database": {
          "description": "A database name in this Azure CosmosDB",
          "type": "string"
        },
        "collectionId": {
          "description": "A collection id in this database",
          "type": "string"
        }
      }
    },
    "AzureDataExplorerDataFeedSource": {
      "required": [
        "query"
      ],
      "type": "object",
      "properties": {
        "connectionString": {
          "description": "The connection string of this database",
          "type": "string"
        },
        "query": {
          "description": "The script to query this database",
          "type": "string"
        }
      }
    },
    "AzureTableDataFeedSource": {
      "required": [
        "query",
        "table"
      ],
      "type": "object",
      "properties": {
        "connectionString": {
          "description": "The connection string of this Azure Table",
          "type": "string"
        },
        "table": {
          "description": "A table name in this Azure Table",
          "type": "string"
        },
        "query": {
          "description": "The statement to query this table. Please find syntax and details from Azure Table documents.",
          "type": "string"
        }
      }
    },
    "AzureEventHubsDataFeedSource": {
      "required": [
        "consumerGroup"
      ],
      "type": "object",
      "properties": {
        "connectionString": {
          "description": "The connection string of this Azure Event Hubs",
          "type": "string"
        },
        "consumerGroup": {
          "description": "The consumer group to be used in this data feed",
          "type": "string"
        }
      }
    },
    "InfluxDbDataFeedSource": {
      "required": [
        "query"
      ],
      "type": "object",
      "properties": {
        "connectionString": {
          "description": "The connection string of this InfluxDB",
          "type": "string"
        },
        "database": {
          "description": "A database name",
          "type": "string"
        },
        "userName": {
          "description": "The user name of the account that can access this database",
          "type": "string"
        },
        "password": {
          "description": "The password of the account that can access this database",
          "type": "string"
        },
        "query": {
          "description": "The script to query this database",
          "type": "string"
        }
      }
    },
    "AzureDataLakeStorageGen2DataFeedSource": {
      "required": [
        "directoryTemplate",
        "fileSystemName",
        "fileTemplate"
      ],
      "type": "object",
      "properties": {
        "accountName": {
          "description": "The account name of this Azure Data Lake",
          "type": "string"
        },
        "accountKey": {
          "description": "The account key that can access this Azure Data Lake",
          "type": "string"
        },
        "fileSystemName": {
          "description": "The file system (container) name in this Azure Data Lake",
          "type": "string"
        },
        "directoryTemplate": {
          "description": "The directory template under this file system",
          "type": "string"
        },
        "fileTemplate": {
          "description": "The file template",
          "type": "string"
        }
      }
    },
    "AzureLogAnalyticsDataFeedSource": {
      "required": [
        "query",
        "workspaceId"
      ],
      "type": "object",
      "properties": {
        "tenantId": {
          "description": "The tenant id of service principal that have access to this Log Analytics",
          "type": "string"
        },
        "clientId": {
          "description": "The client id of service principal that have access to this Log Analytics",
          "type": "string"
        },
        "clientSecret": {
          "description": "The client secret of service principal that have access to this Log Analytics",
          "type": "string"
        },
        "workspaceId": {
          "description": "The workspace id of this Log Analytics",
          "type": "string"
        },
        "query": {
          "description": "The KQL (Kusto Query Language) query to fetch data from this Log Analytics",
          "type": "string"
        }
      }
    },
    "MongoDbDataFeedSource": {
      "required": [
        "command"
      ],
      "type": "object",
      "properties": {
        "connectionString": {
          "description": "The connection string of this MongoDB",
          "type": "string"
        },
        "database": {
          "description": "A database name in this MongoDB",
          "type": "string"
        },
        "command": {
          "description": "The script to query this database",
          "type": "string"
        }
      }
    }
  },
  "securityDefinitions": {
    "ma_api_key": {
      "type": "apiKey",
      "name": "x-api-key",
      "in": "header"
    },
    "apim_key": {
      "type": "apiKey",
      "name": "Ocp-Apim-Subscription-Key",
      "in": "header"
    }
  },
  "security": [
    {
      "apim_key": [],
      "ma_api_key": []
    }
  ],
  "parameters": {
    "Endpoint": {
      "name": "endpoint",
      "description": "Supported Cognitive Services endpoints (protocol and hostname, for example: https://<resource-name>.cognitiveservices.azure.com).",
      "x-ms-parameter-location": "client",
      "required": true,
      "type": "string",
      "in": "path",
      "x-ms-skip-url-encoding": true
    }
  },
  "x-ms-parameterized-host": {
    "hostTemplate": "{endpoint}/metricsadvisor/v1.0",
    "useSchemePrefix": false,
    "parameters": [
      {
        "$ref": "#/parameters/Endpoint"
      }
    ]
  }
}