{
  "parameters": {
    "api-version": "2019-06-01",
    "automationAccountName": "myaccount",
    "parameters": {
      "properties": {
        "scheduleInfo": {
          "advancedSchedule": {
            "weekDays": [
              "Monday",
              "Thursday"
            ]
          },
          "expiryTime": "2018-11-09T11:22:57+00:00",
          "frequency": "Hour",
          "interval": 1,
          "startTime": "2017-10-19T12:22:57+00:00",
          "timeZone": "America/Los_Angeles"
        },
        "tasks": {
          "postTask": {
            "parameters": null,
            "source": "GetCache"
          },
          "preTask": {
            "parameters": {
              "COMPUTERNAME": "Computer1"
            },
            "source": "HelloWorld"
          }
        },
        "updateConfiguration": {
          "azureVirtualMachines": [
            "/subscriptions/5ae68d89-69a4-454f-b5ce-e443cc4e0067/resourceGroups/myresources/providers/Microsoft.Compute/virtualMachines/vm-01",
            "/subscriptions/5ae68d89-69a4-454f-b5ce-e443cc4e0067/resourceGroups/myresources/providers/Microsoft.Compute/virtualMachines/vm-02",
            "/subscriptions/5ae68d89-69a4-454f-b5ce-e443cc4e0067/resourceGroups/myresources/providers/Microsoft.Compute/virtualMachines/vm-03"
          ],
          "duration": "PT2H0M",
          "nonAzureComputerNames": [
            "box1.contoso.com",
            "box2.contoso.com"
          ],
          "operatingSystem": "Windows",
          "targets": {
            "azureQueries": [
              {
                "locations": [
                  "Japan East",
                  "UK South"
                ],
                "scope": [
                  "/subscriptions/5ae68d89-69a4-454f-b5ce-e443cc4e0067/resourceGroups/myresources",
                  "/subscriptions/5ae68d89-69a4-454f-b5ce-e443cc4e0067"
                ],
                "tagSettings": {
                  "filterOperator": "All",
                  "tags": {
                    "tag1": [
                      "tag1Value1",
                      "tag1Value2",
                      "tag1Value3"
                    ],
                    "tag2": [
                      "tag2Value1",
                      "tag2Value2",
                      "tag2Value3"
                    ]
                  }
                }
              }
            ],
            "nonAzureQueries": [
              {
                "functionAlias": "SavedSearch1",
                "workspaceId": "WorkspaceId1"
              },
              {
                "functionAlias": "SavedSearch2",
                "workspaceId": "WorkspaceId2"
              }
            ]
          },
          "windows": {
            "excludedKbNumbers": [
              "168934",
              "168973"
            ],
            "includedUpdateClassifications": "Critical",
            "rebootSetting": "IfRequired"
          }
        }
      }
    },
    "resourceGroupName": "mygroup",
    "softwareUpdateConfigurationName": "testpatch",
    "subscriptionId": "51766542-3ed7-4a72-a187-0c8ab644ddab"
  },
  "responses": {
    "200": {
      "body": {
        "name": "testpatch",
        "id": "/subscriptions/51766542-3ed7-4a72-a187-0c8ab644ddab/resourceGroups/mygroup/providers/Microsoft.Automation/automationAccounts/myaccount/softwareUpdateConfigurations/testpatch",
        "properties": {
          "createdBy": "adam@contoso.com",
          "creationTime": "2017-10-19T18:54:50.5233333+00:00",
          "error": {},
          "lastModifiedBy": "adam@contoso.com",
          "lastModifiedTime": "2017-10-19T18:54:50.68+00:00",
          "provisioningState": "Provisioning",
          "scheduleInfo": {
            "description": "",
            "advancedSchedule": {},
            "creationTime": "2017-10-19T18:54:50.5233333+00:00",
            "expiryTime": "2018-11-09T11:22:00-08:00",
            "expiryTimeOffsetMinutes": -480,
            "frequency": "Week",
            "interval": 1,
            "isEnabled": true,
            "lastModifiedTime": "2017-10-19T18:54:50.5233333+00:00",
            "nextRun": "2017-10-19T12:22:00-07:00",
            "nextRunOffsetMinutes": -420,
            "startTime": "2017-10-19T12:22:00-07:00",
            "startTimeOffsetMinutes": -420,
            "timeZone": "America/Los_Angeles"
          },
          "tasks": {
            "postTask": {
              "parameters": null,
              "source": "GetCache"
            },
            "preTask": {
              "parameters": {
                "COMPUTERNAME": "Computer1"
              },
              "source": "HelloWorld"
            }
          },
          "updateConfiguration": {
            "azureVirtualMachines": [
              "/subscriptions/5ae68d89-69a4-454f-b5ce-e443cc4e0067/resourceGroups/myresources/providers/Microsoft.Compute/virtualMachines/vm-01",
              "/subscriptions/5ae68d89-69a4-454f-b5ce-e443cc4e0067/resourceGroups/myresources/providers/Microsoft.Compute/virtualMachines/vm-02",
              "/subscriptions/5ae68d89-69a4-454f-b5ce-e443cc4e0067/resourceGroups/myresources/providers/Microsoft.Compute/virtualMachines/vm-03"
            ],
            "duration": "PT2H",
            "linux": {},
            "nonAzureComputerNames": [
              "box1.contoso.com",
              "box2.contoso.com"
            ],
            "operatingSystem": "Windows",
            "targets": {
              "azureQueries": [
                {
                  "locations": [
                    "Japan East",
                    "UK South"
                  ],
                  "scope": [
                    "/subscriptions/422b6c61-95b0-4213-b3be-7282315df71d/resourceGroups/a-stasku-rg0",
                    "/subscriptions/422b6c61-95b0-4213-b3be-7282315df71d"
                  ],
                  "tagSettings": {
                    "filterOperator": "All",
                    "tags": {
                      "tag1": [
                        "tag1Value1",
                        "tag1Value2"
                      ],
                      "tag2": [
                        "tag2Value1",
                        "tag2Value2"
                      ]
                    }
                  }
                }
              ]
            },
            "windows": {
              "excludedKbNumbers": [
                "168934",
                "168973"
              ],
              "includedUpdateClassifications": "Critical"
            }
          }
        }
      },
      "headers": {}
    },
    "201": {
      "body": {
        "name": "testpatch",
        "id": "/subscriptions/51766542-3ed7-4a72-a187-0c8ab644ddab/resourceGroups/mygroup/providers/Microsoft.Automation/automationAccounts/myaccount/softwareUpdateConfigurations/testpatch",
        "properties": {
          "creationTime": "2017-10-19T18:54:50.5233333+00:00",
          "error": {},
          "lastModifiedBy": "",
          "lastModifiedTime": "2017-10-19T18:54:50.68+00:00",
          "provisioningState": "Provisioning",
          "scheduleInfo": {
            "description": "",
            "creationTime": "2017-10-19T18:54:50.5233333+00:00",
            "expiryTime": "2018-11-09T11:22:00-08:00",
            "expiryTimeOffsetMinutes": -480,
            "frequency": "Week",
            "interval": 1,
            "isEnabled": true,
            "lastModifiedTime": "2017-10-19T18:54:50.5233333+00:00",
            "nextRun": "2017-10-19T12:22:00-07:00",
            "nextRunOffsetMinutes": -420,
            "startTime": "2017-10-19T12:22:00-07:00",
            "startTimeOffsetMinutes": -420,
            "timeZone": "America/Los_Angeles"
          },
          "tasks": {
            "postTask": {
              "parameters": null,
              "source": "GetCache"
            },
            "preTask": {
              "parameters": {
                "COMPUTERNAME": "Computer1"
              },
              "source": "HelloWorld"
            }
          },
          "updateConfiguration": {
            "azureVirtualMachines": [
              "/subscriptions/5ae68d89-69a4-454f-b5ce-e443cc4e0067/resourceGroups/myresources/providers/Microsoft.Compute/virtualMachines/vm-01",
              "/subscriptions/5ae68d89-69a4-454f-b5ce-e443cc4e0067/resourceGroups/myresources/providers/Microsoft.Compute/virtualMachines/vm-02",
              "/subscriptions/5ae68d89-69a4-454f-b5ce-e443cc4e0067/resourceGroups/myresources/providers/Microsoft.Compute/virtualMachines/vm-03"
            ],
            "duration": "PT2H",
            "linux": {},
            "nonAzureComputerNames": [
              "box1.contoso.com",
              "box2.contoso.com"
            ],
            "operatingSystem": "Windows",
            "targets": {
              "azureQueries": [
                {
                  "locations": [
                    "Japan East",
                    "UK South"
                  ],
                  "scope": [
                    "/subscriptions/422b6c61-95b0-4213-b3be-7282315df71d/resourceGroups/a-stasku-rg0",
                    "/subscriptions/422b6c61-95b0-4213-b3be-7282315df71d"
                  ],
                  "tagSettings": {
                    "filterOperator": "All",
                    "tags": {
                      "tag1": [
                        "tag1Value1",
                        "tag1Value2"
                      ],
                      "tag2": [
                        "tag2Value1",
                        "tag2Value2"
                      ]
                    }
                  }
                }
              ]
            },
            "windows": {
              "excludedKbNumbers": [
                "168934",
                "168973"
              ],
              "includedUpdateClassifications": "Critical"
            }
          }
        }
      },
      "headers": {}
    }
  },
  "operationId": "SoftwareUpdateConfigurations_Create",
  "title": "Create software update configuration"
}