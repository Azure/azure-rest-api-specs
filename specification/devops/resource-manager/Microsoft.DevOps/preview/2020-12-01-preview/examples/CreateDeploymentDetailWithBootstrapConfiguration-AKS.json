{
  "parameters": {
    "subscriptionId": "{subscriptionId}",
    "resourceGroupName": "contoso-k8sRg",
    "api-version": "2020-12-01-preview",
    "deploymentDetailId": "4d480919-e257-4927-9c4b-68dd9d9501e2",
    "createOperationParameters": {
      "properties": {
        "targetResource": {
          "id": "/subscriptions/5e531950-9b90-4deb-b69f-3bf3b79dfb31/resourceGroups/contoso-k8sRg/providers/Microsoft.ContainerService/managedClusters/contoso-k8s-cluster",
          "type": "Microsoft.ContainerService/ManagedClusters",
          "properties": {
            "namespace": "prod-wcus"
          }
        },
        "workflowRun": {
          "provider": "GitHub",
          "workflow": {
            "repository": "contoso/contoso-app",
            "name": "Prod deployment",
            "path": "./github/workflow/cd.yml",
            "bootstrapConfiguration": {
              "pipelineProvisioningJob": {
                "id": "123",
                "pipelineTemplateId": "ms.vss-continuous-delivery-pipeline-templates.aks-cd-with-dockerfile-github",
                "branch": "master",
                "provisioningMode": "complete",
                "draftPipelineConfiguration": {
                  "files": [
                    {
                      "path": ".github/workflow.yml",
                      "content": "<empty>"
                    }
                  ]
                },
                "provisioningConfiguration": {
                  "mode": "draft",
                  "commitMessage": "commiting workflow configuration"
                }
              }
            }
          }
        }
      }
    }
  },
  "responses": {
    "200": {
      "description": "The creation or update of workflow deployment detail completed successfully.",
      "body": {
        "name": "b0e3f6e4-2bf8-492b-8715-529314a2148d",
        "id": "/subscriptions/{subscriptionId}/resourceGroups/contoso-k8sRg/providers/Microsoft.DevOps/deploymentDetails/b0e3f6e4-2bf8-492b-8715-529314a2148d",
        "type": "Microsoft.DevOps/deploymentDetails",
        "properties": {
          "provisioningState": "Succeeded",
          "targetResource": {
            "id": "/subscriptions/5e531950-9b90-4deb-b69f-3bf3b79dfb31/resourceGroups/k8sRg/providers/Microsoft.ContainerService/managedClusters/contoso-k8s-cluster",
            "type": "Microsoft.ContainerService/ManagedClusters",
            "properties": {
              "namespace": "prod-wcus"
            }
          },
          "workflowRun": {
            "provider": "GitHub",
            "workflow": {
              "repository": "contoso/contoso-app",
              "name": "Prod deployment",
              "path": "./github/workflow/cd.yml",
              "ref": "refs/heads/release"
            }
          }
        }
      }
    },
    "201": {
      "description": "The creation or update of workflow deployment detail started.",
      "body": {
        "name": "b0e3f6e4-2bf8-492b-8715-529314a2148d",
        "id": "/subscriptions/{subscriptionId}/resourceGroups/contoso-k8sRg/providers/Microsoft.DevOps/deploymentDetails/b0e3f6e4-2bf8-492b-8715-529314a2148d",
        "type": "Microsoft.DevOps/deploymentDetails",
        "properties": {
          "provisioningState": "Succeeded",
          "targetResource": {
            "id": "/subscriptions/5e531950-9b90-4deb-b69f-3bf3b79dfb31/resourceGroups/k8sRg/providers/Microsoft.ContainerService/managedClusters/contoso-k8s-cluster",
            "type": "Microsoft.ContainerService/ManagedClusters",
            "properties": {
              "namespace": "prod-wcus"
            }
          },
          "workflowRun": {
            "provider": "GitHub",
            "workflow": {
              "repository": "contoso/contoso-app",
              "name": "Prod deployment",
              "path": "./github/workflow/cd.yml",
              "ref": "refs/heads/release"
            }
          }
        }
      }
    }
  }
}
