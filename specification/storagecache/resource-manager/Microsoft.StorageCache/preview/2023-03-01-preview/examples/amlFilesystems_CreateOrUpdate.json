{
  "parameters": {
    "resourceGroupName": "scgroup",
    "amlFilesystemName": "fs1",
    "subscriptionId": "00000000-0000-0000-0000-000000000000",
    "api-version": "2023-03-01-preview",
    "amlFilesystem": {
      "tags": {
        "Dept": "ContosoAds"
      },
      "identity": {
        "type": "UserAssigned",
        "userAssignedIdentities": {
          "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity1": {}
        }
      },
      "location": "eastus",
      "properties": {
        "storageCapacityTiB": 16,
        "filesystemSubnet": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Network/virtualNetworks/scvnet/subnets/fsSub",
        "zones": [
          "1"
        ],
        "encryptionSettings": {
          "keyEncryptionKey": {
            "keyUrl": "https://examplekv.vault.azure.net/keys/kvk/3540a47df75541378d3518c6a4bdf5af",
            "sourceVault": {
              "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.KeyVault/vaults/keyvault-cmk"
            }
          }
        },
        "maintenanceWindow": {
          "dayOfWeek": "Friday",
          "timeOfDayUTC": "22:00"
        },
        "hsm": {
          "settings": {
            "container": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Storage/storageAccounts/storageaccountname/blobServices/default/containers/containername",
            "loggingContainer": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Storage/storageAccounts/storageaccountname/blobServices/default/containers/loggingcontainername",
            "importPrefix": "/"
          }
        }
      },
      "sku": {
        "name": "AMLFS-Durable-Premium-250"
      }
    }
  },
  "responses": {
    "202": {
      "headers": {
        "Azure-AsyncOperation": "https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.StorageCache/locations/westus/azureAsyncOperation/e276a03a-1770-4549-86f5-0edffae8997c?api-version=2023-03-01-preview"
      }
    },
    "201": {
      "headers": {
        "Azure-AsyncOperation": "https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.StorageCache/locations/westus/azureAsyncOperation/e276a03a-1770-4549-86f5-0edffae8997c?api-version=2023-03-01-preview"
      },
      "body": {
        "tags": {
          "Dept": "ContosoAds"
        },
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.StorageCache/amlFilesystems/fs1",
        "location": "eastus",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity1": {}
          }
        },
        "name": "fs1",
        "type": "Microsoft.StorageCache/amlFilesystem",
        "properties": {
          "storageCapacityTiB": 16,
          "throughputProvisionedMBps": 500,
          "zones": [
            "1"
          ],
          "health": {
            "state": "Available",
            "statusDescription": "amlFilesystem is ok."
          },
          "provisioningState": "Succeeded",
          "filesystemSubnet": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Network/virtualNetworks/scvnet/subnets/fsSub",
          "mgsAddress": "10.0.0.4",
          "mountCommand": "mount -t lustre 10.0.0.4@tcp:/lustrefs /lustre/lustrefs",
          "lustreVersion": "2.15.0",
          "encryptionSettings": {
            "keyEncryptionKey": {
              "keyUrl": "https://examplekv.vault.azure.net/keys/kvk/3540a47df75541378d3518c6a4bdf5af",
              "sourceVault": {
                "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.KeyVault/vaults/keyvault-cmk"
              }
            }
          },
          "maintenanceWindow": {
            "dayOfWeek": "Friday",
            "timeOfDayUTC": "22:00"
          },
          "hsm": {
            "settings": {
              "container": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Storage/storageAccounts/storageaccountname/blobServices/default/containers/containername",
              "loggingContainer": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Storage/storageAccounts/storageaccountname/blobServices/default/containers/loggingcontainername",
              "importPrefix": "/"
            }
          }
        },
        "sku": {
          "name": "AMLFS-Durable-Premium-250"
        }
      }
    },
    "200": {
      "body": {
        "tags": {
          "Dept": "ContosoAds"
        },
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.StorageCache/amlFilesystems/fs1",
        "location": "eastus",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity1": {}
          }
        },
        "name": "fs1",
        "type": "Microsoft.StorageCache/amlFilesystem",
        "properties": {
          "storageCapacityTiB": 16,
          "throughputProvisionedMBps": 500,
          "zones": [
            "1"
          ],
          "health": {
            "state": "Available",
            "statusDescription": "amlFilesystem is ok."
          },
          "provisioningState": "Succeeded",
          "filesystemSubnet": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Network/virtualNetworks/scvnet/subnets/fsSub",
          "mgsAddress": "10.0.0.4",
          "mountCommand": "mount -t lustre 10.0.0.4@tcp:/lustrefs /lustre/lustrefs",
          "lustreVersion": "2.15.0",
          "maintenanceWindow": {
            "dayOfWeek": "Friday",
            "timeOfDayUTC": "22:00"
          },
          "hsm": {
            "settings": {
              "container": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Storage/storageAccounts/storageaccountname/blobServices/default/containers/containername",
              "loggingContainer": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Storage/storageAccounts/storageaccountname/blobServices/default/containers/loggingcontainername",
              "importPrefix": "/"
            },
            "archiveStatus": [
              {
                "filesystemPath": "/",
                "status": {
                  "state": "Completed",
                  "lastCompletionTime": "2019-04-21T18:25:43.511Z",
                  "lastStartedTime": "2019-04-21T17:25:43.511Z"
                }
              }
            ]
          }
        },
        "sku": {
          "name": "AMLFS-Durable-Premium-250"
        }
      }
    }
  }
}
