{
  "parameters": {
    "resourceGroupName": "scgroup",
    "cacheName": "sc1",
    "subscriptionId": "00000000-0000-0000-0000-000000000000",
    "api-version": "2020-10-01",
    "cache": {
      "tags": {
        "Dept": "ContosoAds"
      },
      "location": "westus",
      "properties": {
        "cacheSizeGB": 3072,
        "subnet": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Network/virtualNetworks/scvnet/subnets/sub1",
        "encryptionSettings": {
          "keyEncryptionKey": {
            "keyUrl": "https://keyvault-cmk.vault.azure.net/keys/key2048/test",
            "sourceVault": {
              "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.KeyVault/vaults/keyvault-cmk"
            }
          }
        },
        "directoryServicesSettings": {
          "usernameDownload": {
            "extendedGroups": true,
            "usernameSource": "LDAP",
            "ldapServer": "192.0.2.12",
            "ldapBaseDN": "dc=contosoad,dc=contoso,dc=local",
            "credentials": {
              "bindDn": "cn=ldapadmin,dc=contosoad,dc=contoso,dc=local",
              "bindPassword": "<bindPassword>"
            }
          }
        },
        "securitySettings": {
          "accessPolicies": [
            {
              "name": "default",
              "accessRules": [
                {
                  "scope": "default",
                  "access": "rw",
                  "suid": false,
                  "submountAccess": true,
                  "rootSquash": false
                }
              ]
            }
          ]
        }
      },
      "sku": {
        "name": "Standard_2G"
      }
    }
  },
  "responses": {
    "202": {},
    "201": {
      "body": {
        "tags": {
          "Dept": "ContosoAds"
        },
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.StorageCache/caches/sc1",
        "location": "westus",
        "name": "sc1",
        "type": "Microsoft.StorageCache/Cache",
        "systemData": {
          "createdBy": "user1",
          "createdByType": "User",
          "createdAt": "2020-01-01T17:18:19.1234567Z",
          "lastModifiedBy": "user2",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2020-01-02T17:18:19.1234567Z"
        },
        "properties": {
          "cacheSizeGB": 3072,
          "health": {
            "state": "Transitioning",
            "statusDescription": "Cache is being created."
          },
          "mountAddresses": [
            "192.168.1.1",
            "192.168.1.2"
          ],
          "provisioningState": "Succeeded",
          "subnet": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Network/virtualNetworks/scvnet/subnets/sub1",
          "upgradeStatus": {
            "currentFirmwareVersion": "5.3.23",
            "firmwareUpdateStatus": "available",
            "firmwareUpdateDeadline": "2019-04-21T18:25:43.511Z",
            "lastFirmwareUpdate": "2019-01-21T18:25:43.511Z",
            "pendingFirmwareVersion": "5.3.24"
          },
          "networkSettings": {
            "mtu": 1500
          },
          "securitySettings": {
            "accessPolicies": [
              {
                "name": "default",
                "accessRules": [
                  {
                    "scope": "default",
                    "access": "rw",
                    "suid": false,
                    "submountAccess": true,
                    "rootSquash": false
                  }
                ]
              }
            ]
          },
          "encryptionSettings": {
            "keyEncryptionKey": {
              "keyUrl": "https://keyvault-cmk.vault.azure.net/keys/key2048/test",
              "sourceVault": {
                "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.KeyVault/vaults/keyvault-cmk"
              }
            }
          },
          "directoryServicesSettings": {
            "usernameDownload": {
              "extendedGroups": true,
              "usernameSource": "LDAP",
              "groupFileURI": "",
              "userFileURI": "",
              "ldapServer": "192.0.2.12",
              "ldapBaseDN": "dc=contosoad,dc=contoso,dc=local",
              "encryptLdapConnection": false,
              "requireValidCertificate": false,
              "autoDownloadCertificate": false,
              "caCertificateURI": "",
              "usernameDownloaded": "No"
            }
          }
        },
        "sku": {
          "name": "Standard_2G"
        }
      }
    },
    "200": {
      "body": {
        "tags": {
          "Dept": "ContosoAds"
        },
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.StorageCache/caches/sc1",
        "location": "westus",
        "name": "sc1",
        "type": "Microsoft.StorageCache/Cache",
        "systemData": {
          "createdBy": "user1",
          "createdByType": "User",
          "createdAt": "2020-01-01T17:18:19.1234567Z",
          "lastModifiedBy": "user2",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2020-01-02T17:18:19.1234567Z"
        },
        "properties": {
          "cacheSizeGB": 3072,
          "health": {
            "state": "Transitioning",
            "statusDescription": "Cache is being created."
          },
          "mountAddresses": [
            "192.168.1.1",
            "192.168.1.2"
          ],
          "provisioningState": "Updating",
          "subnet": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.Network/virtualNetworks/scvnet/subnets/sub1",
          "upgradeStatus": {
            "currentFirmwareVersion": "V5.1.12",
            "firmwareUpdateStatus": "available",
            "firmwareUpdateDeadline": "2019-04-21T18:25:43.511Z",
            "lastFirmwareUpdate": "2019-01-21T18:25:43.511Z",
            "pendingFirmwareVersion": "V5.1.15"
          },
          "networkSettings": {
            "mtu": 1500
          },
          "securitySettings": {
            "accessPolicies": [
              {
                "name": "default",
                "accessRules": [
                  {
                    "scope": "default",
                    "access": "rw",
                    "suid": false,
                    "submountAccess": true,
                    "rootSquash": false
                  }
                ]
              }
            ]
          },
          "encryptionSettings": {
            "keyEncryptionKey": {
              "keyUrl": "https://keyvault-cmk.vault.azure.net/keys/key2048/test",
              "sourceVault": {
                "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/scgroup/providers/Microsoft.KeyVault/vaults/keyvault-cmk"
              }
            }
          },
          "directoryServicesSettings": {
            "usernameDownload": {
              "extendedGroups": true,
              "usernameSource": "LDAP",
              "groupFileURI": "",
              "userFileURI": "",
              "ldapServer": "192.0.2.12",
              "ldapBaseDN": "dc=contosoad,dc=contoso,dc=local",
              "encryptLdapConnection": false,
              "requireValidCertificate": false,
              "autoDownloadCertificate": false,
              "caCertificateURI": "",
              "usernameDownloaded": "Yes"
            }
          }
        },
        "sku": {
          "name": "Standard_2G"
        }
      }
    }
  }
}
