{
  "parameters": {
    "accountName": "contosomedia",
    "api-version": "2023-01-01",
    "contentKeyPolicyName": "PolicyWithWidevineOptionAndJwtTokenRestriction",
    "parameters": {
      "properties": {
        "description": "ArmPolicyDescription",
        "options": [
          {
            "name": "widevineoption",
            "configuration": {
              "@odata.type": "#Microsoft.Media.ContentKeyPolicyWidevineConfiguration",
              "widevineTemplate": "{\"allowed_track_types\":\"SD_HD\",\"content_key_specs\":[{\"track_type\":\"SD\",\"security_level\":1,\"required_output_protection\":{\"hdcp\":\"HDCP_V2\"}}],\"policy_overrides\":{\"can_play\":true,\"can_persist\":true,\"can_renew\":false}}"
            },
            "restriction": {
              "@odata.type": "#Microsoft.Media.ContentKeyPolicyTokenRestriction",
              "alternateVerificationKeys": [
                {
                  "@odata.type": "#Microsoft.Media.ContentKeyPolicySymmetricTokenKey",
                  "keyValue": "AAAAAAAAAAAAAAAAAAAAAA=="
                }
              ],
              "audience": "urn:audience",
              "issuer": "urn:issuer",
              "primaryVerificationKey": {
                "@odata.type": "#Microsoft.Media.ContentKeyPolicyRsaTokenKey",
                "exponent": "AQAB",
                "modulus": "AQAD"
              },
              "restrictionTokenType": "Jwt"
            }
          }
        ]
      }
    },
    "resourceGroupName": "contosorg",
    "subscriptionId": "00000000-0000-0000-0000-000000000000"
  },
  "responses": {
    "200": {
      "body": {
        "name": "PolicyWithWidevineOptionAndJwtTokenRestriction",
        "type": "Microsoft.Media/mediaservices/contentKeyPolicies",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/contosorg/providers/Microsoft.Media/mediaservices/contosomedia/contentKeyPolicies/PolicyWithWidevineOptionAndJwtTokenRestriction",
        "properties": {
          "description": "ArmPolicyDescription",
          "created": "2018-08-08T18:29:29.663Z",
          "lastModified": "2018-08-08T18:29:29.663Z",
          "options": [
            {
              "name": "widevineoption",
              "configuration": {
                "@odata.type": "#Microsoft.Media.ContentKeyPolicyWidevineConfiguration",
                "widevineTemplate": "{\"allowed_track_types\":\"SD_HD\",\"content_key_specs\":[{\"track_type\":\"SD\",\"security_level\":1,\"required_output_protection\":{\"hdcp\":\"HDCP_V2\"}}],\"policy_overrides\":{\"can_play\":true,\"can_persist\":true,\"can_renew\":false}}"
              },
              "policyOptionId": "26fee004-8dfa-4828-bcad-5e63c637534f",
              "restriction": {
                "@odata.type": "#Microsoft.Media.ContentKeyPolicyTokenRestriction",
                "alternateVerificationKeys": [
                  {
                    "@odata.type": "#Microsoft.Media.ContentKeyPolicySymmetricTokenKey",
                    "keyValue": ""
                  }
                ],
                "audience": "urn:audience",
                "issuer": "urn:issuer",
                "primaryVerificationKey": {
                  "@odata.type": "#Microsoft.Media.ContentKeyPolicyRsaTokenKey",
                  "exponent": "",
                  "modulus": ""
                },
                "requiredClaims": [],
                "restrictionTokenType": "Jwt"
              }
            }
          ],
          "policyId": "bad1d030-7d5c-4643-8f1e-49807a4bf64c"
        }
      }
    },
    "201": {
      "body": {
        "name": "PolicyWithWidevineOptionAndJwtTokenRestriction",
        "type": "Microsoft.Media/mediaservices/contentKeyPolicies",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/contosorg/providers/Microsoft.Media/mediaservices/contosomedia/contentKeyPolicies/PolicyWithWidevineOptionAndJwtTokenRestriction",
        "properties": {
          "description": "ArmPolicyDescription",
          "created": "2018-08-08T18:29:29.663Z",
          "lastModified": "2018-08-08T18:29:29.663Z",
          "options": [
            {
              "name": "widevineoption",
              "configuration": {
                "@odata.type": "#Microsoft.Media.ContentKeyPolicyWidevineConfiguration",
                "widevineTemplate": "{\"allowed_track_types\":\"SD_HD\",\"content_key_specs\":[{\"track_type\":\"SD\",\"security_level\":1,\"required_output_protection\":{\"hdcp\":\"HDCP_V2\"}}],\"policy_overrides\":{\"can_play\":true,\"can_persist\":true,\"can_renew\":false}}"
              },
              "policyOptionId": "26fee004-8dfa-4828-bcad-5e63c637534f",
              "restriction": {
                "@odata.type": "#Microsoft.Media.ContentKeyPolicyTokenRestriction",
                "alternateVerificationKeys": [
                  {
                    "@odata.type": "#Microsoft.Media.ContentKeyPolicySymmetricTokenKey",
                    "keyValue": ""
                  }
                ],
                "audience": "urn:audience",
                "issuer": "urn:issuer",
                "primaryVerificationKey": {
                  "@odata.type": "#Microsoft.Media.ContentKeyPolicyRsaTokenKey",
                  "exponent": "",
                  "modulus": ""
                },
                "requiredClaims": [],
                "restrictionTokenType": "Jwt"
              }
            }
          ],
          "policyId": "bad1d030-7d5c-4643-8f1e-49807a4bf64c"
        }
      }
    }
  },
  "operationId": "ContentKeyPolicies_CreateOrUpdate",
  "title": "Creates a Content Key Policy with Widevine option and Token Restriction"
}