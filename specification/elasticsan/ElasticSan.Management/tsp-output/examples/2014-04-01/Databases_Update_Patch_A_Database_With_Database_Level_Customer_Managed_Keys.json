{
  "parameters": {
    "api-version": "2023-02-01-preview",
    "databaseName": "testdb",
    "parameters": {
      "identity": {
        "type": "UserAssigned",
        "userAssignedIdentities": {
          "/subscriptions/00000000-1111-2222-3333-444444444444/resourcegroups/Default-SQL-SouthEastAsia/providers/Microsoft.ManagedIdentity/userAssignedIdentities/umi": {},
          "/subscriptions/00000000-1111-2222-3333-444444444444/resourcegroups/Default-SQL-SouthEastAsia/providers/Microsoft.ManagedIdentity/userAssignedIdentities/umiToDelete": null
        }
      },
      "properties": {
        "encryptionProtector": "https://your-key-vault-name.vault.azure.net/yourKey/yourKeyVersion",
        "keys": {
          "https://your-key-vault-name.vault.azure.net/yourKey/yourKeyVersion": {},
          "https://your-key-vault-name.vault.azure.net/yourKey2/yourKey2VersionToDelete": null
        }
      },
      "sku": {
        "name": "S0",
        "tier": "Standard"
      }
    },
    "resourceGroupName": "Default-SQL-SouthEastAsia",
    "serverName": "testsvr",
    "subscriptionId": "00000000-1111-2222-3333-444444444444"
  },
  "responses": {
    "200": {
      "body": {
        "name": "testdb",
        "type": "Microsoft.Sql/servers/databases",
        "id": "/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/servers/testsvr/databases/testdb",
        "kind": "v12.0,user,vcore",
        "location": "southeastasia",
        "properties": {
          "catalogCollation": "SQL_Latin1_General_CP1_CI_AS",
          "collation": "SQL_Latin1_General_CP1_CI_AS",
          "creationDate": "2017-06-07T04:41:33.937Z",
          "currentBackupStorageRedundancy": "Geo",
          "currentServiceObjectiveName": "BC_Gen4_2",
          "currentSku": {
            "name": "BC_Gen4",
            "capacity": 4,
            "tier": "BusinessCritical"
          },
          "databaseId": "6c764297-577b-470f-9af4-96d3d41e2ba3",
          "defaultSecondaryLocation": "North Europe",
          "earliestRestoreDate": "2017-06-07T04:51:33.937Z",
          "isInfraEncryptionEnabled": false,
          "isLedgerOn": false,
          "licenseType": "LicenseIncluded",
          "maxLogSizeBytes": 104857600,
          "maxSizeBytes": 1073741824,
          "readScale": "Enabled",
          "requestedBackupStorageRedundancy": "Local",
          "requestedServiceObjectiveName": "BC_Gen4_2",
          "status": "Online",
          "zoneRedundant": false
        },
        "sku": {
          "name": "BC_Gen4",
          "capacity": 4,
          "tier": "BusinessCritical"
        }
      }
    },
    "202": {
      "headers": {
        "Location": "/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/locations/southeastasia/databaseOperationResults/11111111-1111-1111-1111-111111111111"
      }
    }
  },
  "operationId": "Databases_Update",
  "title": "Patch a database with database-level customer managed keys."
}