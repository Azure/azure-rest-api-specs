{
  "swagger": "2.0",
  "info": {
    "title": "Azure Maps Geolocation Service",
    "version": "1.0",
    "description": "Azure Maps Geolocation REST APIs"
  },
  "x-ms-parameterized-host": {
    "hostTemplate": "{geography}.atlas.microsoft.com",
    "parameters": [
      {
        "$ref": "../../../Common/preview/1.0/common.json#/parameters/GeographicResourceLocation"
      }
    ]
  },
  "schemes": [
    "https"
  ],
  "consumes": [],
  "produces": [
    "application/json"
  ],
  "security": [
    {
      "azure_auth": [
        "user_impersonation"
      ]
    },
    {
      "SubscriptionKeyInHeader": []
    },
    {
      "SubscriptionKeyInQuery": []
    }
  ],
  "securityDefinitions": {
    "azure_auth": {
      "type": "oauth2",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
      "flow": "implicit",
      "description": "Azure Active Directory OAuth2 Flow",
      "scopes": {
        "user_impersonation": "impersonate your user account"
      }
    },
    "SubscriptionKeyInHeader": {
      "type": "apiKey",
      "name": "subscription-key",
      "in": "header"
    },
    "SubscriptionKeyInQuery": {
      "type": "apiKey",
      "name": "subscription-key",
      "in": "query"
    }
  },
  "responses": {},
  "paths": {
    "/geolocation/ip/{format}": {
      "get": {
        "description": "\n**Applies to**: S0 and S1 pricing tiers.\n\n\nThis service will return the ISO country code for the provided IP address. Developers can use this information  to block or alter certain content based on geographical locations where the application is being viewed from. \n\n\n__Note:__ This service returns results from IANA and does not necessarily reflect the views of Microsoft  Corporation.",
        "operationId": "Geolocation_GetIPToLocationPreview",
        "x-ms-examples": {
          "GetLocationByIpAddress": {
            "$ref": "./examples/GetLocationByIpAddress.json"
          }
        },
        "parameters": [
          {
            "$ref": "../../../Common/preview/1.0/common.json#/parameters/ClientId"
          },
          {
            "$ref": "../../../Common/preview/1.0/common.json#/parameters/SubscriptionKey"
          },
          {
            "$ref": "../../../Common/preview/1.0/common.json#/parameters/ApiVersion"
          },
          {
            "$ref": "../../../Common/preview/1.0/common.json#/parameters/ResponseFormat"
          },
          {
            "name": "ip",
            "in": "query",
            "description": "The IP address. Both IPv4 and IPv6 are allowed.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/IpAddressToLocationResult"
            }
          },
          "400": {
            "$ref": "../../../Common/preview/1.0/common.json#/responses/400"
          },
          "401": {
            "$ref": "../../../Common/preview/1.0/common.json#/responses/401"
          },
          "403": {
            "$ref": "../../../Common/preview/1.0/common.json#/responses/403"
          },
          "404": {
            "$ref": "../../../Common/preview/1.0/common.json#/responses/404"
          },
          "500": {
            "$ref": "../../../Common/preview/1.0/common.json#/responses/500"
          }
        }
      }
    }
  },
  "definitions": {
    "IpAddressToLocationResult": {
      "description": "This object is returned from a successful call to IP Address to country/region API",
      "type": "object",
      "readOnly": true,
      "properties": {
        "countryRegion": {
          "$ref": "#/definitions/CountryRegion"
        },
        "ipAddress": {
          "description": "The IP Address of the request.",
          "type": "string",
          "readOnly": true
        }
      }
    },
    "CountryRegion": {
      "description": "The object containing the country/region information.",
      "type": "object",
      "readOnly": true,
      "properties": {
        "isoCode": {
          "description": "The IP Address's 2-character code [(ISO 3166-1)](https://www.iso.org/iso-3166-country-codes.html) of the country or region as assigned by IANA and regional internet authorities. Please note, IP address in ranges reserved for special purpose will return Null for country/region.",
          "type": "string",
          "readOnly": true
        }
      }
    }
  }
}
