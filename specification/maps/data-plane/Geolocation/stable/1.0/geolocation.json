{
  "swagger": "2.0",
  "info": {
    "title": "Geolocation",
    "version": "1.0",
    "description": "Azure Maps Geolocation REST APIs",
    "x-typespec-generated": [
      {
        "emitter": "@azure-tools/typespec-autorest"
      }
    ]
  },
  "schemes": [
    "https"
  ],
  "x-ms-parameterized-host": {
    "hostTemplate": "{endpoint}",
    "useSchemePrefix": false,
    "parameters": [
      {
        "name": "endpoint",
        "in": "path",
        "required": true,
        "type": "string",
        "default": "https://atlas.microsoft.com"
      }
    ]
  },
  "produces": [
    "application/json"
  ],
  "consumes": [
    "application/json"
  ],
  "security": [
    {
      "AadOauth2Auth": [
        "https://atlas.microsoft.com/.default"
      ]
    }
  ],
  "securityDefinitions": {
    "AadOauth2Auth": {
      "type": "oauth2",
      "description": "The Azure Active Directory OAuth2 Flow",
      "flow": "accessCode",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
      "scopes": {
        "https://atlas.microsoft.com/.default": ""
      },
      "tokenUrl": "https://login.microsoftonline.com/common/oauth2/token"
    },
    "ApiKeyAuth": {
      "type": "apiKey",
      "name": "SAS Token",
      "in": "header"
    }
  },
  "tags": [],
  "paths": {
    "/geolocation/ip/{format}": {
      "get": {
        "operationId": "GeolocationOperationGroup_GetIpToLocation",
        "summary": "Use to get the ISO country/region code for a given IP address.",
        "description": "The `Get IP To Location` API is an HTTP `GET` request that returns the ISO\ncountry/region code for a given IP address. Developers can use this information\nto block or modify content based on the geographical location from which the\napplication is accessed.",
        "parameters": [
          {
            "$ref": "#/parameters/Azure.Core.Foundations.ApiVersionParameter"
          },
          {
            "name": "x-ms-client-id",
            "in": "header",
            "description": "Indicates the account intended for use with the Microsoft Entra ID security\nmodel. This unique ID for the Azure Maps account can be obtained from the\n[Azure Maps management plane Account API](/rest/api/maps-management/accounts).\nFor more information on using Microsoft Entra ID security in Azure Maps, see\n[Manage authentication in Azure\nMaps](/azure/azure-maps/how-to-manage-authentication).",
            "required": false,
            "type": "string",
            "x-ms-client-name": "clientId"
          },
          {
            "name": "format",
            "in": "path",
            "description": "Desired format of the response. Only `json` format is supported.",
            "required": true,
            "type": "string",
            "enum": [
              "json"
            ],
            "x-ms-enum": {
              "name": "JsonFormat",
              "modelAsString": true,
              "values": [
                {
                  "name": "json",
                  "value": "json",
                  "description": "[The JavaScript Object Notation Data Interchange\nFormat](https://tools.ietf.org/html/rfc8259)"
                }
              ]
            }
          },
          {
            "name": "ip",
            "in": "query",
            "description": "The IP address. Both IPv4 and IPv6 are allowed.",
            "required": true,
            "type": "string",
            "x-ms-client-name": "ipAddress"
          }
        ],
        "responses": {
          "200": {
            "description": "The request has succeeded.",
            "schema": {
              "$ref": "#/definitions/IpAddressToLocationResult"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        },
        "x-ms-examples": {
          "Successfully retrieve country/region code from IP address": {
            "$ref": "./examples/SuccessfulGetCountryCodeFromIP.json"
          }
        }
      }
    }
  },
  "definitions": {
    "CountryRegion": {
      "type": "object",
      "description": "The object containing the country/region information.",
      "properties": {
        "isoCode": {
          "type": "string",
          "description": "The IP address's 2-character country or region code ([ISO\n3166-1](https://www.iso.org/iso-3166-country-codes.html)). Note that IP\naddresses in ranges reserved for special purposes will return Null for\ncountry/region.",
          "readOnly": true
        }
      }
    },
    "ErrorAdditionalInfo": {
      "type": "object",
      "description": "The resource management error additional info.",
      "properties": {
        "type": {
          "type": "string",
          "description": "The additional info type.",
          "readOnly": true
        },
        "info": {
          "description": "The additional info.",
          "readOnly": true
        }
      }
    },
    "ErrorDetail": {
      "type": "object",
      "description": "The error detail.",
      "properties": {
        "code": {
          "type": "string",
          "description": "The error code.",
          "readOnly": true
        },
        "message": {
          "type": "string",
          "description": "The error message.",
          "readOnly": true
        },
        "target": {
          "type": "string",
          "description": "The error target.",
          "readOnly": true
        },
        "details": {
          "type": "array",
          "description": "The error details.",
          "items": {
            "$ref": "#/definitions/ErrorDetail"
          },
          "readOnly": true
        },
        "additionalInfo": {
          "type": "array",
          "description": "The error additional info.",
          "items": {
            "$ref": "#/definitions/ErrorAdditionalInfo"
          },
          "readOnly": true
        }
      }
    },
    "ErrorResponse": {
      "type": "object",
      "description": "Common error response for all Azure Resource Manager APIs to return error\ndetails for failed operations. (This also follows the OData error response\nformat.).",
      "properties": {
        "error": {
          "$ref": "#/definitions/ErrorDetail",
          "description": "The error object."
        }
      }
    },
    "IpAddressToLocationResult": {
      "type": "object",
      "description": "This object is returned from a successful call to IP Address to country/region\nAPI",
      "properties": {
        "countryRegion": {
          "$ref": "#/definitions/CountryRegion",
          "description": "The object containing the country/region information.",
          "readOnly": true
        },
        "ipAddress": {
          "type": "string",
          "description": "The IP Address of the request.",
          "readOnly": true
        }
      }
    },
    "JsonFormat": {
      "type": "string",
      "description": "Desired format of the response. Only `json` format is supported.",
      "enum": [
        "json"
      ],
      "x-ms-enum": {
        "name": "JsonFormat",
        "modelAsString": true,
        "values": [
          {
            "name": "json",
            "value": "json",
            "description": "[The JavaScript Object Notation Data Interchange\nFormat](https://tools.ietf.org/html/rfc8259)"
          }
        ]
      }
    }
  },
  "parameters": {
    "Azure.Core.Foundations.ApiVersionParameter": {
      "name": "api-version",
      "in": "query",
      "description": "The API version to use for this operation.",
      "required": true,
      "type": "string",
      "minLength": 1,
      "x-ms-parameter-location": "method",
      "x-ms-client-name": "apiVersion"
    }
  }
}