{
  "parameters": {
    "api-version": "2022-09-01-preview",
    "subscriptionId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "resourceGroupName": "rg",
    "accountName": "sampleAccount",
    "body": {
      "location": "West US",
      "tags": {
        "Environment": "Prod"
      },
      "properties": {
        "configuration": "Capacity",
        "endpointAuthentications": [
          {
            "aadTenantID": "tenant",
            "principalID": "oid",
            "principalType": "User"
          }
        ],
        "encryption": {
          "customerManagedKeyEncryption": {
            "keyEncryptionKeyIdentity": {
              "identityType": "userAssignedIdentity",
              "userAssignedIdentityResourceId": "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userAssignedIdentity"
            },
            "keyEncryptionKeyUrl": "https://contosovault.vault.azure.net/keys/contosokek/562a4bb76b524a1493a6afe8e536ee78"
          }
        }
      },
      "identity": {
        "type": "UserAssigned",
        "userAssignedIdentities": {
          "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userAssignedIdentity": {}
        }
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/rg/providers/Microsoft.RecommendationsService/accounts/sampleAccount",
        "name": "sampleAccount",
        "type": "Microsoft.RecommendationsService/accounts",
        "location": "West US",
        "tags": {
          "Environment": "Prod"
        },
        "systemData": {},
        "properties": {
          "configuration": "Capacity",
          "endpointAuthentications": [
            {
              "aadTenantID": "tenant",
              "principalID": "oid",
              "principalType": "User"
            }
          ],
          "encryption": {
            "customerManagedKeyEncryption": {
              "keyEncryptionKeyIdentity": {
                "identityType": "userAssignedIdentity",
                "userAssignedIdentityResourceId": "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userAssignedIdentity"
              },
              "keyEncryptionKeyUrl": "https://contosovault.vault.azure.net/keys/contosokek/562a4bb76b524a1493a6afe8e536ee78"
            }
          },
          "provisioningState": "Succeeded"
        },
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userAssignedIdentity": {
              "principalId": "02f32674-4184-485f-8e03-8d05fc6acd9a",
              "clientId": "ea55d893-56a7-4266-b250-93273eeac60c"
            }
          }
        }
      }
    },
    "201": {
      "headers": {
        "Azure-AsyncOperation": "https://management.azure.com/providers/Microsoft.RecommendationsService/locations/westus/operationStatuses/ed5d502c-acaa-42ec-ad61-0d8488a9fd1d"
      },
      "body": {
        "id": "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/rg/providers/Microsoft.RecommendationsService/accounts/sampleAccount",
        "name": "sampleAccount",
        "type": "Microsoft.RecommendationsService/accounts",
        "location": "West US",
        "tags": {
          "Environment": "Prod"
        },
        "systemData": {},
        "properties": {
          "configuration": "Capacity",
          "endpointAuthentications": [
            {
              "aadTenantID": "tenant",
              "principalID": "oid",
              "principalType": "User"
            }
          ],
          "encryption": {
            "customerManagedKeyEncryption": {
              "keyEncryptionKeyIdentity": {
                "identityType": "userAssignedIdentity",
                "userAssignedIdentityResourceId": "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userAssignedIdentity"
              },
              "keyEncryptionKeyUrl": "https://contosovault.vault.azure.net/keys/contosokek/562a4bb76b524a1493a6afe8e536ee78"
            }
          },
          "provisioningState": "Accepted"
        },
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userAssignedIdentity": {
              "principalId": "02f32674-4184-485f-8e03-8d05fc6acd9a",
              "clientId": "ea55d893-56a7-4266-b250-93273eeac60c"
            }
          }
        }
      }
    }
  }
}
