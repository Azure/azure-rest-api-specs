{
  "parameters": {
    "api-version": "2022-04-30-preview",
    "subscriptionId": "{subscription-id}",
    "resourceGroupName": "myResGroup",
    "instanceName": "myInstace",
    "MonitoringInstance": {
      "location": "eastus2",
      "properties": {
        "productVersion": "2019",
        "vNetSubnetId": "/subscriptions/{subscription-id}/resourceGroups/mySCOMMIGroup/providers/Microsoft.Network/virtualNetworks/vNet2/subnets/default",
        "databaseInstance": {
          "databaseInstanceId": "/subscriptions/{subscription-id}/resourceGroups/mySCOMMIGroup/providers/Microsoft.sql/managedInstances/inst1"
        },
        "domainController": {
          "domainName": "domain.com",
          "dnsServer": "10.10.10.10"
        },
        "domainUserCredentials": {
          "userName": "domain.com\\domainuser"
        },
        "azureHybridBenefit": {
          "scomLicenseType": "None",
          "windowsServerLicenseType": "None",
          "sqlServerLicenseType": "None"
        }
      },
      "identity": {
        "type": "UserAssigned",
        "userAssignedIdentities": {
          "/subscriptions/subid/resourceGroups/mySCOMMIGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {}
        }
      },
      "tags": {}
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/{subscription-id}/resourceGroups/mySCOMMIGroup/providers/Microsoft.SCOM/managedInstances/myManagedInstace",
        "name": "myInstace",
        "type": "Microsoft.SCOM/managedInstances",
        "location": "eastus2",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/subid/resourceGroups/mySCOMMIGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {
              "principalId": "principalId1",
              "clientId": "clientId1"
            }
          }
        },
        "properties": {
          "productVersion": "2019",
          "vNetSubnetId": "/subscriptions/{subscription-id}/resourceGroups/mySCOMMIGroup/providers/Microsoft.Network/virtualNetworks/vNet2/subnets/default",
          "databaseInstance": {
            "databaseInstanceId": "/subscriptions/{subscription-id}/resourceGroups/mySCOMMIGroup/providers/Microsoft.sql/managedInstances/inst1"
          },
          "domainController": {
            "domainName": "domain.com",
            "dnsServer": "10.10.10.10"
          },
          "domainUserCredentials": {
            "userName": "domain.com\\domainuser"
          },
          "azureHybridBenefit": {
            "scomLicenseType": "None",
            "windowsServerLicenseType": "None",
            "sqlServerLicenseType": "None"
          }
        }
      }
    },
    "201": {
      "body": {
        "id": "/subscriptions/{subscription-id}/resourceGroups/mySCOMMIGroup/providers/Microsoft.SCOM/managedInstances/myManagedInstace",
        "name": "myInstace",
        "type": "Microsoft.SCOM/managedInstances",
        "location": "eastus2",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/subid/resourceGroups/mySCOMMIGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {
              "principalId": "principalId1",
              "clientId": "clientId1"
            }
          }
        },
        "properties": {
          "productVersion": "2019",
          "vNetSubnetId": "/subscriptions/{subscription-id}/resourceGroups/mySCOMMIGroup/providers/Microsoft.Network/virtualNetworks/vNet2/subnets/default",
          "databaseInstance": {
            "databaseInstanceId": "/subscriptions/{subscription-id}/resourceGroups/mySCOMMIGroup/providers/Microsoft.sql/managedInstances/inst1"
          },
          "domainController": {
            "domainName": "domain.com",
            "dnsServer": "10.10.10.10"
          },
          "domainUserCredentials": {
            "userName": "domain.com\\domainuser"
          },
          "azureHybridBenefit": {
            "scomLicenseType": "None",
            "windowsServerLicenseType": "None",
            "sqlServerLicenseType": "None"
          }
        }
      }
    }
  }
}
