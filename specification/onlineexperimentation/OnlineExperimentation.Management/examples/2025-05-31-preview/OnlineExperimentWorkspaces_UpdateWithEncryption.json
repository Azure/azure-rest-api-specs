{
  "operationId": "OnlineExperimentWorkspaces_Update",
  "title": "Update an Online Experiment Workspace with customer managed encryption key.",
  "parameters": {
    "subscriptionId": "fa5fc227-a624-475e-b696-cdd604c735bc",
    "resourceGroupName": "res9871",
    "workspaceName": "expworkspace3",
    "api-version": "2025-05-31-preview",
    "properties": {
      "tags": {
        "newKey": "newVal"
      },
      "identity": {
        "type": "UserAssigned",
        "userAssignedIdentities": {
          "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/eu2cgroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {},
          "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/eu2cgroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id2": {}
        }
      },
      "properties": {
        "logAnalyticsWorkspaceResourceId": "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/res9871/providers/Microsoft.OperationalInsights/workspaces/log9871",
        "logsExporterStorageAccountResourceId": "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/res9871/providers/Microsoft.Storage/storageAccounts/sto9871",
        "encryption": {
          "customerManagedKeyEncryption": {
            "keyEncryptionKeyIdentity": {
              "identityType": "UserAssignedIdentity",
              "userAssignedIdentityResourceId": "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/eu2cgroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1"
            },
            "keyEncryptionKeyUrl": "https://contosovault.vault.azure.net/keys/contosokek"
          }
        }
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/res9871/providers/Microsoft.OnlineExperimentation/workspaces/expworkspace3",
        "name": "expworkspace3",
        "type": "Microsoft.OnlineExperimentation/workspaces",
        "location": "westus2",
        "tags": {
          "supportTeam": "someteam@microsoft.com",
          "newKey": "newVal"
        },
        "properties": {
          "workspaceId": "02270d43-f68a-401b-b526-86942525c350",
          "provisioningState": "Succeeded",
          "logAnalyticsWorkspaceResourceId": "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/res9871/providers/Microsoft.OperationalInsights/workspaces/log9871",
          "logsExporterStorageAccountResourceId": "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/res9871/providers/Microsoft.Storage/storageAccounts/sto9871",
          "appConfigurationResourceId": "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/res9871/providers/Microsoft.AppConfiguration/configurationStores/appconfig9871",
          "encryption": {
            "customerManagedKeyEncryption": {
              "keyEncryptionKeyIdentity": {
                "identityType": "UserAssignedIdentity",
                "userAssignedIdentityResourceId": "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/eu2cgroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1"
              },
              "keyEncryptionKeyUrl": "https://contosovault.vault.azure.net/keys/contosokek"
            }
          },
          "endpoint": "https://expworkspace3.westus2.exp.azure.net"
        },
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/eu2cgroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {
              "clientId": "fbe75b66-01c5-4f87-a220-233af3270436",
              "principalId": "075a0ca6-43f6-4434-9abf-c9b1b79f9219"
            },
            "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/eu2cgroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id2": {
              "clientId": "47429305-c0d3-40bc-8595-61946c4df3dc",
              "principalId": "bf9ebbc8-b92d-4752-8e66-c999000326e0"
            }
          }
        },
        "sku": {
          "name": "F0",
          "tier": "Free"
        }
      }
    },
    "202": {
      "headers": {
        "Azure-AsyncOperation": "https://management.azure.com/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/providers/Microsoft.OnlineExperimentation/locations/WestUS2/operationStatuses/02270d43-f68a-401b-b526-86942525c350?api-version=2025-05-31-preview",
        "location": "https://management.azure.com/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/providers/Microsoft.OnlineExperimentation/workspaces/expworkspace3?api-version=2025-05-31-preview"
      }
    }
  }
}
