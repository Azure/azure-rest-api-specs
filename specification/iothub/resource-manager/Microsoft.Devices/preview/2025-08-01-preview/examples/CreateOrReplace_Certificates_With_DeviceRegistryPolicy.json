{
  "title": "CreateOrReplace_Certificates_With_DeviceRegistryPolicy",
  "operationId": "Certificates_CreateOrUpdate",
  "description": "Create an IoT Hub with Device Registry properties",
  "parameters": {
    "resourceName": "testHub",
    "resourceGroupName": "myResourceGroup",
    "api-version": "2025-08-01-preview",
    "subscriptionId": "91d12660-3dec-467a-be2a-213b5544ddc0",
    "certificateName": "cert",
    "certificateDescription": {
      "properties": {
        "certificate": "############################################"
      }
    }
  },
  "responses": {
    "201": {
      "body": {
        "properties": {
          "subject": "CN=testdevice1",
          "expiry": "Sat, 31 Dec 2039 23:59:59 GMT",
          "thumbprint": "97388663832D0393C9246CAB4FBA2C8677185A25",
          "isVerified": false,
          "created": "Thu, 12 Oct 2017 19:23:50 GMT",
          "updated": "Thu, 12 Oct 2017 19:23:50 GMT",
          "certificate": "############################################",
          "policyResourceId": "/subscriptions/91d12660-3dec-467a-be2a-213b5544ddc0/resourceGroups/myResourceGroup/providers/Microsoft.DeviceRegistry/namespaces/testNamespace/credentials/default/policies/default"
        },
        "id": "/subscriptions/91d12660-3dec-467a-be2a-213b5544ddc0/resourceGroups/myResourceGroup/providers/Microsoft.Devices/IotHubs/testHub/certificates/cert",
        "name": "cert",
        "type": "Microsoft.Devices/IotHubs/Certificates",
        "etag": "AAAAAAExpNs="
      }
    },
    "200": {
      "body": {
        "properties": {
          "subject": "CN=testdevice1",
          "expiry": "Sat, 31 Dec 2039 23:59:59 GMT",
          "thumbprint": "97388663832D0393C9246CAB4FBA2C8677185A25",
          "isVerified": false,
          "created": "Thu, 12 Oct 2017 19:23:50 GMT",
          "updated": "Thu, 12 Oct 2017 19:23:50 GMT",
          "certificate": "############################################",
          "policyResourceId": "/subscriptions/91d12660-3dec-467a-be2a-213b5544ddc0/resourceGroups/myResourceGroup/providers/Microsoft.DeviceRegistry/namespaces/testNamespace/credentials/default/policies/default"
        },
        "id": "/subscriptions/91d12660-3dec-467a-be2a-213b5544ddc0/resourceGroups/myResourceGroup/providers/Microsoft.Devices/IotHubs/testHub/certificates/cert",
        "name": "cert",
        "type": "Microsoft.Devices/IotHubs/Certificates",
        "etag": "AAAAAAExpNs="
      }
    }
  }
}
