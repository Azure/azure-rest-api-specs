scope: ResourceGroup
testScenarios:
  - description: test_private_endpoint_connection_digitaltwins
    steps:
      - step: RawStep_3159
        method: POST
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2020-10-01
        requestBody: "{\"properties\": {\"parameters\": {\"name\": {\"value\": \"cli-test-dt-000002\"}, \"location\": {\"value\": \"eastus\"}}, \"mode\": \"Incremental\", template:{\r\n    \"$schema\": \"http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json#\",\r\n    \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"name\": {\r\n            \"type\": \"string\"\r\n        },\r\n        \"location\": {\r\n            \"type\": \"string\"\r\n        }\r\n    },\r\n    \"resources\": [\r\n        {\r\n            \"apiVersion\": \"2020-12-01\",\r\n            \"name\": \"[parameters('name')]\",\r\n            \"location\": \"[parameters('location')]\",\r\n            \"type\": \"Microsoft.DigitalTwins/digitalTwinsInstances\",\r\n            \"properties\": {}\r\n        }\r\n    ]\r\n}}}"
        requestHeaders:
          cache-control: no-cache
          content-length: '1043'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:24:26 GMT
          expires: '-1'
          pragma: no-cache
          strict-transport-security: max-age=31536000; includeSubDomains
          transfer-encoding: chunked
          vary: Accept-Encoding
          x-content-type-options: nosniff
          x-ms-ratelimit-remaining-subscription-writes: '1197'
        responseExpected: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Resources/deployments/cli-test-dt-plr-000003","name":"cli-test-dt-plr-000003","type":"Microsoft.Resources/deployments","properties":{"templateHash":"2085539939727727213","parameters":{"name":{"type":"String","value":"cli-test-dt-000002"},"location":{"type":"String","value":"eastus"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2021-02-24T12:24:26.8939986Z","duration":"PT0S","correlationId":"857a63ee-1f79-4b00-9c28-2e887b2112cd","providers":[{"namespace":"Microsoft.DigitalTwins","resourceTypes":[{"resourceType":"digitalTwinsInstances","locations":["eastus"]}]}],"dependencies":[],"validatedResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002"}]}}
      - step: RawStep_3160
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2020-10-01
        requestBody: "{\"properties\": {\"parameters\": {\"name\": {\"value\": \"cli-test-dt-000002\"}, \"location\": {\"value\": \"eastus\"}}, \"mode\": \"Incremental\", template:{\r\n    \"$schema\": \"http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json#\",\r\n    \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"name\": {\r\n            \"type\": \"string\"\r\n        },\r\n        \"location\": {\r\n            \"type\": \"string\"\r\n        }\r\n    },\r\n    \"resources\": [\r\n        {\r\n            \"apiVersion\": \"2020-12-01\",\r\n            \"name\": \"[parameters('name')]\",\r\n            \"location\": \"[parameters('location')]\",\r\n            \"type\": \"Microsoft.DigitalTwins/digitalTwinsInstances\",\r\n            \"properties\": {}\r\n        }\r\n    ]\r\n}}}"
        requestHeaders:
          azure-asyncoperation: >-
            https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Resources/deployments/cli-test-dt-plr-000003/operationStatuses/08585874374167845507?api-version=2020-10-01
          cache-control: no-cache
          content-length: '794'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:24:32 GMT
          expires: '-1'
          pragma: no-cache
          strict-transport-security: max-age=31536000; includeSubDomains
          x-content-type-options: nosniff
          x-ms-ratelimit-remaining-subscription-writes: '1171'
        statusCode: 201
        responseExpected: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Resources/deployments/cli-test-dt-plr-000003","name":"cli-test-dt-plr-000003","type":"Microsoft.Resources/deployments","properties":{"templateHash":"2085539939727727213","parameters":{"name":{"type":"String","value":"cli-test-dt-000002"},"location":{"type":"String","value":"eastus"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2021-02-24T12:24:30.7995931Z","duration":"PT2.106532S","correlationId":"cdb5b6f6-024a-45ae-a2c7-be9c4014a3ce","providers":[{"namespace":"Microsoft.DigitalTwins","resourceTypes":[{"resourceType":"digitalTwinsInstances","locations":["eastus"]}]}],"dependencies":[]}}
      - step: RawStep_3161
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585874374167845507?api-version=2020-10-01
        requestHeaders:
          cache-control: no-cache
          content-length: '22'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:25:02 GMT
          expires: '-1'
          pragma: no-cache
          strict-transport-security: max-age=31536000; includeSubDomains
          vary: Accept-Encoding
          x-content-type-options: nosniff
        responseExpected: '{"status":"Succeeded"}'
      - step: RawStep_3162
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2020-10-01
        requestHeaders:
          cache-control: no-cache
          content-length: '1048'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:25:03 GMT
          expires: '-1'
          pragma: no-cache
          strict-transport-security: max-age=31536000; includeSubDomains
          vary: Accept-Encoding
          x-content-type-options: nosniff
        responseExpected: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Resources/deployments/cli-test-dt-plr-000003","name":"cli-test-dt-plr-000003","type":"Microsoft.Resources/deployments","properties":{"templateHash":"2085539939727727213","parameters":{"name":{"type":"String","value":"cli-test-dt-000002"},"location":{"type":"String","value":"eastus"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2021-02-24T12:24:50.9549451Z","duration":"PT22.261884S","correlationId":"cdb5b6f6-024a-45ae-a2c7-be9c4014a3ce","providers":[{"namespace":"Microsoft.DigitalTwins","resourceTypes":[{"resourceType":"digitalTwinsInstances","locations":["eastus"]}]}],"dependencies":[],"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002"}]}}
      - step: RawStep_3163
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateLinkResources?api-version=2020-12-01
        requestHeaders:
          cache-control: no-cache
          content-length: '484'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:25:05 GMT
          expires: '-1'
          pragma: no-cache
          server: Kestrel
          strict-transport-security: max-age=31536000; includeSubDomains
          traceresponse: 00-3fdf8b97807676419cee4afd1ab8a8fc-4ea3bc80e95f2d4c-01
          transfer-encoding: chunked
          vary: Accept-Encoding
          x-content-type-options: nosniff
        responseExpected: >-
          {"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateLinkResources/API","name":"API","type":"Microsoft.DigitalTwins/digitalTwinsInstances/privateLinkResources","properties":{"groupId":"API","requiredMembers":["DigitalTwinsAPI"],"requiredZoneNames":["privatelink.digitaltwins.azure.net"]}}]}
      - step: RawStep_3164
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/test_digital_twin_private_endpoint_000001?api-version=2020-10-01
        requestHeaders:
          cache-control: no-cache
          content-length: '428'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:25:06 GMT
          expires: '-1'
          pragma: no-cache
          strict-transport-security: max-age=31536000; includeSubDomains
          vary: Accept-Encoding
          x-content-type-options: nosniff
        responseExpected: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001","name":"test_digital_twin_private_endpoint_000001","type":"Microsoft.Resources/resourceGroups","location":"eastus","tags":{"product":"azurecli","cause":"automation","date":"2021-02-24T12:24:22Z"},"properties":{"provisioningState":"Succeeded"}}
      - step: Create_virtualNetworks_cli-vnet-000004
        resourceName: virtualNetworks_cli-vnet-000004
        exampleFile: ../examples/Create_virtualNetworks_cli-vnet-000004_Generated.json
        operationId: VirtualNetworks_CreateOrUpdate
      - step: Subnets_Get_3166
        exampleFile: ../examples/Subnets_Get_4_Generated.json
        operationId: Subnets_Get
      - step: Create_subnets_cli-subnet-000005
        resourceName: subnets_cli-subnet-000005
        exampleFile: >-
          ../examples/Create_subnets_appgw_private_endpoint_subnet_Generated.json
        operationId: Subnets_CreateOrUpdate
      - step: RawStep_3168
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/test_digital_twin_private_endpoint_000001?api-version=2020-10-01
        requestHeaders:
          cache-control: no-cache
          content-length: '428'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:25:25 GMT
          expires: '-1'
          pragma: no-cache
          strict-transport-security: max-age=31536000; includeSubDomains
          vary: Accept-Encoding
          x-content-type-options: nosniff
        responseExpected: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001","name":"test_digital_twin_private_endpoint_000001","type":"Microsoft.Resources/resourceGroups","location":"eastus","tags":{"product":"azurecli","cause":"automation","date":"2021-02-24T12:24:22Z"},"properties":{"provisioningState":"Succeeded"}}
      - step: Create_privateEndpoints_cli-pe-000006
        resourceName: privateEndpoints_cli-pe-000006
        exampleFile: ../examples/Create_privateEndpoints_cli-pe-000006_Generated_3170.json
        operationId: PrivateEndpoints_CreateOrUpdate
      - step: RawStep_3171
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections?api-version=2020-12-01
        requestHeaders:
          cache-control: no-cache
          content-length: '841'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:25:46 GMT
          expires: '-1'
          pragma: no-cache
          server: Kestrel
          strict-transport-security: max-age=31536000; includeSubDomains
          traceresponse: 00-01939946c739274a9bd46e3c65ca949b-756bf0f794875b45-01
          transfer-encoding: chunked
          vary: Accept-Encoding
          x-content-type-options: nosniff
        responseExpected: >-
          {"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434","name":"d090b271-8eaa-4f90-a82e-32245e197434","type":"Microsoft.DigitalTwins/digitalTwinsInstances/privateEndpointConnections","properties":{"provisioningState":"Succeeded","privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"groupIds":["API"],"privateLinkServiceConnectionState":{"status":"Pending","description":null,"actionsRequired":"None"}}}]}
      - step: RawStep_3172
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434?api-version=2020-12-01
        requestHeaders:
          cache-control: no-cache
          content-length: '829'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:25:46 GMT
          expires: '-1'
          pragma: no-cache
          server: Kestrel
          strict-transport-security: max-age=31536000; includeSubDomains
          traceresponse: 00-ebbd2297f4874e4eb40c498b76b941f3-aca0a4b1b1f7aa45-01
          transfer-encoding: chunked
          vary: Accept-Encoding
          x-content-type-options: nosniff
        responseExpected: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434","name":"d090b271-8eaa-4f90-a82e-32245e197434","type":"Microsoft.DigitalTwins/digitalTwinsInstances/privateEndpointConnections","properties":{"provisioningState":"Succeeded","privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"groupIds":["API"],"privateLinkServiceConnectionState":{"status":"Pending","description":null,"actionsRequired":"None"}}}
      - step: RawStep_3173
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434?api-version=2020-12-01
        requestHeaders:
          cache-control: no-cache
          content-length: '829'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:25:48 GMT
          expires: '-1'
          pragma: no-cache
          server: Kestrel
          strict-transport-security: max-age=31536000; includeSubDomains
          traceresponse: 00-6031b4eaab814342bd9acbe388c4a7b8-5ea6b37f58d5444b-01
          transfer-encoding: chunked
          vary: Accept-Encoding
          x-content-type-options: nosniff
        responseExpected: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434","name":"d090b271-8eaa-4f90-a82e-32245e197434","type":"Microsoft.DigitalTwins/digitalTwinsInstances/privateEndpointConnections","properties":{"provisioningState":"Succeeded","privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"groupIds":["API"],"privateLinkServiceConnectionState":{"status":"Pending","description":null,"actionsRequired":"None"}}}
      - step: RawStep_3174
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434?api-version=2020-12-01
        requestHeaders:
          cache-control: no-cache
          content-length: '829'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:25:49 GMT
          expires: '-1'
          pragma: no-cache
          server: Kestrel
          strict-transport-security: max-age=31536000; includeSubDomains
          traceresponse: 00-41fd2855b9b7584b991ded2eb4ce0d68-9e3179e82ba25e4f-01
          transfer-encoding: chunked
          vary: Accept-Encoding
          x-content-type-options: nosniff
        responseExpected: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434","name":"d090b271-8eaa-4f90-a82e-32245e197434","type":"Microsoft.DigitalTwins/digitalTwinsInstances/privateEndpointConnections","properties":{"provisioningState":"Succeeded","privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"groupIds":["API"],"privateLinkServiceConnectionState":{"status":"Pending","description":null,"actionsRequired":"None"}}}
      - step: RawStep_3175
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434?api-version=2020-12-01
        requestBody: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434","name":"d090b271-8eaa-4f90-a82e-32245e197434","type":"Microsoft.DigitalTwins/digitalTwinsInstances/privateEndpointConnections","properties":{"provisioningState":"Succeeded","privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"groupIds":["API"],"privateLinkServiceConnectionState":{"status":"Approved","description":"Approved.","actionsRequired":"None"}}}
        requestHeaders:
          azure-asyncoperation: >-
            https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434/operationResults/d7fa70d0-009a-4fb3-80ec-9d77cae4c019?api-version=2020-12-01
          cache-control: no-cache
          content-length: '836'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:25:51 GMT
          expires: '-1'
          location: >-
            https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.DigitalTwins/locations//operationResults/eyJvcGVyYXRpb25LaW5kIjoiQ3JlYXRlIiwicmVzb3VyY2VLaW5kIjoiUHJpdmF0ZUVuZHBvaW50Q29ubmVjdGlvbiIsInJlc291cmNlR3JvdXBOYW1lIjoidGVzdF9kaWdpdGFsX3R3aW5fcHJpdmF0ZV9lbmRwb2ludF8zdmF1c212Z3dxYW12eW8zemZkaGZlbDdhd20yYWd5bW9xc2Rzazd3IiwicmVzb3VyY2VOYW1lIjoiY2xpLXRlc3QtZHQtaHZqbDNmbDRyNmNnIiwibmVzdGVkUmVzb3VyY2VOYW1lIjoiZDA5MGIyNzEtOGVhYS00ZjkwLWE4MmUtMzIyNDVlMTk3NDM0In0=?api-version=2020-12-01
          pragma: no-cache
          server: Kestrel
          strict-transport-security: max-age=31536000; includeSubDomains
          traceresponse: 00-5f066671471ee44385b76fd01e24084d-4a402d094d76e746-01
          x-content-type-options: nosniff
          x-ms-ratelimit-remaining-subscription-writes: '1170'
        statusCode: 202
        responseExpected: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434","name":"d090b271-8eaa-4f90-a82e-32245e197434","type":"Microsoft.DigitalTwins/digitalTwinsInstances/privateEndpointConnections","properties":{"provisioningState":"Updating","privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"groupIds":["API"],"privateLinkServiceConnectionState":{"status":"Approved","description":"Approved.","actionsRequired":"None"}}}
      - step: RawStep_3176
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434?api-version=2020-12-01
        requestBody: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434","name":"d090b271-8eaa-4f90-a82e-32245e197434","type":"Microsoft.DigitalTwins/digitalTwinsInstances/privateEndpointConnections","properties":{"provisioningState":"Succeeded","privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"groupIds":["API"],"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejected.","actionsRequired":"None"}}}
        requestHeaders:
          azure-asyncoperation: >-
            https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434/operationResults/36b981d7-eebe-41c0-b1bd-540f8f2c94db?api-version=2020-12-01
          cache-control: no-cache
          content-length: '836'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:26:17 GMT
          expires: '-1'
          location: >-
            https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.DigitalTwins/locations//operationResults/eyJvcGVyYXRpb25LaW5kIjoiQ3JlYXRlIiwicmVzb3VyY2VLaW5kIjoiUHJpdmF0ZUVuZHBvaW50Q29ubmVjdGlvbiIsInJlc291cmNlR3JvdXBOYW1lIjoidGVzdF9kaWdpdGFsX3R3aW5fcHJpdmF0ZV9lbmRwb2ludF8zdmF1c212Z3dxYW12eW8zemZkaGZlbDdhd20yYWd5bW9xc2Rzazd3IiwicmVzb3VyY2VOYW1lIjoiY2xpLXRlc3QtZHQtaHZqbDNmbDRyNmNnIiwibmVzdGVkUmVzb3VyY2VOYW1lIjoiZDA5MGIyNzEtOGVhYS00ZjkwLWE4MmUtMzIyNDVlMTk3NDM0In0=?api-version=2020-12-01
          pragma: no-cache
          server: Kestrel
          strict-transport-security: max-age=31536000; includeSubDomains
          traceresponse: 00-a8b3c821a8de5c429bd059e5fa06e996-d1b3f152fcf97b47-01
          x-content-type-options: nosniff
          x-ms-ratelimit-remaining-subscription-writes: '1169'
        statusCode: 202
        responseExpected: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434","name":"d090b271-8eaa-4f90-a82e-32245e197434","type":"Microsoft.DigitalTwins/digitalTwinsInstances/privateEndpointConnections","properties":{"provisioningState":"Updating","privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"groupIds":["API"],"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejected.","actionsRequired":"None"}}}
      - step: RawStep_3177
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434?api-version=2020-12-01
        requestBody: >-
          {"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434","name":"d090b271-8eaa-4f90-a82e-32245e197434","type":"Microsoft.DigitalTwins/digitalTwinsInstances/privateEndpointConnections","properties":{"provisioningState":"Succeeded","privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"groupIds":["API"],"privateLinkServiceConnectionState":{"status":"Approved","description":"Approved.","actionsRequired":"None"}}}
        requestHeaders:
          cache-control: no-cache
          content-length: '172'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:26:30 GMT
          expires: '-1'
          pragma: no-cache
          server: Kestrel
          strict-transport-security: max-age=31536000; includeSubDomains
          traceresponse: 00-1a81f1e6f46ddd4389b3d2c27b15fd76-3d7b99b6da0a7840-01
          x-content-type-options: nosniff
          x-ms-ratelimit-remaining-subscription-writes: '1161'
        statusCode: 400
        responseExpected: >-
          {"error":{"code":"BadRequest","message":"Exception of type
          'Microsoft.Azure.DigitalTwins.ScaleUnitRPManagement.Exceptions.PrivateEndpointBadRequestException'
          was thrown."}}
      - step: RawStep_3178
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections?api-version=2020-12-01
        requestHeaders:
          cache-control: no-cache
          content-length: '849'
          content-type: application/json; charset=utf-8
          date: Wed, 24 Feb 2021 12:26:31 GMT
          expires: '-1'
          pragma: no-cache
          server: Kestrel
          strict-transport-security: max-age=31536000; includeSubDomains
          traceresponse: 00-6254a5a27c7734499db2621837a3039e-84f20f4b78c5b048-01
          transfer-encoding: chunked
          vary: Accept-Encoding
          x-content-type-options: nosniff
        responseExpected: >-
          {"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434","name":"d090b271-8eaa-4f90-a82e-32245e197434","type":"Microsoft.DigitalTwins/digitalTwinsInstances/privateEndpointConnections","properties":{"provisioningState":"Succeeded","privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"groupIds":["API"],"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejected.","actionsRequired":"None"}}}]}
      - step: RawStep_3179
        method: DELETE
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434?api-version=2020-12-01
        requestHeaders:
          azure-asyncoperation: >-
            https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_digital_twin_private_endpoint_000001/providers/Microsoft.DigitalTwins/digitalTwinsInstances/cli-test-dt-000002/privateEndpointConnections/d090b271-8eaa-4f90-a82e-32245e197434/operationResults/1008eca3-1110-4311-beeb-5b447ce9706d?api-version=2020-12-01
          cache-control: no-cache
          content-length: '0'
          date: Wed, 24 Feb 2021 12:26:32 GMT
          expires: '-1'
          location: >-
            https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.DigitalTwins/locations//operationResults/eyJvcGVyYXRpb25LaW5kIjoiRGVsZXRlIiwicmVzb3VyY2VLaW5kIjoiUHJpdmF0ZUVuZHBvaW50Q29ubmVjdGlvbiIsInJlc291cmNlR3JvdXBOYW1lIjoidGVzdF9kaWdpdGFsX3R3aW5fcHJpdmF0ZV9lbmRwb2ludF8zdmF1c212Z3dxYW12eW8zemZkaGZlbDdhd20yYWd5bW9xc2Rzazd3IiwicmVzb3VyY2VOYW1lIjoiY2xpLXRlc3QtZHQtaHZqbDNmbDRyNmNnIiwibmVzdGVkUmVzb3VyY2VOYW1lIjoiZDA5MGIyNzEtOGVhYS00ZjkwLWE4MmUtMzIyNDVlMTk3NDM0In0=?api-version=2020-12-01
          pragma: no-cache
          server: Kestrel
          strict-transport-security: max-age=31536000; includeSubDomains
          traceresponse: 00-0931a814fecf13469ba5b5eff1a56009-39a3b87109b2594d-01
          x-content-type-options: nosniff
          x-ms-ratelimit-remaining-subscription-deletes: '14989'
        statusCode: 202
    variables:
      virtualNetworkName: cli-vnet-000004
      subnetName: cli-subnet-000005
      privateEndpointName: cli-pe-000006
