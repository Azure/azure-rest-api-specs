{
  "title": "Create/Update Azure Virtual Network Manager Connectivity Configuration",
  "parameters": {
    "api-version": "2020-08-01",
    "subscriptionId": "subscriptionA",
    "resourceGroupName": "myResourceGroup",
    "networkManagerName": "testNetworkManager",
    "configurationName": "myTestConnectivityConfig",
    "connectivityConfiguration": {
      "properties": {
        "displayName": "myTestConnectivityConfig",
        "description": "Sample Configuration",
        "connectivityTopology": "HubAndSpokeTopology",
        "hubId": "subscriptions/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/virtualNetworks/myTestConnectivityConfig",
        "deleteExistingPeering": true,
        "isGlobal": true,
        "appliesToGroups": [
          {
            "networkGroupId": "subscriptions/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/networkManagers/testNetworkManager/networkManagerGroups/group1",
            "useHubGateway": true,
            "groupConnectivity": "Transitive",
            "isGlobal": false
          }
        ]
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "name": "myTestConnectivityConfig",
        "id": "subscriptions/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/networkManagers/testNetworkManager/connectivityConfigurations/myTestConnectivityConfig",
        "type": "Microsoft.Network/networkManagers/connectivityConfigurations",
        "etag": "asdf-asdf-asdf2",
        "properties": {
          "description": "Sample Connectivity Configuration",
          "connectivityTopology": "HubAndSpokeTopology",
          "hubId": "subscriptions/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/virtualNetworks/myTestConnectivityConfig",
          "deleteExistingPeering": true,
          "isGlobal": true,
          "appliesToGroups": [
            {
              "networkGroupId": "subscriptions/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/networkManagers/testNetworkManager/groups/group1",
              "useHubGateway": true,
              "groupConnectivity": "Transitive",
              "isGlobal": false
            }
          ],
          "provisioningState": "Succeeded"
        }
      }
    },
    "201": {
      "body": {
        "name": "myTestConnectivityConfig",
        "id": "subscriptions/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/networkManagers/testNetworkManager/connectivityConfigurations/myTestConnectivityConfig",
        "type": "Microsoft.Network/networkManagers/connectivityConfigurations",
        "etag": "asdf-asdf-asdf2",
        "properties": {
          "displayName": "myTestConnectivityConfig",
          "description": "Sample Configuration",
          "connectivityTopology": "HubAndSpokeTopology",
          "hubId": "subscriptions/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/virtualNetworks/myHubVnet",
          "deleteExistingPeering": true,
          "isGlobal": true,
          "appliesToGroups": [
            {
              "networkGroupId": "subscriptions/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/networkManagers/testNetworkManager/networkManagerGroups/group1",
              "useHubGateway": true,
              "groupConnectivity": "Transitive",
              "isGlobal": false
            }
          ],
          "provisioningState": "Succeeded"
        }
      }
    }
  }
}
