{
  "title": "Create/Update Managed Network Connectivity Policy",
  "parameters": {
    "api-version": "2019-11-01",
    "subscriptionId": "subscriptionA",
    "resourceGroupName": "myResourceGroup",
    "networkManagerName": "subscriptionCAssignment",
    "configurationName": "myHubAndSpoke",
    "connectivityConfiguration": {
      "properties": {
        "displayName": "myHubAndSpoke", 
        "description": "Sample Configuration",
        "topology": "HubAndSpokeTopology",
        "gatewayVnetId": "samplevnetId",
        "gatewayVIP": "11.11.1.1",
        "hubId": "subscription/subscriptionB/resourceGroups/myResourceGroup/providers/Microsoft.Network/virtualNetworks/myHubVnet",
        "appliesToGroups": [
          {
            "networkGroupId": "/subscriptions/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/networkManagers/subscriptionCAssignment/networkManagerGroups/group1",
            "deleteExistingPeering": true,
            "groupConnectivity": "Transitive"
          }
        ]
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "name": "myHubAndSpoke",
        "id": "/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/networkManagers/subscriptionCAssignment/connectivityConfigurations/myHubAndSpoke",
        "type": "Microsoft.Network/networkManagers/connectivityConfigurations",
        "etag": "asdf-asdf-asdf2",
        "properties": {
          "description":"Sample Connectivity Configuration",
          "topology": "HubAndSpokeTopology",
          "hubId": "subscription/subscriptionB/resourceGroups/myResourceGroup/providers/Microsoft.Network/virtualNetworks/myHubVnet",
          "gatewayVnetId": "samplevnetId",
          "gatewayVIP": "11.11.1.1",
          "appliesToGroups": [
            {
              "networkGroupId": "/subscriptions/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/networkManagers/subscriptionCAssignment/groups/group1",
              "deleteExistingPeering": true,
              "groupConnectivity": "Transitive"
            }
          ],
          "provisioningState": "Succeeded"
        }
      }
    },
    "201": {
      "body": {
        "name": "myHubAndSpoke",
        "id": "/subscriptionB/resourceGroups/myResourceGroup/providers/Microsoft.Network/networkManagers/subscriptionCAssignment/connectivityConfigurations/myHubAndSpoke",
        "type": "Microsoft.Network/networkManagers/connectivityConfigurations",
        "etag": "asdf-asdf-asdf2",
        "properties": {
          "displayName": "myHubAndSpoke", 
          "description": "Sample Configuration",
          "topology": "HubAndSpokeTopology",
          "gatewayVnetId": "samplevnetId",
          "gatewayVIP": "11.11.1.1",
          "hubId": "subscription/subscriptionB/resourceGroups/myResourceGroup/providers/Microsoft.Network/virtualNetworks/myHubVnet",
          "appliesToGroups": [
            {
              "networkGroupId": "/subscriptions/subscriptionA/resourceGroups/myResourceGroup/providers/Microsoft.Network/networkManagers/subscriptionCAssignment/networkManagerGroups/group1",
              "deleteExistingPeering": true,
              "groupConnectivity": "Transitive"
            }
          ],
          "provisioningState": "Succeeded"
        }
      }
    }
  }
}
