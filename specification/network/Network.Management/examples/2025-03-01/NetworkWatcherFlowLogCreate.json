{
  "parameters": {
    "api-version": "2025-03-01",
    "flowLogName": "fl",
    "networkWatcherName": "nw1",
    "parameters": {
      "identity": {
        "type": "UserAssigned",
        "userAssignedIdentities": {
          "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {}
        }
      },
      "location": "centraluseuap",
      "properties": {
        "format": {
          "type": "JSON",
          "version": 1
        },
        "enabled": true,
        "enabledFilteringCriteria": "srcIP=158.255.7.8 || dstPort=56891",
        "recordTypes": "B,E",
        "storageId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.Storage/storageAccounts/nwtest1mgvbfmqsigdxe",
        "targetResourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.Network/networkSecurityGroups/desmondcentral-nsg"
      }
    },
    "resourceGroupName": "rg1",
    "subscriptionId": "00000000-0000-0000-0000-000000000000"
  },
  "responses": {
    "200": {
      "body": {
        "name": "Microsoft.Networkdesmond-rgdesmondcentral-nsg",
        "type": "Microsoft.Network/networkWatchers/FlowLogs",
        "etag": "W/\"00000000-0000-0000-0000-000000000000\"",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.Network/networkWatchers/nw/FlowLogs/fl",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {
              "clientId": "c16d15e1-f60a-40e4-8a05-df3d3f655c14",
              "principalId": "e3858881-e40c-43bd-9cde-88da39c05023"
            }
          }
        },
        "location": "centraluseuap",
        "properties": {
          "format": {
            "type": "JSON",
            "version": 1
          },
          "enabled": true,
          "enabledFilteringCriteria": "srcIP=158.255.7.8 || dstPort=56891",
          "flowAnalyticsConfiguration": {},
          "provisioningState": "Updating",
          "recordTypes": "B,E",
          "retentionPolicy": {
            "days": 0,
            "enabled": false
          },
          "storageId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.Storage/storageAccounts/nwtest1mgvbfmqsigdxe",
          "targetResourceGuid": "00000000-0000-0000-0000-000000000000",
          "targetResourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.Network/networkSecurityGroups/desmondcentral-nsg"
        }
      }
    },
    "201": {
      "body": {
        "name": "Microsoft.Networkdesmond-rgdesmondcentral-nsg",
        "type": "Microsoft.Network/networkWatchers/FlowLogs",
        "etag": "W/\"00000000-0000-0000-0000-000000000000\"",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.Network/networkWatchers/nw/FlowLogs/fl",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {
              "clientId": "c16d15e1-f60a-40e4-8a05-df3d3f655c14",
              "principalId": "e3858881-e40c-43bd-9cde-88da39c05023"
            }
          }
        },
        "location": "centraluseuap",
        "properties": {
          "format": {
            "type": "JSON",
            "version": 1
          },
          "enabled": true,
          "enabledFilteringCriteria": "srcIP=158.255.7.8 || dstPort=56891",
          "flowAnalyticsConfiguration": {},
          "provisioningState": "Succeeded",
          "recordTypes": "B,E",
          "retentionPolicy": {
            "days": 0,
            "enabled": false
          },
          "storageId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.Storage/storageAccounts/nwtest1mgvbfmqsigdxe",
          "targetResourceGuid": "00000000-0000-0000-0000-000000000000",
          "targetResourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg1/providers/Microsoft.Network/networkSecurityGroups/desmondcentral-nsg"
        }
      }
    }
  },
  "operationId": "FlowLogs_CreateOrUpdate",
  "title": "Create or update flow log"
}
