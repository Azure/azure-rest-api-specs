{
  "parameters": {
    "api-version": "2025-10-01",
    "subscriptionId": "00000000-0000-0000-0000-000000000000",
    "resourceGroupName": "rg1",
    "resourceName": "clustername1",
    "agentPoolName": "agentpool1",
    "parameters": {
      "properties": {
        "orchestratorVersion": "",
        "count": 3,
        "vmSize": "Standard_DS2_v2",
        "osType": "Linux",
        "mode": "User",
        "localDNSProfile": {
          "mode": "Required",
          "vnetDNSOverrides": {
            "example.com": {
              "queryLogging": "Log",
              "protocol": "PreferUDP",
              "forwardDestination": "VnetDNS",
              "forwardPolicy": "Sequential",
              "maxConcurrent": 1000,
              "cacheDurationInSeconds": 3600,
              "serveStaleDurationInSeconds": 3600,
              "serveStale": "Immediate"
            }
          },
          "kubeDNSOverrides": {
            "cluster.local": {
              "queryLogging": "Error",
              "protocol": "PreferUDP",
              "forwardDestination": "ClusterCoreDNS",
              "forwardPolicy": "RoundRobin",
              "maxConcurrent": 500,
              "cacheDurationInSeconds": 1800,
              "serveStaleDurationInSeconds": 1800,
              "serveStale": "Verify"
            }
          }
        }
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rg1/providers/Microsoft.ContainerService/managedClusters/clustername1/agentPools/agentpool1",
        "type": "Microsoft.ContainerService/managedClusters/agentPools",
        "name": "agentpool1",
        "properties": {
          "provisioningState": "Succeeded",
          "orchestratorVersion": "1.30.0",
          "currentOrchestratorVersion": "1.30.0",
          "count": 3,
          "vmSize": "Standard_DS2_v2",
          "maxPods": 110,
          "osType": "Linux",
          "mode": "User",
          "nodeImageVersion": "AKSUbuntu:1804:2024.08.12",
          "localDNSProfile": {
            "mode": "Required",
            "state": "Enabled",
            "vnetDNSOverrides": {
              "example.com": {
                "queryLogging": "Log",
                "protocol": "PreferUDP",
                "forwardDestination": "VnetDNS",
                "forwardPolicy": "Sequential",
                "maxConcurrent": 1000,
                "cacheDurationInSeconds": 3600,
                "serveStaleDurationInSeconds": 3600,
                "serveStale": "Immediate"
              }
            },
            "kubeDNSOverrides": {
              "cluster.local": {
                "queryLogging": "Error",
                "protocol": "PreferUDP",
                "forwardDestination": "ClusterCoreDNS",
                "forwardPolicy": "RoundRobin",
                "maxConcurrent": 500,
                "cacheDurationInSeconds": 1800,
                "serveStaleDurationInSeconds": 1800,
                "serveStale": "Verify"
              }
            }
          }
        }
      }
    },
    "201": {
      "body": {
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rg1/providers/Microsoft.ContainerService/managedClusters/clustername1/agentPools/agentpool1",
        "type": "Microsoft.ContainerService/managedClusters/agentPools",
        "name": "agentpool1",
        "properties": {
          "provisioningState": "Creating",
          "orchestratorVersion": "1.30.0",
          "currentOrchestratorVersion": "1.30.0",
          "count": 3,
          "vmSize": "Standard_DS2_v2",
          "maxPods": 110,
          "osType": "Linux",
          "mode": "User",
          "localDNSProfile": {
            "mode": "Required",
            "state": "Enabled",
            "vnetDNSOverrides": {
              "example.com": {
                "queryLogging": "Log",
                "protocol": "PreferUDP",
                "forwardDestination": "VnetDNS",
                "forwardPolicy": "Sequential",
                "maxConcurrent": 1000,
                "cacheDurationInSeconds": 3600,
                "serveStaleDurationInSeconds": 3600,
                "serveStale": "Immediate"
              }
            },
            "kubeDNSOverrides": {
              "cluster.local": {
                "queryLogging": "Error",
                "protocol": "PreferUDP",
                "forwardDestination": "ClusterCoreDNS",
                "forwardPolicy": "RoundRobin",
                "maxConcurrent": 500,
                "cacheDurationInSeconds": 1800,
                "serveStaleDurationInSeconds": 1800,
                "serveStale": "Verify"
              }
            }
          }
        }
      }
    }
  }
}
