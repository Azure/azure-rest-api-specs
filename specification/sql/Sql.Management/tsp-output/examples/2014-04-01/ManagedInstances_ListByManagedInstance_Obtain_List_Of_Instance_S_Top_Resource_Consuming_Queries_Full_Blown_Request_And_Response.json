{
  "parameters": {
    "api-version": "2022-08-01-preview",
    "databases": "db1,db2",
    "endTime": "2020-03-12T12:00:00Z",
    "interval": "P1D",
    "managedInstanceName": "sqlcrudtest-4645",
    "observationMetric": "cpu",
    "resourceGroupName": "sqlcrudtest-7398",
    "startTime": "2020-03-10T12:00:00Z",
    "subscriptionId": "00000000-1111-2222-3333-444444444444"
  },
  "responses": {
    "200": {
      "body": {
        "value": [
          {
            "aggregationFunction": "sum",
            "endTime": "03/12/2020 13:00:00",
            "intervalType": "P1D",
            "numberOfQueries": 5,
            "observationMetric": "cpu",
            "queries": [
              {
                "databaseName": "db1",
                "intervals": [
                  {
                    "executionCount": 1,
                    "intervalStartTime": "03/11/2020 00:00:00",
                    "metrics": [
                      {
                        "name": "cpu",
                        "displayName": "Cpu",
                        "unit": "percentage",
                        "value": 0.0015934667245370371
                      },
                      {
                        "name": "io",
                        "displayName": "Physical Io Reads",
                        "unit": "percentage",
                        "value": 0.000004224537037037037
                      },
                      {
                        "name": "logIo",
                        "displayName": "Log Writes",
                        "unit": "percentage",
                        "value": 0
                      },
                      {
                        "name": "memory",
                        "displayName": "Memory consumption",
                        "unit": "KB",
                        "value": 8336
                      },
                      {
                        "name": "duration",
                        "displayName": "Query duration",
                        "unit": "microseconds",
                        "value": 11091296
                      }
                    ]
                  }
                ],
                "queryId": "28"
              },
              {
                "databaseName": "db1",
                "intervals": [
                  {
                    "executionCount": 1,
                    "intervalStartTime": "03/11/2020 00:00:00",
                    "metrics": [
                      {
                        "name": "cpu",
                        "displayName": "Cpu",
                        "unit": "percentage",
                        "value": 0.0009522783564814815
                      },
                      {
                        "name": "io",
                        "displayName": "Physical Io Reads",
                        "unit": "percentage",
                        "value": 1.7361111111111112e-7
                      },
                      {
                        "name": "logIo",
                        "displayName": "Log Writes",
                        "unit": "percentage",
                        "value": 0
                      },
                      {
                        "name": "memory",
                        "displayName": "Memory consumption",
                        "unit": "KB",
                        "value": 1024
                      },
                      {
                        "name": "duration",
                        "displayName": "Query duration",
                        "unit": "microseconds",
                        "value": 6625562
                      }
                    ]
                  }
                ],
                "queryId": "24"
              },
              {
                "databaseName": "db1",
                "intervals": [
                  {
                    "executionCount": 82,
                    "intervalStartTime": "03/11/2020 00:00:00",
                    "metrics": [
                      {
                        "name": "cpu",
                        "displayName": "Cpu",
                        "unit": "percentage",
                        "value": 0.0007183139467592593
                      },
                      {
                        "name": "io",
                        "displayName": "Physical Io Reads",
                        "unit": "percentage",
                        "value": 0
                      },
                      {
                        "name": "logIo",
                        "displayName": "Log Writes",
                        "unit": "percentage",
                        "value": 0
                      },
                      {
                        "name": "memory",
                        "displayName": "Memory consumption",
                        "unit": "KB",
                        "value": 0
                      },
                      {
                        "name": "duration",
                        "displayName": "Query duration",
                        "unit": "microseconds",
                        "value": 4970199
                      }
                    ]
                  }
                ],
                "queryId": "3"
              },
              {
                "databaseName": "db1",
                "intervals": [
                  {
                    "executionCount": 1,
                    "intervalStartTime": "03/11/2020 00:00:00",
                    "metrics": [
                      {
                        "name": "cpu",
                        "displayName": "Cpu",
                        "unit": "percentage",
                        "value": 0.0006494454571759259
                      },
                      {
                        "name": "io",
                        "displayName": "Physical Io Reads",
                        "unit": "percentage",
                        "value": 0.000005034722222222222
                      },
                      {
                        "name": "logIo",
                        "displayName": "Log Writes",
                        "unit": "percentage",
                        "value": 0
                      },
                      {
                        "name": "memory",
                        "displayName": "Memory consumption",
                        "unit": "KB",
                        "value": 1024
                      },
                      {
                        "name": "duration",
                        "displayName": "Query duration",
                        "unit": "microseconds",
                        "value": 4530668
                      }
                    ]
                  }
                ],
                "queryId": "29"
              },
              {
                "databaseName": "db2",
                "intervals": [
                  {
                    "executionCount": 1,
                    "intervalStartTime": "03/11/2020 00:00:00",
                    "metrics": [
                      {
                        "name": "cpu",
                        "displayName": "Cpu",
                        "unit": "percentage",
                        "value": 0.0006275368923611112
                      },
                      {
                        "name": "io",
                        "displayName": "Physical Io Reads",
                        "unit": "percentage",
                        "value": 0
                      },
                      {
                        "name": "logIo",
                        "displayName": "Log Writes",
                        "unit": "percentage",
                        "value": 0
                      },
                      {
                        "name": "memory",
                        "displayName": "Memory consumption",
                        "unit": "KB",
                        "value": 1024
                      },
                      {
                        "name": "duration",
                        "displayName": "Query duration",
                        "unit": "microseconds",
                        "value": 4349943
                      }
                    ]
                  }
                ],
                "queryId": "25"
              }
            ],
            "startTime": "03/10/2020 00:00:00"
          }
        ]
      }
    }
  },
  "operationId": "ManagedInstances_ListByManagedInstance",
  "title": "Obtain list of instance's top resource consuming queries. Full-blown request and response."
}