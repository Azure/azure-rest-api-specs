{
  "swagger": "2.0",
  "info": {
    "title": "Azure ML Chat",
    "version": "2023-10-01-preview",
    "description": "Azure APIs for the Azure Chat protocol.",
    "x-typespec-generated": [
      {
        "emitter": "@azure-tools/typespec-autorest"
      }
    ]
  },
  "schemes": [
    "https"
  ],
  "x-ms-parameterized-host": {
    "hostTemplate": "{endpoint}",
    "useSchemePrefix": false,
    "parameters": [
      {
        "name": "endpoint",
        "in": "path",
        "required": true,
        "type": "string"
      }
    ]
  },
  "produces": [
    "application/json"
  ],
  "consumes": [
    "application/json"
  ],
  "security": [
    {
      "ApiKeyAuth": []
    },
    {
      "OAuth2Auth": []
    }
  ],
  "securityDefinitions": {
    "ApiKeyAuth": {
      "type": "apiKey",
      "name": "api-key",
      "in": "header"
    },
    "OAuth2Auth": {
      "type": "oauth2",
      "flow": "implicit",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/v2.0/authorize",
      "scopes": {}
    }
  },
  "tags": [],
  "paths": {
    "/{operationRoute}": {
      "post": {
        "operationId": "GenericChatClient_Create",
        "description": "Creates a new chat completion.",
        "parameters": [
          {
            "$ref": "#/parameters/OperationRouteParam"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "description": "The configuration for a chat completion request.",
              "properties": {
                "messages": {
                  "type": "array",
                  "description": "The collection of context messages associated with this completion request.",
                  "items": {
                    "type": "object",
                    "description": "A single, role-attributed message within a chat completion interaction.",
                    "properties": {
                      "content": {
                        "type": "string",
                        "description": "The text associated with the message."
                      },
                      "role": {
                        "$ref": "#/definitions/ChatRole",
                        "description": "The role associated with the message."
                      },
                      "sessionState": {
                        "description": "Field that allows the chat app to store and retrieve data, the structure of such data is dependant on the backend\nbeing used. The client must send back the data in this field unchanged in subsequent requests, until the chat app\nsends a new one. The data in this field can be used to implement stateful services, such as remembering previous\nconversations or user preferences."
                      }
                    },
                    "required": [
                      "content",
                      "role"
                    ]
                  },
                  "x-ms-identifiers": []
                },
                "stream": {
                  "type": "boolean",
                  "description": "Indicates whether the completion is a streaming or non-streaming completion.",
                  "enum": [
                    false
                  ]
                },
                "sessionState": {
                  "description": "Field that allows the chat app to store and retrieve data, the structure of such data is dependant on the backend\nbeing used. The client must send back the data in this field unchanged in subsequent requests, until the chat app\nsends a new one. The data in this field can be used to implement stateful services, such as remembering previous\nconversations or user preferences."
                },
                "context": {
                  "type": "object",
                  "description": "Context allows the chat app to receive extra parameters from the client, such as temperature, functions, or\ncustomer_info. These parameters are specific to the chat app and not understood by the generic clients.",
                  "additionalProperties": {}
                }
              },
              "required": [
                "messages",
                "stream"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The request has succeeded.",
            "schema": {
              "type": "object",
              "description": "Representation of the response to a chat completion request.",
              "properties": {
                "choices": {
                  "type": "array",
                  "description": "The collection of generated completions.",
                  "items": {
                    "type": "object",
                    "description": "The representation of a single generated completion.",
                    "properties": {
                      "index": {
                        "type": "integer",
                        "format": "int64",
                        "description": "The index of the of the chat choice, relative to the other choices in the same completion."
                      },
                      "message": {
                        "type": "object",
                        "description": "The chat message for a given chat completion.",
                        "properties": {
                          "content": {
                            "type": "string",
                            "description": "The text associated with the message."
                          },
                          "role": {
                            "$ref": "#/definitions/ChatRole",
                            "description": "The role associated with the message."
                          },
                          "sessionState": {
                            "description": "Field that allows the chat app to store and retrieve data, the structure of such data is dependant on the backend\nbeing used. The client must send back the data in this field unchanged in subsequent requests, until the chat app\nsends a new one. The data in this field can be used to implement stateful services, such as remembering previous\nconversations or user preferences."
                          }
                        },
                        "required": [
                          "content",
                          "role"
                        ]
                      },
                      "sessionState": {
                        "description": "Field that allows the chat app to store and retrieve data, the structure of such data is dependant on the backend\nbeing used. The client must send back the data in this field unchanged in subsequent requests, until the chat app\nsends a new one. The data in this field can be used to implement stateful services, such as remembering previous\nconversations or user preferences."
                      },
                      "context": {
                        "type": "object",
                        "description": "Context allows the chat app to receive extra parameters from the client, such as temperature, functions, or\ncustomer_info. These parameters are specific to the chat app and not understood by the generic clients.",
                        "additionalProperties": {}
                      },
                      "finishReason": {
                        "$ref": "#/definitions/FinishReason",
                        "description": "The reason this chat completion completed its generation."
                      }
                    },
                    "required": [
                      "index",
                      "message",
                      "finishReason"
                    ]
                  },
                  "x-ms-identifiers": []
                }
              },
              "required": [
                "choices"
              ]
            }
          }
        },
        "x-ms-examples": {
          "Creates a chat completion for the provided prompt using streaming.": {
            "$ref": "./examples/create.json"
          }
        }
      }
    }
  },
  "definitions": {
    "ChatRole": {
      "type": "string",
      "description": "A representation of the intended purpose of a message.",
      "enum": [
        "user",
        "system",
        "assistant"
      ],
      "x-ms-enum": {
        "name": "ChatRole",
        "modelAsString": true,
        "values": [
          {
            "name": "user",
            "value": "user",
            "description": "The role that provides input to the completion."
          },
          {
            "name": "system",
            "value": "system",
            "description": "The role that instructs or configures the behavior of the assistant."
          },
          {
            "name": "assistant",
            "value": "assistant",
            "description": "The role that provides responses to the system-instructed, user-prompted input."
          }
        ]
      }
    },
    "FinishReason": {
      "type": "string",
      "description": "Representation of the reason why a chat session has finished processing.",
      "enum": [
        "stop",
        "length"
      ],
      "x-ms-enum": {
        "name": "FinishReason",
        "modelAsString": true,
        "values": [
          {
            "name": "stopped",
            "value": "stop",
            "description": "Completion ended normally."
          },
          {
            "name": "tokenLimitReached",
            "value": "length",
            "description": "The completion exhausted available tokens before generation could complete."
          }
        ]
      }
    }
  },
  "parameters": {
    "OperationRouteParam": {
      "name": "operationRoute",
      "in": "path",
      "description": "The route where the endpoint exposes the chat operations.",
      "required": true,
      "type": "string",
      "default": "chat",
      "x-ms-parameter-location": "method"
    }
  }
}
