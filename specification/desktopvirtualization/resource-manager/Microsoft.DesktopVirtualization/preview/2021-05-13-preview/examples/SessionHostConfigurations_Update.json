{
  "parameters": {
    "subscriptionId": "daefabc0-95b4-48b3-b645-8a753a63c4fa",
    "resourceGroupName": "resourceGroup1",
    "hostPoolName": "hostPool1",
    "api-version": "2021-05-13-preview",
    "sessionHostConfiguration": {
      "properties": {
        "vmSizeId": "Standard_D2s_v3",
        "diskInfo": {
          "type": "Standard_LRS"
        },
        "customConfigurationTemplateUrl": "https://storageaccountname.blob.core.windows.net/blobcontainer/file",
        "customConfigurationParameterUrl": "https://storageaccountname.blob.core.windows.net/blobcontainer/file",
        "imageInfo": {
          "type": "Marketplace",
          "marketplaceInfo": {
            "offer": "Windows-10",
            "publisher": "MicrosoftWindowsDesktop",
            "sku": "19h2-ent",
            "exactVersion": "2019.0.20190115"
          },
          "customInfo": {
            "resourceId": "/subscriptions/daefabc0-95b4-48b3-b645-8a753a63c4fa/resourceGroups/resourceGroup1/providers/Microsoft.Compute/images/imageName"
          }
        },
        "domainInfo": {
          "joinType": "ActiveDirectory",
          "activeDirectoryInfo": {
            "credentials": {
              "username": "username",
              "passwordKeyVaultResourceId": "/subscriptions/daefabc0-95b4-48b3-b645-8a753a63c4fa/resourceGroups/resourceGroup1/providers/Microsoft.KeyVault/vaults/test-kv/secrets",
              "passwordKeyVaultSecretName": "PasswordName"
            },
            "ouPath": "OU=testOU,DC=domain,DC=Domain,DC=com",
            "domainName": "wvdarmtest1.net"
          },
          "azureActiveDirectoryInfo": {
            "mdmProviderGuid": "bdefabc0-95b4-48b3-b645-8a753a63c4fa"
          }
        },
        "vmAdminCredentials": {
          "username": "username",
          "passwordKeyVaultResourceId": "/subscriptions/daefabc0-95b4-48b3-b645-8a753a63c4fa/resourceGroups/resourceGroup1/providers/Microsoft.KeyVault/vaults/test-kv/secrets",
          "passwordKeyVaultSecretName": "PasswordName"
        }
      }
    },
    "SessionHostSubsetConfiguration": {
      "properties": {
        "vmTags": "{\"Department\":\"myDepartment\", \"Team\":\"myTeam\"}",
        "vmResourceGroup": "resourceGroup2",
        "vmLocation": "eastus2",
        "vmNamePrefix": "westus2-vm",
        "availabilityInfo": {
          "type": "AvailabilityZone",
          "availabilityZones": "[1,3]",
          "faultDomainCount": "2"
        },
        "networkInfo": {
          "subnetId": "/subscriptions/.../resourceGroups/.../providers/Microsoft.Network/virtualNetworks/.../subnets/subnet1",
          "securityGroupId": "/subscriptions/.../resourceGroups/.../provider s/Microsoft.Network/networkSecurityGroups/nsg1"
        }
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "name": "default",
        "id": "/subscriptions/daefabc0-95b4-48b3-b645-8a753a63c4fa/resourceGroups/resourceGroup1/providers/Microsoft.DesktopVirtualization/hostPools/hostPool1/updateStatuses/current",
        "type": "Microsoft.DesktopVirtualization/hostPools/SessionHostConfiguration",
        "systemData": {
          "createdBy": "user1",
          "createdByType": "User",
          "createdAt": "2020-01-01T17:18:19.1234567Z",
          "lastModifiedBy": "user2",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2020-01-02T17:18:19.1234567Z"
        },
        "properties": {
          "version": "2008-09-22T14:01:54.9571247Z",
          "provisioningState": "Updating",
          "vmSizeId": "Standard_D2s_v3",
          "diskInfo": {
            "type": "Standard_LRS"
          },
          "customConfigurationTemplateUrl": "https://storageaccountname.blob.core.windows.net/blobcontainer/file",
          "customConfigurationParameterUrl": "https://storageaccountname.blob.core.windows.net/blobcontainer/file",
          "imageInfo": {
            "type": "Marketplace",
            "marketplaceInfo": {
              "offer": "Windows-10",
              "publisher": "MicrosoftWindowsDesktop",
              "sku": "19h2-ent",
              "exactVersion": "2019.0.20190115"
            },
            "customInfo": {
              "resourceId": "/subscriptions/daefabc0-95b4-48b3-b645-8a753a63c4fa/resourceGroups/resourceGroup1/providers/Microsoft.Compute/images/imageName"
            }
          },
          "domainInfo": {
            "joinType": "ActiveDirectory",
            "activeDirectoryInfo": {
              "credentials": {
                "username": "username",
                "passwordKeyVaultResourceId": "/subscriptions/daefabc0-95b4-48b3-b645-8a753a63c4fa/resourceGroups/resourceGroup1/providers/Microsoft.KeyVault/vaults/test-kv/secrets",
                "passwordKeyVaultSecretName": "PasswordName"
              },
              "ouPath": "OU=testOU,DC=domain,DC=Domain,DC=com",
              "domainName": "wvdarmtest1.net"
            },
            "azureActiveDirectoryInfo": {
              "mdmProviderGuid": "bdefabc0-95b4-48b3-b645-8a753a63c4fa"
            }
          },
          "vmAdminCredentials": {
            "username": "username",
            "passwordKeyVaultResourceId": "/subscriptions/daefabc0-95b4-48b3-b645-8a753a63c4fa/resourceGroups/resourceGroup1/providers/Microsoft.KeyVault/vaults/test-kv/secrets",
            "passwordKeyVaultSecretName": "PasswordName"
          }
        }
      }
    },
    "202": {
      "headers": {
        "location": "https://management.azure.com/providers/Microsoft.DesktopVirtualization/locations/westus/operationStatuses/ed5d502c-acaa-42ec-ad61-0d8488a9fd1d"
      }
    }
  }
}
