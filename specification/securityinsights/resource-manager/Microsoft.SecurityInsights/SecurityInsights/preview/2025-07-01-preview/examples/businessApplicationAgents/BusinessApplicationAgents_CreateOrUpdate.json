{
  "parameters": {
    "api-version": "2025-07-01-preview",
    "subscriptionId": "d0cfe6b2-9ac0-4464-9919-dccaee2e48c0",
    "resourceGroupName": "myRg",
    "workspaceName": "myWorkspace",
    "agentResourceName": "3d69632b-0b60-4af3-8720-77f01a25d34a",
    "businessApplicationAgentToUpsert": {
      "etag": "\"0300bf09-0000-0000-0000-5c37296e0000\"",
      "properties": {
        "configuration": {
          "agentContainerName": "MyAgentContainer",
          "sdkPath": "/path/to/nwrfc750P_8-70002755.zip",
          "sncPath": "/path/to/snc",
          "keyVaultResourceId": "/subscriptions/d0cfe6b2-9ac0-4464-9919-dccaee2e48c0/resourceGroups/myRg/providers/Microsoft.KeyVault/vaults/myVault",
          "keyVaultAuthenticationMode": "ManagedIdentity",
          "secretSource": "AzureKeyVault",
          "type": "SAP"
        },
        "displayName": "MyAgent"
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/d0cfe6b2-9ac0-4464-9919-dccaee2e48c0/resourceGroups/myRg/providers/Microsoft.OperationalInsights/workspaces/myWorkspace/providers/Microsoft.SecurityInsights/businessApplicationAgents/73e01a99-5cd7-4139-a149-9f2736ff2ab5",
        "name": "73e01a99-5cd7-4139-a149-9f2736ff2ab5",
        "etag": "\"0300bf09-0000-0000-0000-5c37296e0000\"",
        "type": "Microsoft.SecurityInsights/businessApplicationAgents",
        "properties": {
          "configuration": {
            "agentContainerName": "MyAgentContainer",
            "sdkPath": "/path/to/nwrfc750P_8-70002755.zip",
            "sncPath": "/path/to/snc",
            "keyVaultResourceId": "/subscriptions/d0cfe6b2-9ac0-4464-9919-dccaee2e48c0/resourceGroups/myRg/providers/Microsoft.KeyVault/vaults/myVault",
            "keyVaultAuthenticationMode": "ManagedIdentity",
            "secretSource": "AzureKeyVault",
            "type": "SAP"
          },
          "displayName": "MyAgent",
          "lastModifiedTimeUtc": "2024-03-01T13:00:30Z"
        }
      }
    },
    "201": {
      "body": {
        "id": "/subscriptions/d0cfe6b2-9ac0-4464-9919-dccaee2e48c0/resourceGroups/myRg/providers/Microsoft.OperationalInsights/workspaces/myWorkspace/providers/Microsoft.SecurityInsights/businessApplicationAgents/73e01a99-5cd7-4139-a149-9f2736ff2ab5",
        "name": "73e01a99-5cd7-4139-a149-9f2736ff2ab5",
        "etag": "\"0300bf09-0000-0000-0000-5c37296e0000\"",
        "type": "Microsoft.SecurityInsights/businessApplicationAgents",
        "properties": {
          "configuration": {
            "agentContainerName": "MyAgentContainer",
            "sdkPath": "/path/to/nwrfc750P_8-70002755.zip",
            "sncPath": "/path/to/snc",
            "keyVaultResourceId": "/subscriptions/d0cfe6b2-9ac0-4464-9919-dccaee2e48c0/resourceGroups/myRg/providers/Microsoft.KeyVault/vaults/myVault",
            "keyVaultAuthenticationMode": "ManagedIdentity",
            "secretSource": "AzureKeyVault",
            "type": "SAP"
          },
          "displayName": "MyAgent",
          "lastModifiedTimeUtc": "2024-03-01T13:00:30Z"
        }
      }
    }
  }
}
