{
  "parameters": {
    "api-version": "2025-07-01-preview",
    "dataConnector": {
      "kind": "GCP",
      "properties": {
        "auth": {
          "type": "GCP",
          "projectNumber": "123456789012",
          "serviceAccountEmail": "sentinel-service-account@project-id.iam.gserviceaccount.com",
          "workloadIdentityProviderId": "sentinel-identity-provider"
        },
        "connectorDefinitionName": "GcpConnector",
        "dcrConfig": {
          "dataCollectionEndpoint": "https://microsoft-sentinel-datacollectionendpoint-123m.westeurope-1.ingest.monitor.azure.com",
          "dataCollectionRuleImmutableId": "dcr-de21b053bd5a44beb99a256c9db85023",
          "streamName": "SENTINEL_GCP_AUDIT_LOGS"
        },
        "request": {
          "projectId": "project-id",
          "subscriptionNames": [
            "sentinel-subscription"
          ]
        }
      }
    },
    "dataConnectorId": "GCP_fce27b90-d6f5-4d30-991a-af509a2b50a1",
    "resourceGroupName": "myRg",
    "subscriptionId": "d0cfe6b2-9ac0-4464-9919-dccaee2e48c0",
    "workspaceName": "myWorkspace"
  },
  "responses": {
    "200": {
      "body": {
        "name": "GCP_fce27b90-d6f5-4d30-991a-af509a2b50a1",
        "type": "Microsoft.SecurityInsights/dataConnectors",
        "etag": "\"0300bf09-0000-0000-0000-5c37296e0000\"",
        "id": "/subscriptions/d0cfe6b2-9ac0-4464-9919-dccaee2e48c0/resourceGroups/myRg/providers/Microsoft.OperationalInsights/workspaces/myWorkspace/providers/Microsoft.SecurityInsights/dataConnectors/GCP_afef3743-0c88-469c-84ff-ca2e87dc1e48",
        "kind": "GCP",
        "properties": {
          "auth": {
            "type": "GCP",
            "projectNumber": "123456789012",
            "serviceAccountEmail": "sentinel-service-account@project-id.iam.gserviceaccount.com",
            "workloadIdentityProviderId": "sentinel-identity-provider"
          },
          "connectorDefinitionName": "GcpConnector",
          "dcrConfig": {
            "dataCollectionEndpoint": "https://microsoft-sentinel-datacollectionendpoint-123m.westeurope-1.ingest.monitor.azure.com",
            "dataCollectionRuleImmutableId": "dcr-de21b053bd5a44beb99a256c9db85023",
            "streamName": "SENTINEL_GCP_AUDIT_LOGS"
          },
          "request": {
            "projectId": "project-id",
            "subscriptionNames": [
              "sentinel-subscription"
            ]
          }
        }
      }
    },
    "201": {
      "body": {
        "name": "GCP_fce27b90-d6f5-4d30-991a-af509a2b50a1",
        "type": "Microsoft.SecurityInsights/dataConnectors",
        "etag": "\"0300bf09-0000-0000-0000-5c37296e0000\"",
        "id": "/subscriptions/d0cfe6b2-9ac0-4464-9919-dccaee2e48c0/resourceGroups/myRg/providers/Microsoft.OperationalInsights/workspaces/myWorkspace/providers/Microsoft.SecurityInsights/dataConnectors/GCP_afef3743-0c88-469c-84ff-ca2e87dc1e48",
        "kind": "GCP",
        "properties": {
          "auth": {
            "type": "GCP",
            "projectNumber": "123456789012",
            "serviceAccountEmail": "sentinel-service-account@project-id.iam.gserviceaccount.com",
            "workloadIdentityProviderId": "sentinel-identity-provider"
          },
          "connectorDefinitionName": "GcpConnector",
          "dcrConfig": {
            "dataCollectionEndpoint": "https://microsoft-sentinel-datacollectionendpoint-123m.westeurope-1.ingest.monitor.azure.com",
            "dataCollectionRuleImmutableId": "dcr-de21b053bd5a44beb99a256c9db85023",
            "streamName": "SENTINEL_GCP_AUDIT_LOGS"
          },
          "request": {
            "projectId": "project-id",
            "subscriptionNames": [
              "sentinel-subscription"
            ]
          }
        }
      }
    }
  },
  "operationId": "DataConnectors_CreateOrUpdate",
  "title": "Creates or updates a GCP data connector"
}