{
  "swagger": "2.0",
  "info": {
    "title": "Microsoft.App service",
    "version": "2023-08-01-preview",
    "x-typespec-generated": [
      {
        "emitter": "@azure-tools/typespec-autorest"
      }
    ]
  },
  "schemes": [
    "https"
  ],
  "produces": [
    "application/json"
  ],
  "consumes": [
    "application/json"
  ],
  "security": [
    {
      "AadOauth2Auth": [
        "https://dynamicsessions.io/.default"
      ]
    }
  ],
  "securityDefinitions": {
    "AadOauth2Auth": {
      "type": "oauth2",
      "description": "The Azure Active Directory OAuth2 Flow",
      "flow": "accessCode",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
      "scopes": {
        "https://dynamicsessions.io/.default": ""
      },
      "tokenUrl": "https://login.microsoftonline.com/common/oauth2/token"
    }
  },
  "tags": [],
  "paths": {
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/sessionPools/{sessionPoolName}/code/execute": {
      "post": {
        "operationId": "CodeExecution_ExecuteCode",
        "description": "Execute code in a session.",
        "parameters": [
          {
            "$ref": "#/parameters/Azure.Core.Foundations.ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/SubscriptionIdParameter"
          },
          {
            "$ref": "#/parameters/ResourceGroupNameParameter"
          },
          {
            "$ref": "#/parameters/SessionPoolNameParameter"
          },
          {
            "$ref": "#/parameters/SessionIdentifier"
          },
          {
            "name": "codeExecutionRequest",
            "in": "body",
            "description": "The request to execute code.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/CodeExecutionRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The request has succeeded.",
            "schema": {
              "$ref": "#/definitions/CodeExecutionResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Azure.Core.Foundations.ErrorResponse"
            },
            "headers": {
              "x-ms-error-code": {
                "type": "string",
                "description": "String error code indicating what went wrong."
              }
            }
          }
        },
        "x-ms-examples": {
          "CodeExecution_ExecuteCode_Result": {
            "$ref": "./examples/CodeExecution_ExecuteCode_Result.json"
          },
          "CodeExecution_ExecuteCode_StandardOut": {
            "$ref": "./examples/CodeExecution_ExecuteCode_StandardOut.json"
          }
        }
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/sessionPools/{sessionPoolName}/files/{filename}": {
      "get": {
        "operationId": "CodeExecutionFiles_GetFileMetadata",
        "description": "Get the file resource.",
        "parameters": [
          {
            "$ref": "#/parameters/Azure.Core.Foundations.ApiVersionParameter"
          },
          {
            "name": "subscriptionId",
            "in": "path",
            "description": "The ID of the target subscription. The value must be an UUID.",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group. The name is case insensitive.",
            "required": true,
            "type": "string",
            "minLength": 1,
            "maxLength": 90
          },
          {
            "name": "sessionPoolName",
            "in": "path",
            "description": "The name of the session pool.",
            "required": true,
            "type": "string"
          },
          {
            "name": "filename",
            "in": "path",
            "description": "The name of the file.",
            "required": true,
            "type": "string"
          },
          {
            "$ref": "#/parameters/SessionIdentifier"
          }
        ],
        "responses": {
          "200": {
            "description": "The request has succeeded.",
            "schema": {
              "$ref": "#/definitions/CodeExecutionFile"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Azure.Core.Foundations.ErrorResponse"
            },
            "headers": {
              "x-ms-error-code": {
                "type": "string",
                "description": "String error code indicating what went wrong."
              }
            }
          }
        },
        "x-ms-examples": {
          "CodeExecutionFiles_GetFileMetadata": {
            "$ref": "./examples/CodeExecutionFiles_GetFileMetadata.json"
          }
        }
      },
      "delete": {
        "operationId": "CodeExecutionFiles_DeleteFile",
        "description": "Delete the file.",
        "parameters": [
          {
            "$ref": "#/parameters/Azure.Core.Foundations.ApiVersionParameter"
          },
          {
            "name": "subscriptionId",
            "in": "path",
            "description": "The ID of the target subscription. The value must be an UUID.",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group. The name is case insensitive.",
            "required": true,
            "type": "string",
            "minLength": 1,
            "maxLength": 90
          },
          {
            "name": "sessionPoolName",
            "in": "path",
            "description": "The name of the session pool.",
            "required": true,
            "type": "string"
          },
          {
            "name": "filename",
            "in": "path",
            "description": "The name of the file.",
            "required": true,
            "type": "string"
          },
          {
            "$ref": "#/parameters/SessionIdentifier"
          }
        ],
        "responses": {
          "204": {
            "description": "There is no content to send for this request, but the headers may be useful. "
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Azure.Core.Foundations.ErrorResponse"
            },
            "headers": {
              "x-ms-error-code": {
                "type": "string",
                "description": "String error code indicating what went wrong."
              }
            }
          }
        },
        "x-ms-examples": {
          "CodeExecutionFiles_DeleteFile": {
            "$ref": "./examples/CodeExecutionFiles_DeleteFile.json"
          }
        }
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/sessionPools/{sessionPoolName}/files/{filename}:uploadFile": {
      "post": {
        "operationId": "CodeExecutionFiles_UploadFile",
        "description": "Upload a file to a session.",
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "$ref": "#/parameters/Azure.Core.Foundations.ApiVersionParameter"
          },
          {
            "name": "subscriptionId",
            "in": "path",
            "description": "The ID of the target subscription. The value must be an UUID.",
            "required": true,
            "type": "string",
            "format": "uuid"
          },
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group. The name is case insensitive.",
            "required": true,
            "type": "string",
            "minLength": 1,
            "maxLength": 90
          },
          {
            "name": "sessionPoolName",
            "in": "path",
            "description": "The name of the session pool.",
            "required": true,
            "type": "string"
          },
          {
            "name": "filename",
            "in": "path",
            "description": "The name of the file.",
            "required": true,
            "type": "string"
          },
          {
            "$ref": "#/parameters/SessionIdentifier"
          },
          {
            "name": "file",
            "in": "formData",
            "description": "The file to upload.",
            "required": true,
            "type": "file"
          }
        ],
        "responses": {
          "200": {
            "description": "The request has succeeded.",
            "schema": {
              "$ref": "#/definitions/CodeExecutionFileCollection"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Azure.Core.Foundations.ErrorResponse"
            },
            "headers": {
              "x-ms-error-code": {
                "type": "string",
                "description": "String error code indicating what went wrong."
              }
            }
          }
        },
        "x-ms-examples": {
          "CodeExecutionFiles_UploadFile": {
            "$ref": "./examples/CodeExecutionFiles_UploadFile.json"
          }
        }
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/sessionPools/{sessionPoolName}/files/content/{filename}": {
      "get": {
        "operationId": "CodeExecutionFiles_GetFileContent",
        "description": "Get the content of the file.",
        "parameters": [
          {
            "$ref": "#/parameters/Azure.Core.Foundations.ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/SubscriptionIdParameter"
          },
          {
            "$ref": "#/parameters/ResourceGroupNameParameter"
          },
          {
            "$ref": "#/parameters/SessionPoolNameParameter"
          },
          {
            "$ref": "#/parameters/CodeExecutionFileNameParameter"
          },
          {
            "$ref": "#/parameters/SessionIdentifier"
          }
        ],
        "responses": {
          "200": {
            "description": "The request has succeeded.",
            "schema": {
              "type": "string",
              "format": "byte"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Azure.Core.Foundations.ErrorResponse"
            },
            "headers": {
              "x-ms-error-code": {
                "type": "string",
                "description": "String error code indicating what went wrong."
              }
            }
          }
        },
        "x-ms-examples": {
          "CodeExecutionFiles_GetFileContent": {
            "$ref": "./examples/CodeExecutionFiles_GetFileContent.json"
          }
        }
      }
    }
  },
  "definitions": {
    "Azure.Core.Foundations.Error": {
      "type": "object",
      "description": "The error object.",
      "properties": {
        "code": {
          "type": "string",
          "description": "One of a server-defined set of error codes."
        },
        "message": {
          "type": "string",
          "description": "A human-readable representation of the error."
        },
        "target": {
          "type": "string",
          "description": "The target of the error."
        },
        "details": {
          "type": "array",
          "description": "An array of details about specific errors that led to this reported error.",
          "items": {
            "$ref": "#/definitions/Azure.Core.Foundations.Error"
          },
          "x-ms-identifiers": []
        },
        "innererror": {
          "$ref": "#/definitions/Azure.Core.Foundations.InnerError",
          "description": "An object containing more specific information than the current object about the error."
        }
      },
      "required": [
        "code",
        "message"
      ]
    },
    "Azure.Core.Foundations.ErrorResponse": {
      "type": "object",
      "description": "A response containing error details.",
      "properties": {
        "error": {
          "$ref": "#/definitions/Azure.Core.Foundations.Error",
          "description": "The error object."
        }
      },
      "required": [
        "error"
      ]
    },
    "Azure.Core.Foundations.InnerError": {
      "type": "object",
      "description": "An object containing more specific information about the error. As per Microsoft One API guidelines - https://github.com/Microsoft/api-guidelines/blob/vNext/Guidelines.md#7102-error-condition-responses.",
      "properties": {
        "code": {
          "type": "string",
          "description": "One of a server-defined set of error codes."
        },
        "innererror": {
          "$ref": "#/definitions/Azure.Core.Foundations.InnerError",
          "description": "Inner error."
        }
      }
    },
    "Azure.Core.uuid": {
      "type": "string",
      "format": "uuid",
      "description": "Universally Unique Identifier"
    },
    "CodeExecutionFile": {
      "type": "object",
      "description": "Code execution file resource.",
      "properties": {
        "filename": {
          "type": "string",
          "description": "The name of the file.",
          "x-ms-mutability": [
            "create"
          ]
        },
        "properties": {
          "$ref": "#/definitions/CodeExecutionFileProperties",
          "description": "Code execution file resource properties."
        }
      },
      "required": [
        "filename",
        "properties"
      ]
    },
    "CodeExecutionFileCollection": {
      "type": "object",
      "description": "Code execution file resource collection.",
      "properties": {
        "value": {
          "type": "array",
          "description": "The files uploaded.",
          "items": {
            "$ref": "#/definitions/CodeExecutionFile"
          },
          "x-ms-identifiers": []
        }
      },
      "required": [
        "value"
      ]
    },
    "CodeExecutionFileProperties": {
      "type": "object",
      "description": "Code execution file resource properties.",
      "properties": {
        "filename": {
          "type": "string",
          "description": "The name of the file."
        },
        "size": {
          "type": "integer",
          "format": "int64",
          "description": "The size of the file."
        },
        "lastModifiedTime": {
          "type": "string",
          "format": "date-time",
          "description": "The date time when the file was last modified."
        }
      },
      "required": [
        "filename",
        "size",
        "lastModifiedTime"
      ]
    },
    "CodeExecutionRequest": {
      "type": "object",
      "description": "The request to execute code.",
      "properties": {
        "properties": {
          "$ref": "#/definitions/CodeExecutionRequestProperties",
          "description": "The properties for executing code."
        }
      },
      "required": [
        "properties"
      ]
    },
    "CodeExecutionRequestProperties": {
      "type": "object",
      "description": "The properties of the code execution request.",
      "properties": {
        "codeInputType": {
          "$ref": "#/definitions/CodeInputType",
          "description": "The code input type of the code execution request."
        },
        "executionType": {
          "$ref": "#/definitions/ExecutionType",
          "description": "The execution type of the code execution request."
        },
        "code": {
          "type": "string",
          "description": "The code to execute."
        },
        "timeoutInSeconds": {
          "type": "integer",
          "format": "int64",
          "description": "Code execution timeout in seconds."
        }
      },
      "required": [
        "codeInputType",
        "executionType",
        "code",
        "timeoutInSeconds"
      ]
    },
    "CodeExecutionResponse": {
      "type": "object",
      "description": "The response containing the result of the code execution.",
      "properties": {
        "properties": {
          "$ref": "#/definitions/CodeExecutionResponseProperties",
          "description": "The properties of the code execution response."
        }
      },
      "required": [
        "properties"
      ]
    },
    "CodeExecutionResponseProperties": {
      "type": "object",
      "description": "The properties of the code execution result.",
      "properties": {
        "status": {
          "$ref": "#/definitions/CodeExecutionStatus",
          "description": "The status of the code execution, indicates whether succeeded or not."
        },
        "stdout": {
          "type": "string",
          "description": "The standard output of the code execution."
        },
        "stderr": {
          "type": "string",
          "description": "The standard error of the code execution."
        },
        "result": {
          "description": "The result of the code execution."
        },
        "executionTimeInMilliseconds": {
          "type": "integer",
          "format": "int64",
          "description": "The execution time of the code in milliseconds."
        }
      },
      "required": [
        "status",
        "stdout",
        "stderr",
        "result",
        "executionTimeInMilliseconds"
      ]
    },
    "CodeExecutionStatus": {
      "type": "string",
      "description": "Code execution status.",
      "enum": [
        "Success",
        "Failure"
      ],
      "x-ms-enum": {
        "name": "CodeExecutionStatus",
        "modelAsString": true,
        "values": [
          {
            "name": "Success",
            "value": "Success",
            "description": "The code execution succeeded."
          },
          {
            "name": "Failure",
            "value": "Failure",
            "description": "The code execution failed."
          }
        ]
      }
    },
    "CodeInputType": {
      "type": "string",
      "description": "Code input type.",
      "enum": [
        "inline",
        "inlineBase64",
        "inlineText"
      ],
      "x-ms-enum": {
        "name": "CodeInputType",
        "modelAsString": true,
        "values": [
          {
            "name": "inline",
            "value": "inline",
            "description": "Inline."
          },
          {
            "name": "inlineBase64",
            "value": "inlineBase64",
            "description": "InlineBase64."
          },
          {
            "name": "inlineText",
            "value": "inlineText",
            "description": "InlineText."
          }
        ]
      }
    },
    "ExecutionType": {
      "type": "string",
      "description": "Execution Type",
      "enum": [
        "synchronous"
      ],
      "x-ms-enum": {
        "name": "ExecutionType",
        "modelAsString": true,
        "values": [
          {
            "name": "synchronous",
            "value": "synchronous",
            "description": "Synchronous"
          }
        ]
      }
    },
    "ResourceGroup": {
      "type": "object",
      "description": "Resource group resource.",
      "properties": {
        "resourceGroupName": {
          "type": "string",
          "description": "The name of the resource group. The name is case insensitive.",
          "minLength": 1,
          "maxLength": 90
        }
      },
      "required": [
        "resourceGroupName"
      ]
    },
    "SessionPool": {
      "type": "object",
      "description": "Session pool resource.",
      "properties": {
        "sessionPoolName": {
          "type": "string",
          "description": "The name of the session pool."
        }
      },
      "required": [
        "sessionPoolName"
      ]
    },
    "Subscription": {
      "type": "object",
      "description": "Subscription resource.",
      "properties": {
        "subscriptionId": {
          "$ref": "#/definitions/Azure.Core.uuid",
          "description": "The ID of the target subscription. The value must be an UUID."
        }
      },
      "required": [
        "subscriptionId"
      ]
    }
  },
  "parameters": {
    "Azure.Core.Foundations.ApiVersionParameter": {
      "name": "api-version",
      "in": "query",
      "description": "The API version to use for this operation.",
      "required": true,
      "type": "string",
      "minLength": 1,
      "x-ms-parameter-location": "method",
      "x-ms-client-name": "apiVersion"
    },
    "CodeExecutionFileNameParameter": {
      "name": "filename",
      "in": "path",
      "description": "The name of the file.",
      "required": true,
      "type": "string",
      "x-ms-parameter-location": "method"
    },
    "ResourceGroupNameParameter": {
      "name": "resourceGroupName",
      "in": "path",
      "description": "The name of the resource group. The name is case insensitive.",
      "required": true,
      "type": "string",
      "minLength": 1,
      "maxLength": 90,
      "x-ms-parameter-location": "method"
    },
    "SessionIdentifier": {
      "name": "identifier",
      "in": "query",
      "description": "The identifier of the session.",
      "required": true,
      "type": "string",
      "x-ms-parameter-location": "client"
    },
    "SessionPoolNameParameter": {
      "name": "sessionPoolName",
      "in": "path",
      "description": "The name of the session pool.",
      "required": true,
      "type": "string",
      "x-ms-parameter-location": "method"
    },
    "SubscriptionIdParameter": {
      "name": "subscriptionId",
      "in": "path",
      "description": "The ID of the target subscription. The value must be an UUID.",
      "required": true,
      "type": "string",
      "format": "uuid",
      "x-ms-parameter-location": "client"
    }
  }
}
