{
  "swagger": "2.0",
  "info": {
    "title": "Azure Monitor Exporter",
    "version": "v2.1",
    "description": "OpenTelemetry Exporter for Azure Monitor",
    "x-typespec-generated": [
      {
        "emitter": "@azure-tools/typespec-autorest"
      }
    ]
  },
  "schemes": [
    "https"
  ],
  "x-ms-parameterized-host": {
    "hostTemplate": "{host}/{apiVersion}",
    "useSchemePrefix": false,
    "parameters": [
      {
        "name": "host",
        "in": "path",
        "description": "Application Insights' Breeze endpoint.",
        "required": true,
        "type": "string",
        "format": "uri",
        "default": "https://dc.services.visualstudio.com",
        "x-ms-skip-url-encoding": true
      },
      {
        "name": "apiVersion",
        "in": "path",
        "description": "The service API version.",
        "required": true,
        "type": "string",
        "enum": [
          "v2.1"
        ],
        "x-ms-enum": {
          "name": "Versions",
          "modelAsString": true,
          "values": [
            {
              "name": "V2_1",
              "value": "v2.1",
              "description": "The V2.1 API version."
            }
          ]
        }
      }
    ]
  },
  "produces": [
    "application/json"
  ],
  "consumes": [
    "application/json"
  ],
  "security": [
    {
      "OAuth2Auth": [
        "https://monitor.azure.com/.default"
      ]
    }
  ],
  "securityDefinitions": {
    "OAuth2Auth": {
      "type": "oauth2",
      "flow": "implicit",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
      "scopes": {
        "https://monitor.azure.com/.default": ""
      }
    }
  },
  "tags": [],
  "paths": {
    "/track": {
      "post": {
        "operationId": "Track",
        "summary": "Track telemetry events",
        "description": "This operation sends a sequence of telemetry events that will be monitored by\nAzure Monitor.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "description": "The list of telemetry events to track.",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/TelemetryEnvelope"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The request has succeeded.",
            "schema": {
              "$ref": "#/definitions/TrackResponse"
            }
          },
          "206": {
            "description": "Successful",
            "schema": {
              "$ref": "#/definitions/TrackResponse"
            }
          },
          "400": {
            "description": "Error response containing the status of each telemetry item.",
            "schema": {
              "$ref": "#/definitions/TrackResponse"
            },
            "x-ms-error-response": true
          },
          "402": {
            "description": "Error response containing the status of each telemetry item.",
            "schema": {
              "$ref": "#/definitions/TrackResponse"
            },
            "x-ms-error-response": true
          },
          "429": {
            "description": "Error response containing the status of each telemetry item.",
            "schema": {
              "$ref": "#/definitions/TrackResponse"
            },
            "x-ms-error-response": true
          },
          "500": {
            "description": "Error response containing the status of each telemetry item.",
            "schema": {
              "$ref": "#/definitions/TrackResponse"
            },
            "x-ms-error-response": true
          },
          "503": {
            "description": "Error response containing the status of each telemetry item.",
            "schema": {
              "$ref": "#/definitions/TrackResponse"
            },
            "x-ms-error-response": true
          }
        },
        "x-ms-examples": {
          "Send telemetry data": {
            "$ref": "./examples/track.json"
          }
        }
      }
    }
  },
  "definitions": {
    "AvailabilityData": {
      "type": "object",
      "description": "Instances of AvailabilityData represent the result of executing an availability\ntest.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Identifier of a test run. Use it to correlate steps of test run and telemetry\ngenerated by the service.",
          "maxLength": 512
        },
        "name": {
          "type": "string",
          "description": "Name of the test that these availability results represent.",
          "maxLength": 1024
        },
        "duration": {
          "type": "string",
          "description": "Duration in format: DD.HH:MM:SS.MMMMMM. Must be less than 1000 days."
        },
        "success": {
          "type": "boolean",
          "description": "Success flag."
        },
        "runLocation": {
          "type": "string",
          "description": "Name of the location where the test was run from.",
          "maxLength": 1024
        },
        "message": {
          "type": "string",
          "description": "Diagnostic message for the result.",
          "maxLength": 8192
        },
        "properties": {
          "type": "object",
          "description": "Collection of custom properties.",
          "additionalProperties": {
            "type": "string"
          }
        },
        "measurements": {
          "type": "object",
          "description": "Collection of custom measurements.",
          "additionalProperties": {
            "format": "double",
            "type": "number"
          }
        }
      },
      "required": [
        "id",
        "name",
        "duration",
        "success"
      ],
      "allOf": [
        {
          "$ref": "#/definitions/Domain"
        }
      ]
    },
    "Base": {
      "type": "object",
      "description": "Data struct to contain only C section with custom fields.",
      "properties": {
        "baseType": {
          "type": "string",
          "description": "Name of item (B section) if any. If telemetry data is derived straight from\nthis, this should be null."
        },
        "baseData": {
          "$ref": "#/definitions/Domain",
          "description": "The data payload for the telemetry request"
        }
      }
    },
    "DataPoint": {
      "type": "object",
      "description": "Metric data single measurement.",
      "properties": {
        "ns": {
          "type": "string",
          "description": "Namespace of the metric.",
          "maxLength": 256
        },
        "name": {
          "type": "string",
          "description": "Name of the metric.",
          "maxLength": 1024
        },
        "kind": {
          "$ref": "#/definitions/DataPointType",
          "description": "Metric type. Single measurement or the aggregated value."
        },
        "value": {
          "type": "number",
          "format": "double",
          "description": "Single value for measurement. Sum of individual measurements for the\naggregation."
        },
        "count": {
          "type": "integer",
          "format": "int32",
          "description": "Metric weight of the aggregated metric. Should not be set for a measurement."
        },
        "min": {
          "type": "number",
          "format": "double",
          "description": "Minimum value of the aggregated metric. Should not be set for a measurement."
        },
        "max": {
          "type": "number",
          "format": "double",
          "description": "Maximum value of the aggregated metric. Should not be set for a measurement."
        },
        "stdDev": {
          "type": "number",
          "format": "double",
          "description": "Standard deviation of the aggregated metric. Should not be set for a\nmeasurement."
        }
      },
      "required": [
        "name",
        "value"
      ]
    },
    "DataPointType": {
      "type": "string",
      "description": "Type of the metric data.",
      "enum": [
        "Measurement",
        "Aggregation"
      ],
      "x-ms-enum": {
        "name": "DataPointType",
        "modelAsString": true,
        "values": [
          {
            "name": "Measurement",
            "value": "Measurement",
            "description": "Single measurement."
          },
          {
            "name": "Aggregation",
            "value": "Aggregation",
            "description": "Aggregated value."
          }
        ]
      }
    },
    "Domain": {
      "type": "object",
      "description": "The abstract common base of all domains.",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int32",
          "description": "Schema version",
          "default": 2
        }
      },
      "required": [
        "ver"
      ],
      "additionalProperties": {}
    },
    "ErrorDetails": {
      "type": "object",
      "description": "The error details",
      "properties": {
        "index": {
          "type": "integer",
          "format": "int32",
          "description": "The index in the original payload of the item."
        },
        "statusCode": {
          "type": "integer",
          "format": "int32",
          "description": "The item specific [HTTP Response status code](#Response Status Codes)."
        },
        "message": {
          "type": "string",
          "description": "The error message."
        }
      }
    },
    "EventData": {
      "type": "object",
      "description": "Instances of Event represent structured event records that can be grouped and\nsearched by their properties. Event data item also creates a metric of event\ncount by name.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Event name. Keep it low cardinality to allow proper grouping and useful metrics.",
          "maxLength": 512
        },
        "properties": {
          "type": "object",
          "description": "Collection of custom properties.",
          "additionalProperties": {
            "type": "string"
          }
        },
        "measurements": {
          "type": "object",
          "description": "Collection of custom measurements.",
          "additionalProperties": {
            "format": "double",
            "type": "number"
          }
        }
      },
      "required": [
        "name"
      ],
      "allOf": [
        {
          "$ref": "#/definitions/Domain"
        }
      ]
    },
    "ExceptionData": {
      "type": "object",
      "description": "An instance of Exception represents a handled or unhandled exception that\noccurred during execution of the monitored application.",
      "properties": {
        "exceptions": {
          "type": "array",
          "description": "Exception chain - list of inner exceptions.",
          "items": {
            "$ref": "#/definitions/ExceptionDetails"
          }
        },
        "severityLevel": {
          "$ref": "#/definitions/SeverityLevel",
          "description": "Severity level. Mostly used to indicate exception severity level when it is\nreported by logging library."
        },
        "problemId": {
          "type": "string",
          "description": "Identifier of where the exception was thrown in code. Used for exceptions\ngrouping. Typically a combination of exception type and a function from the\ncall stack.",
          "maxLength": 1024
        },
        "properties": {
          "type": "object",
          "description": "Collection of custom properties.",
          "additionalProperties": {
            "type": "string"
          }
        },
        "measurements": {
          "type": "object",
          "description": "Collection of custom measurements.",
          "additionalProperties": {
            "format": "double",
            "type": "number"
          }
        }
      },
      "required": [
        "exceptions"
      ],
      "allOf": [
        {
          "$ref": "#/definitions/Domain"
        }
      ]
    },
    "ExceptionDetails": {
      "type": "object",
      "description": "Exception details of the exception in a chain.",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32",
          "description": "In case exception is nested (outer exception contains inner one), the id and\nouterId properties are used to represent the nesting."
        },
        "outerId": {
          "type": "integer",
          "format": "int32",
          "description": "The value of outerId is a reference to an element in ExceptionDetails that\nrepresents the outer exception"
        },
        "typeName": {
          "type": "string",
          "description": "Exception type name.",
          "maxLength": 1024
        },
        "message": {
          "type": "string",
          "description": "Exception message.",
          "maxLength": 32768
        },
        "hasFullStack": {
          "type": "boolean",
          "description": "Indicates if full exception stack is provided in the exception. The stack may\nbe trimmed, such as in the case of a StackOverflow exception.",
          "default": true
        },
        "stack": {
          "type": "string",
          "description": "Text describing the stack. Either stack or parsedStack should have a value.",
          "maxLength": 32768
        },
        "parsedStack": {
          "type": "array",
          "description": "List of stack frames. Either stack or parsedStack should have a value.",
          "items": {
            "$ref": "#/definitions/StackFrame"
          }
        }
      },
      "required": [
        "message"
      ]
    },
    "MessageData": {
      "type": "object",
      "description": "Instances of Message represent printf-like trace statements that are\ntext-searched. Log4Net, NLog and other text-based log file entries are\ntranslated into instances of this type. The message does not have measurements.",
      "properties": {
        "message": {
          "type": "string",
          "description": "Trace message",
          "maxLength": 32768
        },
        "severityLevel": {
          "$ref": "#/definitions/SeverityLevel",
          "description": "Trace severity level."
        },
        "properties": {
          "type": "object",
          "description": "Collection of custom properties.",
          "additionalProperties": {
            "type": "string"
          }
        },
        "measurements": {
          "type": "object",
          "description": "Collection of custom measurements.",
          "additionalProperties": {
            "format": "double",
            "type": "number"
          }
        }
      },
      "required": [
        "message"
      ],
      "allOf": [
        {
          "$ref": "#/definitions/Domain"
        }
      ]
    },
    "MetricsData": {
      "type": "object",
      "description": "An instance of the Metric item is a list of measurements (single data points)\nand/or aggregations.",
      "properties": {
        "metrics": {
          "type": "array",
          "description": "List of metrics. Only one metric in the list is currently supported by\nApplication Insights storage. If multiple data points were sent only the first\none will be used.",
          "items": {
            "$ref": "#/definitions/DataPoint"
          }
        },
        "properties": {
          "type": "object",
          "description": "Collection of custom properties.",
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "required": [
        "metrics"
      ],
      "allOf": [
        {
          "$ref": "#/definitions/Domain"
        }
      ]
    },
    "PageViewData": {
      "type": "object",
      "description": "An instance of PageView represents a generic action on a page like a button\nclick. It is also the base type for PageView.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Identifier of a page view instance. Used for correlation between page view and\nother telemetry items.",
          "maxLength": 512
        },
        "name": {
          "type": "string",
          "description": "Event name. Keep it low cardinality to allow proper grouping and useful metrics.",
          "maxLength": 512
        },
        "url": {
          "type": "string",
          "description": "Request URL with all query string parameters",
          "maxLength": 2048
        },
        "duration": {
          "type": "string",
          "description": "Request duration in format: DD.HH:MM:SS.MMMMMM. For a page view (PageViewData),\nthis is the duration. For a page view with performance information\n(PageViewPerfData), this is the page load time. Must be less than 1000 days."
        },
        "referredUri": {
          "type": "string",
          "description": "Fully qualified page URI or URL of the referring page; if unknown, leave blank",
          "maxLength": 2048
        },
        "properties": {
          "type": "object",
          "description": "Collection of custom properties.",
          "additionalProperties": {
            "type": "string"
          }
        },
        "measurements": {
          "type": "object",
          "description": "Collection of custom measurements.",
          "additionalProperties": {
            "format": "double",
            "type": "number"
          }
        }
      },
      "required": [
        "id",
        "name"
      ],
      "allOf": [
        {
          "$ref": "#/definitions/Domain"
        }
      ]
    },
    "PageViewPerfData": {
      "type": "object",
      "description": "An instance of PageViewPerf represents: a page view with no performance data, a\npage view with performance data, or just the performance data of an earlier\npage request.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Identifier of a page view instance. Used for correlation between page view and\nother telemetry items.",
          "maxLength": 512
        },
        "name": {
          "type": "string",
          "description": "Event name. Keep it low cardinality to allow proper grouping and useful metrics.",
          "maxLength": 512
        },
        "url": {
          "type": "string",
          "description": "Request URL with all query string parameters",
          "maxLength": 2048
        },
        "duration": {
          "type": "string",
          "description": "Request duration in format: DD.HH:MM:SS.MMMMMM. For a page view (PageViewData),\nthis is the duration. For a page view with performance information\n(PageViewPerfData), this is the page load time. Must be less than 1000 days."
        },
        "perfTotal": {
          "type": "string",
          "description": "Performance total in TimeSpan 'G' (general long) format: d:hh:mm:ss.fffffff"
        },
        "networkConnect": {
          "type": "string",
          "description": "Network connection time in TimeSpan 'G' (general long) format:\nd:hh:mm:ss.fffffff"
        },
        "sentRequest": {
          "type": "string",
          "description": "Sent request time in TimeSpan 'G' (general long) format: d:hh:mm:ss.fffffff"
        },
        "receivedResponse": {
          "type": "string",
          "description": "Received response time in TimeSpan 'G' (general long) format: d:hh:mm:ss.fffffff"
        },
        "domProcessing": {
          "type": "string",
          "description": "DOM processing time in TimeSpan 'G' (general long) format: d:hh:mm:ss.fffffff"
        },
        "properties": {
          "type": "object",
          "description": "Collection of custom properties.",
          "additionalProperties": {
            "type": "string"
          }
        },
        "measurements": {
          "type": "object",
          "description": "Collection of custom measurements.",
          "additionalProperties": {
            "format": "double",
            "type": "number"
          }
        }
      },
      "required": [
        "id",
        "name"
      ],
      "allOf": [
        {
          "$ref": "#/definitions/Domain"
        }
      ]
    },
    "RemoteDependencyData": {
      "type": "object",
      "description": "An instance of Remote Dependency represents an interaction of the monitored\ncomponent with a remote component/service like SQL or an HTTP endpoint.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Identifier of a dependency call instance. Used for correlation with the request\ntelemetry item corresponding to this dependency call.",
          "maxLength": 512
        },
        "name": {
          "type": "string",
          "description": "Name of the command initiated with this dependency call. Low cardinality value.\nExamples are stored procedure name and URL path template.",
          "maxLength": 1024
        },
        "resultCode": {
          "type": "string",
          "description": "Result code of a dependency call. Examples are SQL error code and HTTP status\ncode.",
          "maxLength": 1024
        },
        "data": {
          "type": "string",
          "description": "Command initiated by this dependency call. Examples are SQL statement and HTTP\nURL with all query parameters.",
          "maxLength": 8192
        },
        "type": {
          "type": "string",
          "description": "Dependency type name. Very low cardinality value for logical grouping of\ndependencies and interpretation of other fields like commandName and\nresultCode. Examples are SQL, Azure table, and HTTP.",
          "maxLength": 1024
        },
        "target": {
          "type": "string",
          "description": "Target site of a dependency call. Examples are server name, host address.",
          "maxLength": 1024
        },
        "duration": {
          "type": "string",
          "description": "Request duration in format: DD.HH:MM:SS.MMMMMM. Must be less than 1000 days."
        },
        "success": {
          "type": "boolean",
          "description": "Indication of successful or unsuccessful call.",
          "default": true
        },
        "properties": {
          "type": "object",
          "description": "Collection of custom properties.",
          "additionalProperties": {
            "type": "string"
          }
        },
        "measurements": {
          "type": "object",
          "description": "Collection of custom measurements.",
          "additionalProperties": {
            "format": "double",
            "type": "number"
          }
        }
      },
      "required": [
        "name",
        "duration"
      ],
      "allOf": [
        {
          "$ref": "#/definitions/Domain"
        }
      ]
    },
    "RequestData": {
      "type": "object",
      "description": "An instance of Request represents completion of an external request to the\napplication to do work and contains a summary of that request execution and the\nresults.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Identifier of a request call instance. Used for correlation between request and\nother telemetry items.",
          "maxLength": 512
        },
        "name": {
          "type": "string",
          "description": "Name of the request. Represents code path taken to process request. Low\ncardinality value to allow better grouping of requests. For HTTP requests it\nrepresents the HTTP method and URL path template like 'GET /values/{id}'.",
          "maxLength": 1024
        },
        "duration": {
          "type": "string",
          "description": "Request duration in format: DD.HH:MM:SS.MMMMMM. Must be less than 1000 days."
        },
        "success": {
          "type": "boolean",
          "description": "Indication of successful or unsuccessful call.",
          "default": true
        },
        "responseCode": {
          "type": "string",
          "description": "Result of a request execution. HTTP status code for HTTP requests.",
          "maxLength": 1024
        },
        "source": {
          "type": "string",
          "description": "Source of the request. Examples are the instrumentation key of the caller or\nthe ip address of the caller.",
          "maxLength": 1024
        },
        "url": {
          "type": "string",
          "description": "Request URL with all query string parameters.",
          "maxLength": 2048
        },
        "properties": {
          "type": "object",
          "description": "Collection of custom properties.",
          "additionalProperties": {
            "type": "string"
          }
        },
        "measurements": {
          "type": "object",
          "description": "Collection of custom measurements.",
          "additionalProperties": {
            "format": "double",
            "type": "number"
          }
        }
      },
      "required": [
        "id",
        "duration",
        "success",
        "responseCode"
      ],
      "allOf": [
        {
          "$ref": "#/definitions/Domain"
        }
      ]
    },
    "SeverityLevel": {
      "type": "string",
      "description": "Defines the level of severity for the event.",
      "enum": [
        "Verbose",
        "Information",
        "Warning",
        "Error",
        "Critical"
      ],
      "x-ms-enum": {
        "name": "SeverityLevel",
        "modelAsString": true,
        "values": [
          {
            "name": "Verbose",
            "value": "Verbose",
            "description": "Verbose level."
          },
          {
            "name": "Information",
            "value": "Information",
            "description": "Information level."
          },
          {
            "name": "Warning",
            "value": "Warning",
            "description": "Warning level."
          },
          {
            "name": "Error",
            "value": "Error",
            "description": "Error level."
          },
          {
            "name": "Critical",
            "value": "Critical",
            "description": "Critical level."
          }
        ]
      }
    },
    "StackFrame": {
      "type": "object",
      "description": "Stack frame information.",
      "properties": {
        "level": {
          "type": "integer",
          "format": "int32",
          "description": "Level in the stack."
        },
        "method": {
          "type": "string",
          "description": "Method name.",
          "maxLength": 1024
        },
        "assembly": {
          "type": "string",
          "description": "Name of the assembly (dll, jar, etc.) containing this function.",
          "maxLength": 1024
        },
        "fileName": {
          "type": "string",
          "description": "File name or URL of the method implementation.",
          "maxLength": 1024
        },
        "line": {
          "type": "integer",
          "format": "int32",
          "description": "Line number of the code implementation."
        }
      },
      "required": [
        "level",
        "method"
      ]
    },
    "TelemetryEnvelope": {
      "type": "object",
      "description": "System variables for a telemetry item.",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int32",
          "description": "Envelope version. For internal use only. By assigning this the default, it will\nnot be serialized within the payload unless changed to a value other than #1.",
          "default": 1
        },
        "name": {
          "type": "string",
          "description": "Type name of telemetry data item."
        },
        "time": {
          "type": "string",
          "format": "date-time",
          "description": "Event date time when telemetry item was created. This is the wall clock time on\nthe client when the event was generated. There is no guarantee that the\nclient's time is accurate. This field must be formatted in UTC ISO 8601 format,\nwith a trailing 'Z' character, as described publicly on\nhttps://en.wikipedia.org/wiki/ISO_8601#UTC. Note: the number of decimal seconds\ndigits provided are variable (and unspecified). Consumers should handle this,\ni.e. managed code consumers should not use format 'O' for parsing as it\nspecifies a fixed length. Example: 2009-06-15T13:45:30.0000000Z."
        },
        "sampleRate": {
          "type": "number",
          "format": "float",
          "description": "Sampling rate used in application. This telemetry item represents 100 /\nsampleRate actual telemetry items.",
          "default": 100
        },
        "seq": {
          "type": "string",
          "description": "Sequence field used to track absolute order of uploaded events.",
          "maxLength": 64
        },
        "iKey": {
          "type": "string",
          "description": "The instrumentation key of the Application Insights resource."
        },
        "tags": {
          "type": "object",
          "description": "Key/value collection of context properties. See ContextTagKeys for information\non available properties.",
          "additionalProperties": {
            "type": "string"
          }
        },
        "data": {
          "$ref": "#/definitions/Base",
          "description": "Telemetry data item."
        }
      },
      "required": [
        "name",
        "time"
      ]
    },
    "TrackResponse": {
      "type": "object",
      "description": "Response containing the status of each telemetry item.",
      "properties": {
        "itemsReceived": {
          "type": "integer",
          "format": "int32",
          "description": "The number of items received."
        },
        "itemsAccepted": {
          "type": "integer",
          "format": "int32",
          "description": "The number of items accepted."
        },
        "errors": {
          "type": "array",
          "description": "An array of error detail objects.",
          "items": {
            "$ref": "#/definitions/ErrorDetails"
          }
        }
      }
    }
  },
  "parameters": {}
}
