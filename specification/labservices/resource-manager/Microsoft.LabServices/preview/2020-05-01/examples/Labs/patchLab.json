{
  "parameters": {
    "api-version": "2020-05-01-preview",
    "subscriptionId": "34adfa4f-cedf-4dc0-ba29-b6d1a69ab345",
    "resourceGroupName": "testrg123",
    "labName": "testlab",
    "body": {
      "properties": {
        "securityProfile": {
          "openAccess": "Enabled"
        }
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/testrg123/providers/Microsoft.LabServices/labs/testlab",
        "name": "testlabplan",
        "type": "Microsoft.LabServices/Lab",
        "location": "westus",
        "systemData": {
          "createdBy": "identity123",
          "createdByType": "User",
          "createdAt": "2020-05-01T10:00:00Z",
          "lastModifiedBy": "identity123",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2020-06-01T09:12:28Z"
        },
        "properties": {
          "provisioningState": "Succeeded",
          "connectionProfile": {
            "webSshAccessEnabled": "Enabled",
            "webRdpAccessEnabled": "Enabled",
            "clientSshAccessEnabled": "Disabled",
            "clientRdpAccessEnabled": "Disabled"
          },
          "autoShutdownProfile": {
            "shutdownOnDisconnectEnabled": "Enabled",
            "shutdownWhenNotConnectedEnabled": "Enabled",
            "shutdownOnIdleEnabled": "Enabled",
            "disconnectDelay": "00:05",
            "noConnectDelay": "01:00",
            "idleDelay": "01:00"
          },
          "securityProfile": {
            "registrationCode": "fAkEcodE",
            "openAccess": "Enabled"
          },
          "networkProfile": {
            "virtualNetworkId": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/testrg123/providers/Microsoft.Network/virtualNetworks/test-vnet",
            "addressRange": "10.6.0.0/16"
          },
          "virtualMachineProfile": {
            "createOption": "TemplateVM",
            "imageReference": {
              "offer": "WindowsServer",
              "publisher": "Microsoft",
              "sku": "2019-Datacenter",
              "version": "2019.0.20190410"
            },
            "sku": {
              "name": "Medium",
              "resourceType": "VirtualMachine",
              "capabilities": {
                "coreCount": 4,
                "memoryInGB": 7,
                "discreteGpuEnabled": "Disabled"
              },
              "locations": [
                "westus"
              ],
              "capacity": 20
            },
            "additionalCapabilities": {
              "installGpuDrivers": "Disabled"
            },
            "usageQuota": "10:00",
            "sharedPasswordEnabled": "Disabled",
            "username": "test-user"
          },
          "title": "Test Lab",
          "description": "This is a test lab.",
          "labPlanId": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/testrg123/providers/Microsoft.LabServices/labPlans/testlabplan",
          "state": "Draft"
        }
      }
    },
    "202": {
      "body": {
        "id": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/testrg123/providers/Microsoft.LabServices/labs/testlab",
        "name": "testlabplan",
        "type": "Microsoft.LabServices/Lab",
        "location": "westus",
        "systemData": {
          "createdBy": "identity123",
          "createdByType": "User",
          "createdAt": "2020-05-01T10:00:00Z",
          "lastModifiedBy": "identity123",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2020-06-01T09:12:28Z"
        },
        "properties": {
          "provisioningState": "Updating",
          "connectionProfile": {
            "webSshAccessEnabled": "Enabled",
            "webRdpAccessEnabled": "Enabled",
            "clientSshAccessEnabled": "Disabled",
            "clientRdpAccessEnabled": "Disabled"
          },
          "autoShutdownProfile": {
            "shutdownOnDisconnectEnabled": "Enabled",
            "shutdownWhenNotConnectedEnabled": "Enabled",
            "shutdownOnIdleEnabled": "Enabled",
            "disconnectDelay": "00:05",
            "noConnectDelay": "01:00",
            "idleDelay": "01:00"
          },
          "securityProfile": {
            "registrationCode": "fAkEcodE",
            "openAccess": "Enabled"
          },
          "networkProfile": {
            "virtualNetworkId": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/testrg123/providers/Microsoft.Network/virtualNetworks/test-vnet",
            "addressRange": "10.6.0.0/16"
          },
          "virtualMachineProfile": {
            "createOption": "TemplateVM",
            "imageReference": {
              "offer": "WindowsServer",
              "publisher": "Microsoft",
              "sku": "2019-Datacenter",
              "version": "2019.0.20190410"
            },
            "osType": "Windows",
            "sku": {
              "name": "Medium",
              "resourceType": "VirtualMachine",
              "capabilities": {
                "coreCount": 4,
                "memoryInGB": 7,
                "discreteGpuEnabled": "Disabled"
              },
              "locations": [
                "westus"
              ],
              "capacity": 20
            },
            "additionalCapabilities": {
              "installGpuDrivers": "Disabled"
            },
            "usageQuota": "10:00",
            "sharedPasswordEnabled": "Disabled",
            "username": "test-user"
          },
          "title": "Test Lab",
          "description": "This is a test lab.",
          "labPlanId": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/testrg123/providers/Microsoft.LabServices/labPlans/testlabplan",
          "state": "Draft"
        }
      },
      "headers": {
        "Location": "https://management.azure.com/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/providers/Microsoft.LabServices/operationresults/a64149d8-84cb-4566-ab8e-b4ee1a074174"
      }
    }
  }
}
