{
  "swagger":"2.0",
  "info":{
     "title":"ApiManagementClient",
     "description":"Use this REST APIs to perform connectivity troubleshoot operations in API Management deployments.",
     "version":"2021-04-01-preview"
  },
  "host":"management.azure.com",
  "schemes":[
     "https"
  ],
  "consumes":[
     "application/json"
  ],
  "produces":[
     "application/json"
  ],
  "security":[
     {
        "azure_auth":[
           "user_impersonation"
        ]
     }
  ],
  "securityDefinitions":{
     "azure_auth":{
        "type":"oauth2",
        "authorizationUrl":"https://login.microsoftonline.com/common/oauth2/authorize",
        "flow":"implicit",
        "description":"Azure Active Directory OAuth2 Flow.",
        "scopes":{
           "user_impersonation":"impersonate your user account"
        }
     }
  },
  "paths":{
     "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/connectivityCheck":{
        "post":{
           "tags":[
              "PerformConnectivityCheck"
           ],
           "operationId":"PerformConnectivityCheckAsync",
           "description":"Performs a connectivity check between the API Management service and a given destination, and returns metrics for the connection, as well as errors encountered while trying to establish it.",
           "x-ms-examples":{
              "ApiManagementPerformConnectivityCheck":{
                 "$ref":"./examples/ApiManagementPerformConnectivityCheck.json"
              }
           },
           "parameters":[
              {
                 "$ref":"./apimanagement.json#/parameters/ResourceGroupNameParameter"
              },
              {
                 "$ref":"./apimanagement.json#/parameters/ServiceNameParameter"
              },
              {
                 "$ref":"./apimanagement.json#/parameters/ApiVersionParameter"
              },
              {
                 "$ref":"./apimanagement.json#/parameters/SubscriptionIdParameter"
              },
              {
                 "name":"connectivityCheckRequestParams",
                 "in":"body",
                 "required":true,
                 "schema":{
                    "$ref":"./definitions.json#/definitions/ConnectivityCheckRequest"
                 }
              }
           ],
           "responses":{
              "201":{
                 "description":"Request to perform connectivity check between an API Management Service and an arbitrary destination. Location header contains the URL where the status of the long running operation can be checked."
              },
              "200":{
                 "description":"Connectivity Check Request was completed.",
                 "schema":{
                    "$ref":"./definitions.json#/definitions/ConnectivityCheckResponse"
                 }
              },
              "default":{
                 "description":"Error response describing why the operation failed.",
                 "schema":{
                    "$ref":"./apimanagement.json#/definitions/ErrorResponse"
                 }
              }
           },
           "x-ms-long-running-operation":true
        }
     }
  }
}
