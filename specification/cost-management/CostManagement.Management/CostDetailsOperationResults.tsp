import "@azure-tools/typespec-azure-core";
import "@azure-tools/typespec-azure-resource-manager";
import "@typespec/openapi";
import "@typespec/rest";
import "./models.tsp";

using TypeSpec.Rest;
using Azure.ResourceManager;
using TypeSpec.Http;
using TypeSpec.OpenAPI;

namespace Microsoft.CostManagement;
// FIXME: CostDetailsOperationResults has no properties property
/**
 * The result of the long running operation for cost details Api.
 */
model CostDetailsOperationResults
  is Azure.ResourceManager.ExtensionResource<never> {
  ...ResourceNameParameter<
    Resource = CostDetailsOperationResults,
    KeyName = "operationId",
    SegmentName = "costDetailsOperationResults",
    NamePattern = ""
  >;

  /**
   * The status of the cost details operation
   */
  #suppress "@azure-tools/typespec-azure-resource-manager/arm-resource-invalid-envelope-property" "FIXME: Update justification, follow aka.ms/tsp/conversion-fix for details"
  status?: CostDetailsStatusType;

  /**
   * The manifest of the report generated by the operation.
   */
  #suppress "@azure-tools/typespec-azure-resource-manager/arm-resource-invalid-envelope-property" "FIXME: Update justification, follow aka.ms/tsp/conversion-fix for details"
  manifest?: ReportManifest;

  /**
   * The time at which report URL becomes invalid/expires in UTC e.g. 2020-12-08T05:55:59.4394737Z.
   */
  // FIXME: (utcDateTime) Please double check that this is the correct type for your scenario.
  #suppress "@azure-tools/typespec-azure-resource-manager/arm-resource-invalid-envelope-property" "FIXME: Update justification, follow aka.ms/tsp/conversion-fix for details"
  validTill?: utcDateTime;

  /**
   * The details of the error.
   */
  #suppress "@azure-tools/typespec-azure-resource-manager/arm-resource-invalid-envelope-property" "FIXME: Update justification, follow aka.ms/tsp/conversion-fix for details"
  error?: ErrorDetails;
}

@armResourceOperations
interface GenerateCostDetailsReport {
  /**
   * Get the result of the specified operation. This link is provided in the CostDetails creation request response Location header.
   */
  getOperationResults is Extension.Read<
    Extension.ScopeParameter,
    CostDetailsOperationResults,
    Response = ArmResponse<CostDetailsOperationResults> | ArmAcceptedLroResponse<LroHeaders = ArmLroLocationHeader<FinalResult = CostDetailsOperationResults>>,
    Error = ErrorResponse
  >;
}

@@doc(CostDetailsOperationResults.name, "The target operation Id.");
