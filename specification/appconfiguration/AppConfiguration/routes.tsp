import "@azure-tools/typespec-azure-core";
import "@typespec/rest";
import "./models.tsp";

using TypeSpec.Rest;
using TypeSpec.Http;
using Azure.Core;
using Azure.Core.Traits;

namespace AzureAppConfiguration;

alias standardOps = StandardResourceOperations;
alias acceptHeader<T extends string> = {
  @doc("Accept header")
  @header
  accept: T | "application/problem+json" | string;
};

alias AppConfigResponseHeaders = {
  @doc("Used to guarantee real-time consistency between requests.")
  @header("Sync-Token")
  syncToken?: string;

  @doc("A value representing the current state of the resource.")
  @header("ETag")
  etagHeader?: string;
};

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Gets a list of keys.")
@doc("Gets a list of keys.")
op getKeys is Foundations.ResourceList<
  Key,
  {
    @doc("A filter for the name of the returned keys.")
    @query("name")
    name?: string;

    @doc("""
  Instructs the server to return elements that appear after the element referred
  to by the specified token.
  """)
    @query("After")
    after?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Requests the server to respond with the state of the resource at the specified
time.
""")
    @header("Accept-Datetime")
    acceptDatetime?: string;
  },
  KeyListResult & {
    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    ...acceptHeader<"application/vnd.microsoft.appconfig.keyset+json">;
  }
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "No data-plane HEAD operation template"
@summary("Requests the headers and status of the given resource.")
@doc("Requests the headers and status of the given resource.")
@route("/keys")
@head
op checkKeys is Azure.Core.Foundations.Operation<
  {
    @doc("A filter for the name of the returned keys.")
    @query("name")
    name?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Instructs the server to return elements that appear after the element referred
to by the specified token.
""")
    @query("After")
    after?: string;

    @doc("""
Requests the server to respond with the state of the resource at the specified
time.
""")
    @header("Accept-Datetime")
    acceptDatetime?: string;
  },
  OkResponse & {
    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;
  }
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Gets a list of key-values.")
@doc("Gets a list of key-values.")
op getKeyValues is Foundations.ResourceList<
  KeyValue,
  {
    @doc("""
A filter used to match keys. Syntax reference:
https://aka.ms/azconfig/docs/keyvaluefiltering
""")
    @query("key")
    key?: string;

    @doc("""
A filter used to match labels. Syntax reference:
https://aka.ms/azconfig/docs/keyvaluefiltering
""")
    @query("label")
    label?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Instructs the server to return elements that appear after the element referred
to by the specified token.
""")
    @query("After")
    after?: string;

    @doc("""
Requests the server to respond with the state of the resource at the specified
time.
""")
    @header("Accept-Datetime")
    acceptDatetime?: string;

    @doc("Used to select what fields are present in the returned resource(s).")
    @query({
      name: "$Select",
      format: "csv",
    })
    select?: KeyValueFields[];

    @doc("""
A filter used get key-values for a snapshot. The value should be the name of
the snapshot. Not valid when used with 'key' and 'label' filters.
""")
    @query("snapshot")
    snapshot?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag matches the
value provided.
""")
    @header("If-Match")
    ifMatch?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag does not
match the value provided.
""")
    @header("If-None-Match")
    ifNoneMatch?: string;

    #suppress "@azure-tools/typespec-azure-core/prefer-csv-collection-format" "Pre-existing API contract"
    @doc("""
A filter used to query by tags. Syntax reference:
https://aka.ms/azconfig/docs/keyvaluefiltering
""")
    @query({
      name: "tags",
      format: "multi",
    })
    tags?: string[];
  },
  KeyValueListResult &
    AppConfigResponseHeaders &
    acceptHeader<"application/vnd.microsoft.appconfig.kvset+json">
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "No data-plane HEAD operation template"
@summary("Requests the headers and status of the given resource.")
@doc("Requests the headers and status of the given resource.")
@route("/kv")
@head
op checkKeyValues is Azure.Core.Foundations.Operation<
  {
    @doc("""
A filter used to match keys. Syntax reference:
https://aka.ms/azconfig/docs/keyvaluefiltering
""")
    @query("key")
    key?: string;

    @doc("""
A filter used to match labels. Syntax reference:
https://aka.ms/azconfig/docs/keyvaluefiltering
""")
    @query("label")
    label?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Instructs the server to return elements that appear after the element referred
to by the specified token.
""")
    @query("After")
    after?: string;

    @doc("""
Requests the server to respond with the state of the resource at the specified
time.
""")
    @header("Accept-Datetime")
    acceptDatetime?: string;

    @doc("Used to select what fields are present in the returned resource(s).")
    @query({
      name: "$Select",
      format: "csv",
    })
    select?: KeyValueFields[];

    @doc("""
A filter used get key-values for a snapshot. Not valid when used with 'key' and
'label' filters.
""")
    @query("snapshot")
    snapshot?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag matches the
value provided.
""")
    @header("If-Match")
    ifMatch?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag does not
match the value provided.
""")
    @header("If-None-Match")
    ifNoneMatch?: string;

    #suppress "@azure-tools/typespec-azure-core/prefer-csv-collection-format" "Pre-existing API contract"
    @doc("""
A filter used to query by tags. Syntax reference:
https://aka.ms/azconfig/docs/keyvaluefiltering
""")
    @query({
      name: "tags",
      format: "multi",
    })
    tags?: string[];
  },
  OkResponse & AppConfigResponseHeaders
>;

@summary("Gets a single key-value.")
@doc("Gets a single key-value.")
op getKeyValue is standardOps.ResourceRead<
  KeyValue,
  QueryParametersTrait<{
    @doc("The label of the key-value to retrieve.")
    @query("label")
    label?: string;

    @doc("Used to select what fields are present in the returned resource(s).")
    @query({
      name: "$Select",
      format: "csv",
    })
    select?: KeyValueFields[];
  }> &
    RequestHeadersTrait<{
      @doc("Used to guarantee real-time consistency between requests.")
      @header("Sync-Token")
      syncToken?: string;

      @doc("""
Requests the server to respond with the state of the resource at the specified
time.
""")
      @header("Accept-Datetime")
      acceptDatetime?: string;

      @doc("""
Used to perform an operation only if the targeted resource's etag matches the
value provided.
""")
      @header("If-Match")
      ifMatch?: string;

      @doc("""
Used to perform an operation only if the targeted resource's etag does not
match the value provided.
""")
      @header("If-None-Match")
      ifNoneMatch?: string;
    }> &
    ResponseHeadersTrait<AppConfigResponseHeaders &
      acceptHeader<"application/vnd.microsoft.appconfig.kv+json">>
>;

// FIXME: check is service returns 201 and/or 200?
// Check if this operation is an LRO?
#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Creates a key-value.")
@doc("Creates a key-value.")
@route("/kv/{key}")
@put
op putKeyValue is Foundations.Operation<
  {
    @doc("The key of the key-value to create.")
    @path
    key: string;

    @doc("The label of the key-value to create.")
    @query("label")
    label?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag matches the
value provided.
""")
    @header("If-Match")
    ifMatch?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag does not
match the value provided.
""")
    @header("If-None-Match")
    ifNoneMatch?: string;

    @doc("The key-value to create.")
    @body
    entity?: KeyValue;
  },
  KeyValue &
    AppConfigResponseHeaders &
    acceptHeader<"application/vnd.microsoft.appconfig.kv+json">
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Deletes a key-value.")
@doc("Deletes a key-value.")
@route("/kv/{key}")
@delete
op deleteKeyValue is Foundations.Operation<
  {
    @doc("The key of the key-value to delete.")
    @path
    key: string;

    @doc("The label of the key-value to delete.")
    @query("label")
    label?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag matches the
value provided.
""")
    @header("If-Match")
    ifMatch?: string;
  },
  (KeyValue &
    AppConfigResponseHeaders &
    acceptHeader<"application/vnd.microsoft.appconfig.kvset+json">) | {
    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    ...acceptHeader<"application/vnd.microsoft.appconfig.kv+json">;
  }
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "No data-plane HEAD operation template"
@summary("Requests the headers and status of the given resource.")
@doc("Requests the headers and status of the given resource.")
@route("/kv/{key}")
@head
op checkKeyValue is Azure.Core.Foundations.Operation<
  {
    @doc("The key of the key-value to retrieve.")
    @path
    key: string;

    @doc("The label of the key-value to retrieve.")
    @query("label")
    label?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Requests the server to respond with the state of the resource at the specified
time.
""")
    @header("Accept-Datetime")
    acceptDatetime?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag matches the
value provided.
""")
    @header("If-Match")
    ifMatch?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag does not
match the value provided.
""")
    @header("If-None-Match")
    ifNoneMatch?: string;

    @doc("Used to select what fields are present in the returned resource(s).")
    @query({
      name: "$Select",
      format: "csv",
    })
    select?: KeyValueFields[];
  },
  OkResponse & AppConfigResponseHeaders
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Gets a list of key-value snapshots.")
@doc("Gets a list of key-value snapshots.")
op getSnapshots is Foundations.ResourceList<
  Snapshot,
  {
    @doc("A filter for the name of the returned snapshots.")
    @query("name")
    name?: string;

    @doc("""
Instructs the server to return elements that appear after the element referred
to by the specified token.
""")
    @query("After")
    after?: string;

    @doc("Used to select what fields are present in the returned resource(s).")
    @query({
      name: "$Select",
      format: "csv",
    })
    select?: SnapshotFields[];

    @doc("Used to filter returned snapshots by their status property.")
    @query({
      name: "status",
      format: "csv",
    })
    status?: SnapshotStatus[];

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;
  },
  SnapshotListResult & {
    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    ...acceptHeader<"application/vnd.microsoft.appconfig.snapshotset+json">;
  }
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "No data-plane HEAD operation template"
@summary("Requests the headers and status of the given resource.")
@doc("Requests the headers and status of the given resource.")
@route("/snapshots")
@head
op checkSnapshots is Azure.Core.Foundations.Operation<
  {
    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Instructs the server to return elements that appear after the element referred
to by the specified token.
""")
    @query("After")
    after?: string;
  },
  OkResponse & {
    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;
  }
>;

@summary("Gets a single key-value snapshot.")
@doc("Gets a single key-value snapshot.")
op getSnapshot is standardOps.ResourceRead<
  Snapshot,
  QueryParametersTrait<{
    @doc("Used to select what fields are present in the returned resource(s).")
    @query({
      name: "$Select",
      format: "csv",
    })
    select?: SnapshotFields[];
  }> &
    RequestHeadersTrait<{
      @doc("Used to guarantee real-time consistency between requests.")
      @header("Sync-Token")
      syncToken?: string;

      @doc("""
Used to perform an operation only if the targeted resource's etag matches the
value provided.
""")
      @header("If-Match")
      ifMatch?: string;

      @doc("""
Used to perform an operation only if the targeted resource's etag does not
match the value provided.
""")
      @header("If-None-Match")
      ifNoneMatch?: string;
    }> &
    ResponseHeadersTrait<AppConfigResponseHeaders & {
      @doc("Includes links to related resources.")
      @header("Link")
      link?: string;

      ...acceptHeader<"application/vnd.microsoft.appconfig.snapshot+json">;
    }>
>;

// FIXME: check if the service also supports returning a 200, then can try to use LongRunningResourceCreateOrReplace template, if no SDKs rely on the body name
#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Creates a key-value snapshot.")
@doc("Creates a key-value snapshot.")
@route("/snapshots/{name}")
@pollingOperation(getSnapshotOperationDetails)
@put
op createSnapshot is Foundations.LongRunningOperation<
  {
    @doc("The name of the key-value snapshot to create.")
    @maxLength(256)
    @path
    name: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("The key-value snapshot to create.")
    @body
    entity: Snapshot;
  },
  CreatedResponse &
    Snapshot & {
      ...AppConfigResponseHeaders;

      @doc("Includes links to related resources.")
      @header("Link")
      link?: string;

      ...acceptHeader<"application/vnd.microsoft.appconfig.snapshot+json">;
    }
>;

// FIXME: check if the service also supports returning a 201, then can try to use ResourceCreateOrUpdate template, if no SDKs rely on the body name
#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Updates the state of a key-value snapshot.")
@doc("Updates the state of a key-value snapshot.")
@route("/snapshots/{name}")
@patch
op updateSnapshot is Foundations.Operation<
  {
    @doc("The name of the key-value snapshot to update.")
    @path
    name: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag matches the
value provided.
""")
    @header("If-Match")
    ifMatch?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag does not
match the value provided.
""")
    @header("If-None-Match")
    ifNoneMatch?: string;

    @doc("The parameters used to update the snapshot.")
    @body
    entity: SnapshotUpdateParameters;
  },
  Snapshot & {
    ...AppConfigResponseHeaders;

    @doc("Includes links to related resources.")
    @header("Link")
    link?: string;

    ...acceptHeader<"application/vnd.microsoft.appconfig.snapshot+json">;
  }
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "No data-plane HEAD operation template"
@summary("Requests the headers and status of the given resource.")
@doc("Requests the headers and status of the given resource.")
@route("/snapshots/{name}")
@head
op checkSnapshot is Foundations.Operation<
  {
    @doc("The name of the key-value snapshot to check.")
    @path
    name: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag matches the
value provided.
""")
    @header("If-Match")
    ifMatch?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag does not
match the value provided.
""")
    @header("If-None-Match")
    ifNoneMatch?: string;
  },
  OkResponse & {
    ...AppConfigResponseHeaders;

    @doc("Includes links to related resources.")
    @header("Link")
    link?: string;
  }
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Gets a list of labels.")
@doc("Gets a list of labels.")
op getLabels is Foundations.ResourceList<
  Label,
  {
    @doc("A filter for the name of the returned labels.")
    @query("name")
    name?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Instructs the server to return elements that appear after the element referred
to by the specified token.
""")
    @query("After")
    after?: string;

    @doc("""
Requests the server to respond with the state of the resource at the specified
time.
""")
    @header("Accept-Datetime")
    acceptDatetime?: string;

    @doc("Used to select what fields are present in the returned resource(s).")
    @query({
      name: "$Select",
      format: "csv",
    })
    select?: LabelFields[];
  },
  LabelListResult & {
    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    ...acceptHeader<"application/vnd.microsoft.appconfig.labelset+json">;
  }
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "No data-plane HEAD operation template"
@summary("Requests the headers and status of the given resource.")
@doc("Requests the headers and status of the given resource.")
@route("/labels")
@head
op checkLabels is Azure.Core.Foundations.Operation<
  {
    @doc("A filter for the name of the returned labels.")
    @query("name")
    name?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Instructs the server to return elements that appear after the element referred
to by the specified token.
""")
    @query("After")
    after?: string;

    @doc("""
Requests the server to respond with the state of the resource at the specified
time.
""")
    @header("Accept-Datetime")
    acceptDatetime?: string;

    @doc("Used to select what fields are present in the returned resource(s).")
    @query({
      name: "$Select",
      format: "csv",
    })
    select?: LabelFields[];
  },
  OkResponse & {
    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;
  }
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Locks a key-value.")
@doc("Locks a key-value.")
@route("/locks/{key}")
@put
op putLock is Azure.Core.Foundations.Operation<
  {
    @doc("The key of the key-value to lock.")
    @path
    key: string;

    @doc("The label, if any, of the key-value to lock.")
    @query("label")
    label?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag matches the
value provided.
""")
    @header("If-Match")
    ifMatch?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag does not
match the value provided.
""")
    @header("If-None-Match")
    ifNoneMatch?: string;
  },
  KeyValue &
    AppConfigResponseHeaders &
    acceptHeader<"application/vnd.microsoft.appconfig.kv+json">
>;

// FIXME: was the original swagger missing a 204?
#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Unlocks a key-value.")
@doc("Unlocks a key-value.")
@route("/locks/{key}")
@delete
op deleteLock is Azure.Core.Foundations.Operation<
  {
    @doc("The key of the key-value to unlock.")
    @path
    key: string;

    @doc("The label, if any, of the key-value to unlock.")
    @query("label")
    label?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag matches the
value provided.
""")
    @header("If-Match")
    ifMatch?: string;

    @doc("""
Used to perform an operation only if the targeted resource's etag does not
match the value provided.
""")
    @header("If-None-Match")
    ifNoneMatch?: string;
  },
  KeyValue &
    AppConfigResponseHeaders &
    acceptHeader<"application/vnd.microsoft.appconfig.kv+json">
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Gets a list of key-value revisions.")
@doc("Gets a list of key-value revisions.")
@route("/revisions")
@get
op getRevisions is Foundations.Operation<
  {
    @doc("""
A filter used to match keys. Syntax reference:
https://aka.ms/azconfig/docs/restapirevisions
""")
    @query("key")
    key?: string;

    @doc("""
A filter used to match labels. Syntax reference:
https://aka.ms/azconfig/docs/restapirevisions
""")
    @query("label")
    label?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Instructs the server to return elements that appear after the element referred
to by the specified token.
""")
    @query("After")
    after?: string;

    @doc("""
Requests the server to respond with the state of the resource at the specified
time.
""")
    @header("Accept-Datetime")
    acceptDatetime?: string;

    @doc("Used to select what fields are present in the returned resource(s).")
    @query({
      name: "$Select",
      format: "csv",
    })
    select?: KeyValueFields[];

    #suppress "@azure-tools/typespec-azure-core/prefer-csv-collection-format" "Pre-existing API contract"
    @doc("""
A filter used to query by tags. Syntax reference:
https://aka.ms/azconfig/docs/restapirevisions
""")
    @query({
      name: "tags",
      format: "multi",
    })
    tags?: string[];
  },
  KeyValueListResult &
    AppConfigResponseHeaders &
    acceptHeader<"application/vnd.microsoft.appconfig.kvset+json">
>;

#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "No data-plane HEAD operation template"
@summary("Requests the headers and status of the given resource.")
@doc("Requests the headers and status of the given resource.")
@route("/revisions")
@head
op checkRevisions is Azure.Core.Foundations.Operation<
  {
    @doc("""
A filter used to match keys. Syntax reference:
https://aka.ms/azconfig/docs/restapirevisions
""")
    @query("key")
    key?: string;

    @doc("""
A filter used to match labels. Syntax reference:
https://aka.ms/azconfig/docs/restapirevisions
""")
    @query("label")
    label?: string;

    @doc("Used to guarantee real-time consistency between requests.")
    @header("Sync-Token")
    syncToken?: string;

    @doc("""
Instructs the server to return elements that appear after the element referred
to by the specified token.
""")
    @query("After")
    after?: string;

    @doc("""
Requests the server to respond with the state of the resource at the specified
time.
""")
    @header("Accept-Datetime")
    acceptDatetime?: string;

    @doc("Used to select what fields are present in the returned resource(s).")
    @query({
      name: "$Select",
      format: "csv",
    })
    select?: KeyValueFields[];

    #suppress "@azure-tools/typespec-azure-core/prefer-csv-collection-format" "Pre-existing API contract"
    @doc("""
A filter used to query by tags. Syntax reference:
https://aka.ms/azconfig/docs/restapirevisions
""")
    @query({
      name: "tags",
      format: "multi",
    })
    tags?: string[];
  },
  OkResponse & AppConfigResponseHeaders
>;

// FIXME: any issues renaming this operation to getSnapshotOperationDetails?
#suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Pre-existing API contract"
@summary("Gets the state of a long running operation.")
@doc("Gets the state of a long running operation.")
@route("/operations")
@get
op getSnapshotOperationDetails is Azure.Core.Foundations.Operation<
  {
    @doc("Snapshot identifier for the long running operation.")
    @query("snapshot")
    snapshot: string;
  },
  OperationDetails
>;
