{
  "parameters": {
    "subscriptionId": "00000000-0000-0000-0000-000000000000",
    "resourceGroupName": "test-rg",
    "updateAccountName": "contoso",
    "agentName": "myagent",
    "api-version": "2024-04-01-preview",
    "agent": {
      "location": "westus2",
      "properties": {
        "provisioningState": "Succeeded",
        "deviceResourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.Devices/devices/myagent",
        "activeMqttBrokerEndpoint": "mybroker-egmqtt-namespace.westus2-1.ts.eventgrid.azure.net",
        "deviceClassId": "ee13113a78e5f6029714911c6cbf5427fbcb9d9e",
        "agentInfo": {
          "updateProtocol": {
            "id": 1
          },
          "compatibilityProperties": {
            "manufacturer": "manufacturer1",
            "model": "model1"
          },
          "sequenceNumber": 256
        },
        "latestDeploymentInfo": {
          "workflow": {
            "id": "mydeploymentfoo",
            "action": "ApplyDeployment"
          },
          "updateId": {
            "provider": "myprovider",
            "name": "updatename",
            "version": "1.0"
          },
          "state": "Succeeded",
          "installResult": {
            "resultCode": 200,
            "extendedResultCode": 0,
            "resultDetails": "",
            "stepResults": [
              {
                "updateId": {
                  "provider": "microsoft",
                  "name": "peripheralcamera",
                  "version": "1.0"
                },
                "resultCode": 200,
                "extendedResultCode": 0,
                "resultDetails": ""
              },
              {
                "updateId": {
                  "provider": "microsoft",
                  "name": "peripheralspeaker",
                  "version": "1.0"
                },
                "resultCode": 200,
                "extendedResultCode": 0,
                "resultDetails": ""
              }
            ]
          }
        },
        "installedUpdateId": {
          "provider": "myprovider",
          "name": "updatename",
          "version": "1.0"
        },
        "enrollmentStatus": {
          "state": "Succeeded"
        },
        "deviceUuid": "f329ae0b-dbf0-4ae4-bf96-c8d7e05b320d"
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "name": "myagent",
        "location": "westus2",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.DeviceUpdate/updateaccounts/contoso/agents/myagent",
        "type": "Microsoft.DeviceUpdate/updateaccounts/agent",
        "properties": {
          "provisioningState": "Succeeded",
          "agentId": "myagent",
          "deviceResourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.Devices/device/myagent",
          "deviceClassId": "ee13113a78e5f6029714911c6cbf5427fbcb9d9e",
          "activeMqttBrokerEndpoint": "mybroker-egmqtt-namespace.westus2-1.ts.eventgrid.azure.net",
          "agentInfo": {
            "updateProtocol": {
              "id": 1
            },
            "compatibilityProperties": {
              "manufacturer": "manufacturer1",
              "model": "model1"
            },
            "sequenceNumber": 256
          },
          "latestDeploymentInfo": {
            "workflow": {
              "id": "mydeploymentfoo",
              "action": "ApplyDeployment"
            },
            "updateId": {
              "provider": "myprovider",
              "name": "updatename",
              "version": "1.0"
            },
            "state": "Succeeded",
            "installResult": {
              "resultCode": 200,
              "extendedResultCode": 0,
              "resultDetails": "",
              "stepResults": [
                {
                  "updateId": {
                    "provider": "microsoft",
                    "name": "peripheralcamera",
                    "version": "1.0"
                  },
                  "resultCode": 200,
                  "extendedResultCode": 0,
                  "resultDetails": ""
                },
                {
                  "updateId": {
                    "provider": "microsoft",
                    "name": "peripheralspeaker",
                    "version": "1.0"
                  },
                  "resultCode": 200,
                  "extendedResultCode": 0,
                  "resultDetails": ""
                }
              ]
            }
          },
          "installedUpdateId": {
            "provider": "myprovider",
            "name": "updatename",
            "version": "1.0"
          },
          "enrollmentStatus": {
            "state": "Succeeded"
          },
          "deviceUuid": "f329ae0b-dbf0-4ae4-bf96-c8d7e05b320d"
        }
      }
    },
    "201": {
      "body": {
        "name": "myagent",
        "location": "westus2",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.DeviceUpdate/updateaccounts/contoso/agents/myagent",
        "type": "Microsoft.DeviceUpdate/updateaccounts/agent",
        "properties": {
          "provisioningState": "Succeeded",
          "agentId": "myagent",
          "deviceResourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.Devices/device/myagent",
          "deviceClassId": "ee13113a78e5f6029714911c6cbf5427fbcb9d9e",
          "activeMqttBrokerEndpoint": "mybroker-egmqtt-namespace.westus2-1.ts.eventgrid.azure.net",
          "agentInfo": {
            "updateProtocol": {
              "id": 1
            },
            "compatibilityProperties": {
              "manufacturer": "manufacturer1",
              "model": "model1"
            },
            "sequenceNumber": 256
          },
          "latestDeploymentInfo": {
            "workflow": {
              "id": "mydeploymentfoo",
              "action": "ApplyDeployment"
            },
            "updateId": {
              "provider": "myprovider",
              "name": "updatename",
              "version": "1.0"
            },
            "state": "Succeeded",
            "installResult": {
              "resultCode": 200,
              "extendedResultCode": 0,
              "resultDetails": "",
              "stepResults": [
                {
                  "updateId": {
                    "provider": "microsoft",
                    "name": "peripheralcamera",
                    "version": "1.0"
                  },
                  "resultCode": 200,
                  "extendedResultCode": 0,
                  "resultDetails": ""
                },
                {
                  "updateId": {
                    "provider": "microsoft",
                    "name": "peripheralspeaker",
                    "version": "1.0"
                  },
                  "resultCode": 200,
                  "extendedResultCode": 0,
                  "resultDetails": ""
                }
              ]
            }
          },
          "installedUpdateId": {
            "provider": "myprovider",
            "name": "updatename",
            "version": "1.0"
          },
          "enrollmentStatus": {
            "state": "Succeeded"
          },
          "deviceUuid": "f329ae0b-dbf0-4ae4-bf96-c8d7e05b320d"
        }
      }
    }
  }
}
