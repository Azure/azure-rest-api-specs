{
  "parameters": {
    "subscriptionId": "00000000-0000-0000-0000-000000000000",
    "resourceGroupName": "test-rg",
    "updateAccountName": "contoso",
    "api-version": "2024-04-01-preview",
    "UpdateAccount": {
      "location": "westus2",
      "identity": {
        "type": "UserAssigned",
        "userAssignedIdentities": {
          "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {}
        }
      },
      "properties": {
        "deviceEnrollmentScope": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg",
        "deviceEnrollmentManagedIdentityResourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1",
        "mqttBrokerEndpoints": [
          "mybroker-egmqtt-namespace.westus2-1.ts.eventgrid.azure.net"
        ],
        "encryption": {
          "keyVaultKeyUri": "https://contoso.vault.azure.net/keys/contoso",
          "userAssignedIdentity": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1"
        }
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "name": "contoso",
        "location": "westus2",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.DeviceUpdate/updateAccounts/contoso",
        "type": "Microsoft.DeviceUpdate/updateAccounts",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {
              "principalId": "12345678-1234-4321-1234-123456789012",
              "clientId": "12345678-4321-1234-1234-123456789012"
            }
          }
        },
        "properties": {
          "provisioningState": "Accepted",
          "sku": "Standard",
          "encryption": {
            "keyVaultKeyUri": "https://contoso.vault.azure.net/keys/contoso",
            "userAssignedIdentity": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1"
          },
          "deviceEnrollmentScope": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg",
          "deviceEnrollmentManagedIdentityResourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1",
          "mqttBrokerEndpoints": [
            "mybroker-egmqtt-namespace.westus2-1.ts.eventgrid.azure.net"
          ],
          "locations": [
            {
              "name": "westus2",
              "role": "Primary"
            },
            {
              "name": "westcentralus",
              "role": "Failover"
            }
          ]
        }
      }
    },
    "201": {
      "body": {
        "name": "contoso",
        "location": "westus2",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.DeviceUpdate/updateAccounts/contoso",
        "type": "Microsoft.DeviceUpdate/updateAccounts",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {
              "principalId": "12345678-1234-4321-1234-123456789012",
              "clientId": "12345678-4321-1234-1234-123456789012"
            }
          }
        },
        "properties": {
          "provisioningState": "Accepted",
          "sku": "Standard",
          "encryption": {
            "keyVaultKeyUri": "https://contoso.vault.azure.net/keys/contoso",
            "userAssignedIdentity": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1"
          },
          "deviceEnrollmentScope": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg",
          "deviceEnrollmentManagedIdentityResourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1",
          "mqttBrokerEndpoints": [
            "mybroker-egmqtt-namespace.westus2-1.ts.eventgrid.azure.net"
          ],
          "locations": [
            {
              "name": "westus2",
              "role": "Primary"
            },
            {
              "name": "westcentralus",
              "role": "Failover"
            }
          ]
        }
      }
    }
  }
}
