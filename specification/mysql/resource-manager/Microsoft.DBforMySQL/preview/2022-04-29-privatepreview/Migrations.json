{
  "swagger": "2.0",
  "info": {
    "version": "2022-04-29-privatepreview",
    "title": "MySQLManagementClient",
    "description": "The Microsoft Azure management API provides create, read, update, and delete functionality for Azure MySQL resources including servers, databases, firewall rules, VNET rules, security alert policies, log files, encryption keys, active directory administrator and configurations."
  },
  "host": "management.azure.com",
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "security": [
    {
      "azure_auth": [
        "user_impersonation"
      ]
    }
  ],
  "securityDefinitions": {
    "azure_auth": {
      "type": "oauth2",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
      "flow": "implicit",
      "description": "Azure Active Directory OAuth2 Flow",
      "scopes": {
        "user_impersonation": "impersonate your user account"
      }
    }
  },
  "paths": {
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.DBforMySQL/performMigrationAssessment": {
      "post": {
        "tags": [
          "PerformMigrationAssessment"
        ],
        "operationId": "MigrationAssessment_PerformMigrationAssessment",
        "x-ms-examples": {
          "PerformMigrationAssessment": {
            "$ref": "./examples/PerformMigrationAssessment.json"
          }
        },
        "description": "Performs Migration Assessment for a single server",
        "parameters": [
          {
            "$ref": "#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../../../common-types/resource-management/v1/types.json#/parameters/SubscriptionIdParameter"
          },
          {
            "$ref": "../../../../../common-types/resource-management/v1/types.json#/parameters/ResourceGroupNameParameter"
          },
          {
            "name": "MigrationAssessmentRequest",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/MigrationAssessmentRequest"
            },
            "description": "The required parameters for performing a migration assessment on a single server"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/MigrationAssessmentResource"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "#/definitions/CloudError"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "MigrationAssessmentRequest": {
      "type": "object",
      "properties": {
        "sourceServerResourceId": {
          "type": "string",
          "description": "Source Server Resource Id to verify and perform migration assessment on."
        }
      },
      "description": "Request from client to perform migration assessment on their single server"
    },
    "MigrationAssessmentResource": {
      "type": "object",
      "properties": {
        "sourceServerResourceId": {
          "type": "string",
          "description": "Source Server Resource Id to verify and perform migration assessment on."
        },
        "targetPlatformProviderId": {
          "type": "string",
          "description": "Target platform(Flexible Server) provider ID"
        },
        "targetServerDetails": {
          "$ref": "#/definitions/TargetServerDetails"
        },
        "summary": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/AssessmentSummaryItem"
          },
          "readOnly": true,
          "x-ms-identifiers": []
        },
        "replicaAssessmentReports": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MigrationAssessmentResource"
          },
          "readOnly": true,
          "x-ms-identifiers": []
        }
      },
      "description": "Represents a resource name availability."
    },
    "TargetServerDetails": {
      "type": "object",
      "properties": {
        "serverSpecs": {
          "$ref": "../2021-05-01-preview/mysql.json#/definitions/Server",
          "readOnly": true
        },
        "serverParameters": {
          "type": "array",
          "items": {
            "$ref": "../2021-05-01-preview/mysql.json#/definitions/Configuration"
          },
          "readOnly": true
        },
        "firewallRules": {
          "type": "array",
          "items": {
            "$ref": "../2021-05-01-preview/mysql.json#/definitions/FirewallRule"
          },
          "readOnly": true
        },
        "platformProviderId": {
          "type": "string",
          "description": "Platform(Flexible Server) provider ID"
        }
      }
    },
    "AssessmentSummaryItem": {
      "type": "object",
      "properties": {
        "featureName": {
          "type": "string",
          "description": "Migration assessment Feature Name"
        },
        "severity": {
          "type": "string",
          "description": "Severity of the Feature (eg:Information, Warning, Blocker)"
        },
        "message": {
          "type": "string",
          "description": "Message explaining the severity"
        }
      }
    },
    "CloudError": {
      "type": "object",
      "x-ms-external": true,
      "properties": {
        "error": {
          "$ref": "../../../../../common-types/resource-management/v1/types.json#/definitions/ErrorResponse",
          "description": "The resource management error response."
        }
      },
      "description": "An error response from the Batch service."
    }
  },
  "parameters": {
    "ApiVersionParameter": {
      "name": "api-version",
      "in": "query",
      "required": true,
      "type": "string",
      "description": "The API version to use for the request."
    }
  }
}
