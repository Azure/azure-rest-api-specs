import "@typespec/http";
import "@typespec/rest";
import "@azure-tools/typespec-azure-core";
import "./models.facelist.tsp";

using TypeSpec.Http;
using TypeSpec.Rest;
using Azure.Core;
using Azure.Core.Traits;
using Foundations;

namespace Face;

interface FaceListOperations {
  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Create has no response body while standard op requires resource in body"
  @doc("""
  Create an empty face list with user-specified faceListId, name, an optional userData and recognitionModel. Up to 64 face lists are allowed in one subscription.
  Face list is a list of faces, up to 1,000 faces, and used by Find Similar.
  After creation, user should use Add Face to import the faces. No image will be stored. Only the extracted face feature(s) will be stored on server until Delete is called.
  Find Similar is used for scenario like finding celebrity-like faces, similar face filtering, or as a light way face identification. But if the actual use is to identify person, please use PersonGroup / LargePersonGroup and Identify.
  Please consider LargeFaceList when the face number is large. It can support up to 1,000,000 faces.
  """)
  createFaceList is FaceResourceCreateOperation<FaceList>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Delete response with 200 while standard op requires 204"
  @doc("Delete a specified face list.")
  deleteFaceList is FaceResourceDeleteOperation<FaceList>;

  @doc("Retrieve a face list's faceListId, name, userData, recognitionModel and faces in the face list.")
  getFaceList is FaceResourceReadOperationWithReturnRecognitionModelOptions<FaceList>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Update has no response body while standard op requires resource in body"
  @doc("Update information of a face list, including name and userData.")
  updateFaceList is FaceResourceUpdateOperation<FaceList>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "List doesn't support Azure paging"
  @doc("""
  List face lists' faceListId, name, userData and recognitionModel.
  To get face information inside faceList use Get Face List.
  """)
  getFaceLists is Foundations.ResourceList<
    FaceList,
    ReturnRecognitionModelOptions,
    Body<FaceList[]>,
    ServiceTraits
  >;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Add face perform on resource collection but not response created resource location in header"
  #suppress "@azure-tools/typespec-azure-core/byos" "It's an RPC call to detect face from an image, it doesn't store anything. There's a BYOS version of this call, but it's not this one."
  @doc("""
  Add a face to a specified face list, up to 1,000 faces.
  To deal with an image containing multiple faces, input face can be specified as an image with a targetFace rectangle. It returns a persistedFaceId representing the added face. No image will be stored. Only the extracted face feature(s) will be stored on server until Delete Face List Face or Delete Face List is called.
  Note persistedFaceId is different from faceId generated by Detect.
  """)
  addFaceListFace is AddFace<FaceListFace>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Add face perform on resource collection but not response created resource location in header"
  @doc("""
  Add a face to a specified face list, up to 1,000 faces.
  To deal with an image containing multiple faces, input face can be specified as an image with a targetFace rectangle. It returns a persistedFaceId representing the added face. No image will be stored. Only the extracted face feature(s) will be stored on server until Delete Face List Face or Delete Face List is called.
  Note persistedFaceId is different from faceId generated by Detect.
  """)
  addFaceListFaceFromUrl is AddFaceFromUrl<FaceListFace>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Delete response with 200 while standard op requires 204"
  @doc("Delete a face from a face list by specified faceListId and persistedFaceId.")
  deleteFaceListFace is FaceResourceDeleteOperation<FaceListFace>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Create has no response body while standard op requires resource in body"
  @doc("""
  Create an empty large face list with user-specified largeFaceListId, name, an optional userData and recognitionModel.
  Large face list is a list of faces, up to 1,000,000 faces, and used by Find Similar.
  After creation, user should use Add Large Face List Face to import the faces and Train Large Face List to make it ready for Find Similar. No image will be stored. Only the extracted face feature(s) will be stored on server until Delete Large Face List is called.
  Find Similar is used for scenario like finding celebrity-like faces, similar face filtering, or as a light way face identification. But if the actual use is to identify person, please use Person Group / Large Person Group and Identify.
  """)
  createLargeFaceList is FaceResourceCreateOperation<LargeFaceList>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Delete response with 200 while standard op requires 204"
  @doc("Delete a specified large face list.")
  deleteLargeFaceList is FaceResourceDeleteOperation<LargeFaceList>;

  @doc("Retrieve a large face list's largeFaceListId, name, userData and recognitionModel.")
  getLargeFaceList is FaceResourceReadOperationWithReturnRecognitionModelOptions<LargeFaceList>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Update has no response body while standard op requires resource in body"
  @doc("Update information of a large face list, including name and userData.")
  updateLargeFaceList is FaceResourceUpdateOperation<LargeFaceList>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "List doesn't support Azure paging"
  @doc("""
  List large face lists' information of largeFaceListId, name, userData and recognitionModel.
  To get face information inside largeFaceList use Get Large Face List Face.
  """)
  getLargeFaceLists is FaceResourceListOperation<
    LargeFaceList,
    LargeFaceList,
    ReturnRecognitionModelOptions
  >;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "GET operation on resource with sub-path"
  @doc("""
  To check the large face list training status completed or still ongoing. LargeFaceList Training is an asynchronous operation triggered by Train Large Face List.
  Training time depends on the number of face entries in a large face list. It could be in seconds, or up to half an hour for 1,000,000 faces.
  """)
  getLargeFaceListTrainingStatus is FaceResourceGetTrainingStatus<LargeFaceList>;

  @doc("""
  Submit a large face list training task. Training is a crucial step that only a trained large face list can be used by Find Similar.
  The training task is an asynchronous task. Training time depends on the number of face entries in a large face list. It could be in seconds, or up to half an hour for 1,000,000 faces. To check training completion, please use Get Large Face List Training Status.
  """)
  @pollingOperation(FaceListOperations.getLargeFaceListTrainingStatus)
  trainLargeFaceList is FaceResourceTrain<LargeFaceList>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Add face perform on resource collection but not response created resource location in header"
  #suppress "@azure-tools/typespec-azure-core/byos" "It's an RPC call to detect face from an image, it doesn't store anything. There's a BYOS version of this call, but it's not this one."
  @doc("""
  Add a face to a specified large face list, up to 1,000,000 faces.
  To deal with an image containing multiple faces, input face can be specified as an image with a targetFace rectangle. It returns a persistedFaceId representing the added face. No image will be stored. Only the extracted face feature(s) will be stored on server until Delete Large Face List Face or Delete Large Face List is called.
  Note persistedFaceId is different from faceId generated by Detect.
  """)
  addLargeFaceListFace is AddFace<LargeFaceListFace>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Add face perform on resource collection but not response created resource location in header"
  @doc("""
  Add a face to a specified large face list, up to 1,000,000 faces.
  To deal with an image containing multiple faces, input face can be specified as an image with a targetFace rectangle. It returns a persistedFaceId representing the added face. No image will be stored. Only the extracted face feature(s) will be stored on server until Delete Large Face List Face or Delete Large Face List is called.
  Note persistedFaceId is different from faceId generated by Detect.
  """)
  addLargeFaceListFaceFromUrl is AddFaceFromUrl<LargeFaceListFace>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Delete response with 200 while standard op requires 204"
  @doc("Delete a face from a large face list by specified largeFaceListId and persistedFaceId.")
  deleteLargeFaceListFace is FaceResourceDeleteOperation<LargeFaceListFace>;

  @doc("Retrieve persisted face in large face list by largeFaceListId and persistedFaceId.")
  getLargeFaceListFace is Operations.ResourceRead<LargeFaceListFace>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "Update has no response body while standard op requires resource in body"
  @doc("Update a specified face's userData field in a large face list by its persistedFaceId.")
  updateLargeFaceListFace is FaceResourceUpdateOperation<LargeFaceListFace>;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations" "List doesn't support Azure paging"
  @doc("List faces' persistedFaceId and userData in a specified large face list.")
  @sharedRoute
  getLargeFaceListFaces is FaceResourceListOperation<LargeFaceListFace>;
}
