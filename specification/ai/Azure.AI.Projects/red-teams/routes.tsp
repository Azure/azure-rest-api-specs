import "@typespec/rest";
import "@azure-tools/typespec-autorest";
import "@typespec/versioning";
import "@azure-tools/typespec-azure-core";
import "./model.tsp";

using TypeSpec.Http;
using TypeSpec.Rest;
using TypeSpec.Versioning;
using Azure.Core;
using Azure.Core.Traits;
using Azure.Core.Foundations;

// namespace Azure.AI.Projects.RedTeams;
namespace Azure.AI.Projects;

alias ServiceTraits = SupportsClientRequestId &
  NoRepeatableRequests &
  NoConditionalRequests; // NoRetryRequests supresses @azure-tools/typespec-azure-core/conditional-requests-trait-missing

alias RedTeamOperations = Azure.Core.ResourceOperations<ServiceTraits>;

@route("red-teams")
interface RedTeams {
  @doc("Get a redteam by name.")
  get is RedTeamOperations.ResourceRead<RedTeam>;

  @doc("List a redteam by name.")
  list is RedTeamOperations.ResourceList<
    RedTeam,
    ListQueryParametersTrait<StandardListQueryParameters>
  >;

  #suppress "@azure-tools/typespec-azure-core/use-standard-operations"
  @doc("Creates a redteam run.")
  @route("scan")
  @post
  createRun is Azure.Core.Foundations.Operation<
    {
      @doc("Redteam to be run")
      @body
      RedTeam: RedTeam;
    },
    RedTeam
  >;
}
