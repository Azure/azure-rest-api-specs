{
  "swagger": "2.0",
  "info": {
    "title": "PostgreSQLServerManagementClient",
    "description": "The Microsoft Azure management API provides create, read, update, and delete functionality for Azure PostgreSQL resources including servers, databases, firewall rules, VNET rules, security alert policies, log files and configurations with new business model.",
    "version": "2021-04-10-privatepreview"
  },
  "host": "management.azure.com",
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "security": [
    {
      "azure_auth": [
        "user_impersonation"
      ]
    }
  ],
  "securityDefinitions": {
    "azure_auth": {
      "type": "oauth2",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
      "flow": "implicit",
      "description": "Azure Active Directory OAuth2 Flow",
      "scopes": {
        "user_impersonation": "impersonate your user account"
      }
    }
  },
  "paths": {
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.DBForPostgreSql/flexibleServers/{serverName}": {
      "put": {
        "tags": [
          "GeoRestore"
        ],
        "operationId": "Servers_GeoCreate",
        "x-ms-examples": {
          "Create a database as a Geo restore": {
            "$ref": "./examples/ServerCreateGeoRestore.json"
          }
        },
        "description": "Creates a new server.",
        "parameters": [
          {
            "$ref": "../../../../../common-types/resource-management/v1/types.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../../../common-types/resource-management/v1/types.json#/parameters/SubscriptionIdParameter"
          },
          {
            "$ref": "../../../../../common-types/resource-management/v1/types.json#/parameters/ResourceGroupNameParameter"
          },
          {
            "$ref": "../2020-02-14-privatepreview/postgresql.json#/parameters/ServerNameParameter"
          },
          {
            "name": "parameters",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/ServerForGeoRestore"
            },
            "description": "The required parameters for creating or updating a server."
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "../2020-02-14-privatepreview/postgresql.json#/definitions/Server"
            }
          },
          "201": {
            "description": "Created",
            "schema": {
              "$ref": "../2020-02-14-privatepreview/postgresql.json#/definitions/Server"
            }
          },
          "202": {
            "description": "Accepted"
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../2020-02-14-privatepreview/postgresql.json#/definitions/CloudError"
            }
          }
        },
        "x-ms-long-running-operation": true
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.DBForPostgreSql/servers/{serverName}/recoverableServers": {
      "get": {
        "tags": [
          "RecoverableServers"
        ],
        "operationId": "RecoverableServers_Get",
        "x-ms-examples": {
          "RecoverableServersListByServer": {
            "$ref": "./examples/RecoverableServersGet.json"
          }
        },
        "description": "Gets a recoverable PostgreSQL Server.",
        "parameters": [
          {
            "$ref": "../../../../../common-types/resource-management/v1/types.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../../../common-types/resource-management/v1/types.json#/parameters/SubscriptionIdParameter"
          },
          {
            "$ref": "../../../../../common-types/resource-management/v1/types.json#/parameters/ResourceGroupNameParameter"
          },
          {
            "$ref": "../2020-02-14-privatepreview/postgresql.json#/parameters/ServerNameParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/RecoverableServerResource"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../2020-02-14-privatepreview/postgresql.json#/definitions/CloudError"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "RecoverableServerProperties": {
      "description": "The recoverable server's properties.",
      "type": "object",
      "properties": {
        "availabilityZone": {
          "type": "string",
          "description": "availabilityZone",
          "readOnly": true
        },
        "serverEdition": {
          "type": "string",
          "description": "Edition of the performance tier.",
          "readOnly": true
        },
        "version": {
          "type": "string",
          "description": "The PostgreSQL version",
          "readOnly": true
        }
      }
    },
    "RecoverableServerResource": {
      "allOf": [
        {
          "$ref": "../../../../../common-types/resource-management/v1/types.json#/definitions/ProxyResource"
        }
      ],
      "properties": {
        "sku": {
          "$ref": "../2020-02-14-privatepreview/postgresql.json#/definitions/Sku",
          "description": "The SKU (pricing tier) of the server."
        },
        "location": {
          "type": "string",
          "description": "The location the resource resides in."
        },
        "properties": {
          "$ref": "#/definitions/RecoverableServerProperties",
          "description": "Resource properties.",
          "x-ms-client-flatten": true
        }
      },
      "description": "Represents a recoverable server resource."
    },
    "ServerForGeoRestore": {
      "properties": {
        "location": {
          "type": "string",
          "description": "The location the resource resides in."
        },
        "properties": {
          "$ref": "#/definitions/ServerPropertiesForGeoRestore",
          "x-ms-client-flatten": true,
          "description": "Properties of the server."
        }
      }
    },
    "ServerPropertiesForGeoRestore": {
      "properties": {
        "sourceServerName": {
          "type": "string",
          "description": "The source PostgreSQL server name to restore from."
        },
        "sourceSubscriptionId": {
          "type": "string",
          "description": "The subscription id of source PostgreSQL server name to restore from."
        },
        "sourceResourceGroupName": {
          "type": "string",
          "description": "The resource group name of source PostgreSQL server name to restore from."
        },
        "pointInTimeUTC": {
          "type": "string",
          "format": "date-time",
          "description": "Restore point creation time (ISO8601 format), specifying the time to restore from."
        },
        "availabilityZone": {
          "type": "string",
          "description": "availability Zone information of the server."
        },
        "createMode": {
          "type": "string",
          "description": "The mode to create a new PostgreSQL server.",
          "enum": [
            "Default",
            "PointInTimeRestore",
            "GeoRestore"
          ],
          "x-ms-enum": {
            "name": "CreateMode",
            "modelAsString": true
          },
          "x-ms-mutability": [
            "create"
          ]
        }
      }
    }
  }
}
