{
  "parameters": {
    "subscriptionId": "11112222-3333-4444-5555-666677778888",
    "resourceGroupName": "MyResourceGroup",
    "communicationServiceName": "MyCommunicationResource",
    "api-version": "2023-12-25-preview",
    "parameters": {
      "location": "Global",
      "properties": {
        "dataLocation": "United States",
        "encryption": {
          "customerManagedKeyEncryption": {
            "keyEncryptionKeyIdentity": {
              "identityType": "userAssignedIdentity",
              "userAssignedIdentityResourceId": "/subscriptions/11112222-3333-4444-5555-666677778888/resourcegroups/identityGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/testidentity1"
            },
            "keyEncryptionKeyUrl": "https://contosovault.vault.azure.net/keys/contosokek"
          }
        }
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/11112222-3333-4444-5555-666677778888/resourceGroups/MyResourceGroup/providers/Microsoft.Communication/CommunicationServices/MyCommunicationResource",
        "name": "MyCommunicationResource",
        "type": "Microsoft.Communication/CommunicationServices",
        "location": "Global",
        "properties": {
          "dataLocation": "United States",
          "provisioningState": "Succeeded",
          "hostName": "mycommunicationresource.communications.azure.com",
          "encryption": {
            "customerManagedKeyEncryption": {
              "keyEncryptionKeyIdentity": {
                "identityType": "userAssignedIdentity",
                "userAssignedIdentityResourceId": "/subscriptions/11112222-3333-4444-5555-666677778888/resourcegroups/identityGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/testidentity1"
              },
              "keyEncryptionKeyUrl": "https://contosovault.vault.azure.net/keys/contosokek"
            }
          }
        }
      }
    },
    "201": {
      "headers": {
        "Azure-AsyncOperation": "https://management.azure.com/providers/Microsoft.Communication/locations/westus/operationStatuses/ed5d502c-acaa-42ec-ad61-0d8488a9fd1d"
      },
      "body": {
        "id": "/subscriptions/11112222-3333-4444-5555-666677778888/resourceGroups/MyResourceGroup/providers/Microsoft.Communication/CommunicationServices/MyCommunicationResource",
        "name": "MyCommunicationResource",
        "type": "Microsoft.Communication/CommunicationServices",
        "location": "Global",
        "properties": {
          "dataLocation": "United States",
          "provisioningState": "Accepted",
          "encryption": {
            "customerManagedKeyEncryption": {
              "keyEncryptionKeyIdentity": {
                "identityType": "userAssignedIdentity",
                "userAssignedIdentityResourceId": "/subscriptions/11112222-3333-4444-5555-666677778888/resourcegroups/identityGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/testidentity1"
              },
              "keyEncryptionKeyUrl": "https://contosovault.vault.azure.net/keys/contosokek"
            }
          }
        }
      }
    }
  }
}
