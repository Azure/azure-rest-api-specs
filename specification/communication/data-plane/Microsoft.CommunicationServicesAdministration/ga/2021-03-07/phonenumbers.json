{
    "swagger": "2.0",
    "info": {
      "title": "Phone Number Administration Service",
      "description": "Azure Communication Service",
      "contact": {
        "email": "acsdevexdisc@microsoft.com"
      },
      "version": "2021-03-07"
    },
    "paths": {
      "/phoneNumbers/{phoneNumber}": {
        "get": {
          "tags": [
            "AcquiredNumbers"
          ],
          "summary": "Gets the details of the given acquired phone number.",
          "operationId": "PhoneNumber_GetByNumber",
          "produces": [
            "application/json"
          ],
          "parameters": [
            {
              "in": "path",
              "name": "phoneNumber",
              "description": "The acquired phone number whose details are to be fetched. E.g. +11234567890.",
              "required": true,
              "type": "string"
            },
            {
              "$ref": "#/parameters/ApiVersionParameter"
            }
          ],
          "responses": {
            "200": {
              "description": "Success",
              "schema": {
                "$ref": "#/definitions/AcquiredPhoneNumber"
              }
            },
            "default": {
              "description": "Failure",
              "schema": {
                "$ref": "#/definitions/CommunicationErrorResponse"
              }
            }
          },
          "x-ms-examples": {
            "Fetch acquired phone number": {
              "$ref": "./examples/GetAcquiredPhoneNumberAsync.json"
            }
          }
        },
        "delete": {
          "tags": [
            "Release"
          ],
          "summary": "Creates a release request for the given phone number.",
          "operationId": "PhoneNumber_Release",
          "produces": [
            "application/json"
          ],
          "parameters": [
            {
              "in": "path",
              "name": "phoneNumber",
              "description": "Phone number to be released. E.g. +11234567890.",
              "required": true,
              "type": "string"
            },
            {
              "$ref": "#/parameters/ApiVersionParameter"
            }
          ],
          "responses": {
            "202": {
              "description": "The service has accepted the request and will start processing later. It will return 'Accepted' immediately and include an 'Operation-Location' header. Client side should further query the operation status using the URL specified in this header.",
              "headers": {
                "Operation-Location": {
                  "description": "URL to query for status of the operation",
                  "type": "string"
                },
                "Location": {
                  "description": "Url to retrieve the final result after operation completes.",
                  "type": "string"
                }
              }
            },
            "default": {
              "description": "Failure",
              "schema": {
                "$ref": "#/definitions/CommunicationErrorResponse"
              }
            }
          },
          "x-ms-long-running-operation": true,
          "x-ms-long-running-operation-options": {
            "final-state-via": "location"
          },
          "x-ms-examples": {
            "Release phoneNumber": {
              "$ref": "./examples/ReleasePhoneNumberAsync.json"
            }
          }
        },
        "patch": {
          "tags": [
            "Update"
          ],
          "summary": "Updates the configuration of a phone number.",
          "operationId": "PhoneNumber_Update",
          "consumes": [
            "application/merge-patch+json"
          ],
          "produces": [
            "application/json"
          ],
          "parameters": [
            {
              "in": "path",
              "name": "phoneNumber",
              "description": "Phone number to be updated. E.g. +11234567890.",
              "required": true,
              "type": "string"
            },
            {
              "$ref": "#/parameters/ApiVersionParameter"
            },
            {
              "in": "body",
              "name": "body",
              "description": "Defines the update request.",
              "schema": {
                "$ref": "#/definitions/PhoneNumberUpdateRequest"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Success",
              "schema": {
                "$ref": "#/definitions/AcquiredPhoneNumber"
              }
            },
            "default": {
              "description": "Failure",
              "schema": {
                "$ref": "#/definitions/CommunicationErrorResponse"
              }
            }
          },
          "x-ms-examples": {
            "Update phoneNumber": {
              "$ref": "./examples/UpdatePhoneNumberAsync.json"
            }
          }
        }
      },
      "/phoneNumbers": {
        "get": {
          "tags": [
            "AcquiredNumbers"
          ],
          "summary": "Gets the list of all acquired phone numbers.",
          "operationId": "PhoneNumber_Get",
          "produces": [
            "application/json"
          ],
          "parameters": [
            {
              "in": "query",
              "name": "skip",
              "description": "An optional parameter for how many entries to skip, for pagination purposes. The default value is 0.",
              "type": "integer",
              "format": "int32",
              "default": 0
            },
            {
              "in": "query",
              "name": "take",
              "description": "An optional parameter for how many entries to return, for pagination purposes. The default value is 100.",
              "type": "integer",
              "format": "int32",
              "default": 100
            },
            {
              "$ref": "#/parameters/ApiVersionParameter"
            }
          ],
          "responses": {
            "200": {
              "description": "Success",
              "schema": {
                "$ref": "#/definitions/AcquiredPhoneNumbers"
              }
            },
            "default": {
              "description": "Failure",
              "schema": {
                "$ref": "#/definitions/CommunicationErrorResponse"
              }
            }
          },
          "x-ms-pageable": {
            "nextLinkName": "nextLink",
            "itemName": "phoneNumbers"
          },
          "x-ms-examples": {
            "Fetch acquired phone number": {
              "$ref": "./examples/GetAcquiredPhoneNumbersAsync.json"
            }
          }
        }
      },
      "/phoneNumbers/operations/{operationId}": {
        "get": {
          "tags": [
            "Operations"
          ],
          "operationId": "PhoneNumber_GetOperationStatusById",
          "produces": [
            "application/json"
          ],
          "parameters": [
            {
              "in": "path",
              "name": "operationId",
              "required": true,
              "type": "string"
            },
            {
              "$ref": "#/parameters/ApiVersionParameter"
            }
          ],
          "responses": {
            "200": {
              "description": "Success",
              "schema": {
                "$ref": "#/definitions/PhoneNumberLongRunningOperation"
              }
            },
            "default": {
              "description": "Failure",
              "schema": {
                "$ref": "#/definitions/CommunicationErrorResponse"
              }
            }
          },
          "x-ms-examples": {
            "Get long running operation status by operation id": {
              "$ref": "./examples/GetOperationStatusByIdAsync.json"
            }
          }
        }
      },
      "/availablePhoneNumbers/countries/{countryCode}/:search": {
        "post": {
          "tags": [
            "Search"
          ],
          "summary": "Search for available phone numbers to purchase.",
          "operationId": "PhoneNumber_SearchAvailablePhoneNumbers",
          "consumes": [
            "application/json"
          ],
          "produces": [
            "application/json"
          ],
          "parameters": [
            {
              "in": "path",
              "name": "countryCode",
              "description": "The ISO 3166-2 country code. E.g. US.",
              "required": true,
              "type": "string"
            },
            {
              "$ref": "#/parameters/ApiVersionParameter"
            },
            {
              "in": "body",
              "name": "body",
              "schema": {
                "$ref": "#/definitions/SearchRequest"
              }
            }
          ],
          "responses": {
            "202": {
              "description": "The service has accepted the request and will start processing later. It will return 'Accepted' immediately and include an 'Operation-Location' header. Client side should further query the operation status using the URL specified in this header.",
              "headers": {
                "Operation-Location": {
                  "description": "URL to query for status of the operation",
                  "type": "string"
                },
                "Location": {
                  "description": "Url to retrieve the final result after operation completes.",
                  "type": "string"
                }
              }
            },
            "default": {
              "description": "Failure",
              "schema": {
                "$ref": "#/definitions/CommunicationErrorResponse"
              }
            }
          },
          "x-ms-long-running-operation": true,
          "x-ms-long-running-operation-options": {
            "final-state-via": "location"
          },
          "x-ms-examples": {
            "Search for phone numbers": {
              "$ref": "./examples/SearchPhoneNumbersAsync.json"
            }
          }
        }
      },
      "/availablePhoneNumbers/searchResults/{searchId}": {
        "get": {
          "tags": [
            "Search"
          ],
          "summary": "Gets phone number search by search id.",
          "operationId": "PhoneNumber_GetPhoneNumberSearch",
          "produces": [
            "application/json"
          ],
          "parameters": [
            {
              "in": "path",
              "name": "searchId",
              "description": "The search Id.",
              "required": true,
              "type": "string"
            },
            {
              "$ref": "#/parameters/ApiVersionParameter"
            }
          ],
          "responses": {
            "200": {
              "description": "Success",
              "schema": {
                "$ref": "#/definitions/SearchResponse"
              }
            },
            "default": {
              "description": "Failure",
              "schema": {
                "$ref": "#/definitions/CommunicationErrorResponse"
              }
            }
          },
          "x-ms-examples": {
            "Get PhoneNumber Search Details": {
              "$ref": "./examples/GetPhoneNumberSearchAsync.json"
            }
          }
        }
      },
      "/availablePhonenumbers/:purchase": {
        "post": {
          "tags": [
            "Search"
          ],
          "summary": "Purchases the phone number search.",
          "operationId": "PhoneNumber_PurchasePhoneNumberSearch",
          "consumes": [
            "application/json-patch+json",
            "application/json",
            "text/json",
            "application/*+json"
          ],
          "produces": [
            "application/json"
          ],
          "parameters": [
            {
              "$ref": "#/parameters/ApiVersionParameter"
            },
            {
              "in": "body",
              "name": "body",
              "schema": {
                "$ref": "#/definitions/PhoneNumberPurchaseRequest"
              }
            }
          ],
          "responses": {
            "202": {
              "description": "The service has accepted the request and will start processing later. It will return 'Accepted' immediately and include an 'Operation-Location' header. Client side should further query the operation status using the URL specified in this header.",
              "headers": {
                "Operation-Location": {
                  "description": "URL to query for status of the operation",
                  "type": "string"
                },
                "Location": {
                  "description": "Url to retrieve the final result after operation completes.",
                  "type": "string"
                }
              }
            },
            "default": {
              "description": "Failure",
              "schema": {
                "$ref": "#/definitions/CommunicationErrorResponse"
              }
            }
          },
          "x-ms-long-running-operation": true,
          "x-ms-long-running-operation-options": {
            "final-state-via": "location"
          },
          "x-ms-examples": {
            "Purchase phone number search": {
              "$ref": "./examples/PurchaseSearchAsync.json"
            }
          }
        }
      },
      "/phoneNumbers/{phoneNumber}/capabilities": {
        "post": {
          "tags": [
            "Update"
          ],
          "summary": "Updates the capabilities of a phone number.",
          "operationId": "PhoneNumber_Update_capabilities",
          "consumes": [
            "application/json"
          ],
          "produces": [
            "application/json"
          ],
          "parameters": [
            {
              "in": "path",
              "name": "phoneNumber",
              "description": "Phone number to be updated. E.g. +11234567890.",
              "required": true,
              "type": "string"
            },
            {
              "$ref": "#/parameters/ApiVersionParameter"
            },
            {
              "in": "body",
              "name": "body",
              "description": "Defines the update capabilities request.",
              "schema": {
                "$ref": "#/definitions/PhoneNumberCapabilities"
              }
            }
          ],
          "responses": {
            "202": {
              "description": "The service has accepted the request and will start processing later. It will return 'Accepted' immediately and include an 'Operation-Location' header. Client side should further query the operation status using the URL specified in this header.",
              "headers": {
                "Operation-Location": {
                  "description": "URL to query for status of the operation",
                  "type": "string"
                },
                "Location": {
                  "description": "Url to retrieve the final result after operation completes.",
                  "type": "string"
                }
              }
            },
            "default": {
              "description": "Failure",
              "schema": {
                "$ref": "#/definitions/CommunicationErrorResponse"
              }
            }
          },
          "x-ms-long-running-operation": true,
          "x-ms-long-running-operation-options": {
            "final-state-via": "location"
          },
          "x-ms-examples": {
            "Update phoneNumber capabilities": {
              "$ref": "./examples/UpdatePhoneNumberCapabilitiesAsync.json"
            }
          }
        }
      }
    },
    "definitions": {
      "PhoneNumberCapabilities": {
        "description": "Capabilities of a phone number",
        "type": "object",
        "properties": {
          "calling": {
            "description": "Capability value for calling",
            "enum": [
              "None",
              "Inbound",
              "Outbound",
              "InboundAndOutbound"
            ],
            "type": "string"
          },
          "sms": {
            "description": "Capability value for SMS",
            "enum": [
              "None",
              "Inbound",
              "Outbound",
              "InboundAndOutbound"
            ],
            "type": "string"
          }
        }
      },
      "PhoneNumberCost": {
        "description": "The incurred cost for a single phone number",
        "type": "object",
        "properties": {
          "amount": {
            "format": "double",
            "description": "The cost amount.",
            "type": "number"
          },
          "currencyCode": {
            "description": "The ISO 4217 currency code for the cost amount. e.g. USD",
            "type": "string"
          },
          "billingFrequency": {
            "description": "The frequency with which the cost gets billed.",
            "enum": [
              "Monthly"
            ],
            "type": "string",
            "x-ms-enum": {
              "name": "BillingFrequency",
              "modelAsString": true
            }
          }
        }
      },
      "AcquiredPhoneNumber": {
        "description": "Represents an acquired phone number.",
        "required": [
          "assignmentType",
          "capabilities",
          "countryCode",
          "id",
          "phoneNumber",
          "phoneNumberType"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "The id of the phone number",
            "type": "string"
          },
          "phoneNumber": {
            "description": "String of the E.164 format of the phone number",
            "type": "string"
          },
          "countryCode": {
            "description": "The ISO 3166-2 code of the phone number's country",
            "type": "string"
          },
          "phoneNumberType": {
            "description": "The phone number's type",
            "enum": [
              "Geographic",
              "TollFree",
              "Unknown"
            ],
            "type": "string",
            "x-ms-enum": {
              "name": "PhoneNumberType",
              "modelAsString": true
            }
          },
          "capabilities": {
            "$ref": "#/definitions/PhoneNumberCapabilities"
          },
          "assignmentType": {
            "description": "The assignment type of the phone number.",
            "enum": [
              "Unknown",
              "User",
              "Application"
            ],
            "type": "string",
            "x-ms-enum": {
              "name": "PhoneNumberAssignmentType",
              "modelAsString": true
            }
          },
          "purchaseDate": {
            "format": "date-time",
            "description": "The date that the phone number is purchased.",
            "type": "string"
          },
          "callbackUrl": {
            "description": "The callback URL the phone number is assigned to.",
            "type": "string"
          },
          "applicationId": {
            "description": "The application id of the server application the phone number is assigned to.",
            "type": "string"
          },
          "cost": {
            "$ref": "#/definitions/PhoneNumberCost"
          }
        }
      },
      "CommunicationError": {
        "description": "Represents the Communication Services error",
        "required": [
          "code",
          "message"
        ],
        "type": "object",
        "properties": {
          "code": {
            "description": "The error code.",
            "type": "string"
          },
          "message": {
            "description": "The error message.",
            "type": "string"
          },
          "target": {
            "description": "The error target.",
            "type": "string",
            "readOnly": true
          },
          "details": {
            "description": "Further details about specific errors that led to this error.",
            "type": "array",
            "items": {
              "$ref": "#/definitions/CommunicationError"
            },
            "readOnly": true
          },
          "innererror": {
            "$ref": "#/definitions/CommunicationError"
          }
        }
      },
      "CommunicationErrorResponse": {
        "description": "Represents the wrapper around the Communication Services error",
        "required": [
          "error"
        ],
        "type": "object",
        "properties": {
          "error": {
            "$ref": "#/definitions/CommunicationError"
          }
        }
      },
      "PhoneNumberUpdateRequest": {
        "description": "Represents a phone number update request",
        "type": "object",
        "properties": {
          "callbackUrl": {
            "description": "The webhook URL on the phone number configuration.",
            "type": "string"
          },
          "applicationId": {
            "description": "The application id of the application to which to configure",
            "type": "string"
          }
        }
      },
      "AcquiredPhoneNumbers": {
        "description": "A wrapper around a list of acquired phone numbers",
        "type": "object",
        "properties": {
          "phoneNumbers": {
            "description": "Represents a list of phone numbers",
            "type": "array",
            "items": {
              "$ref": "#/definitions/AcquiredPhoneNumber"
            }
          },
          "nextLink": {
            "description": "Represents the URL link to the next page of phone number results",
            "type": "string"
          }
        }
      },
      "PhoneNumberLongRunningOperation": {
        "description": "Represents the status of a long running operation",
        "type": "object",
        "properties": {
          "status": {
            "description": "Represents the status of a long running operation",
            "enum": [
              "NotStarted",
              "Running",
              "Succeeded",
              "Failed"
            ],
            "type": "string",
            "x-ms-enum": {
              "name": "PhoneNumberLongRunningOperationStatusCode",
              "modelAsString": true
            }
          },
          "resourceLocation": {
            "type": "string"
          },
          "createdDateTime": {
            "format": "date-time",
            "type": "string"
          },
          "error": {
            "$ref": "#/definitions/CommunicationError"
          },
          "id": {
            "type": "string"
          },
          "longRunningOperationType": {
            "description": "Represents a category of long running operation",
            "enum": [
              "Purchase",
              "ReleasePhoneNumber",
              "Search",
              "UpdatePhoneNumberCapabilities"
            ],
            "type": "string",
            "x-ms-enum": {
              "name": "LongRunningOperationType",
              "modelAsString": true
            }
          },
          "lastActionDateTime": {
            "format": "date-time",
            "type": "string",
            "readOnly": true
          }
        }
      },
      "SearchRequest": {
        "description": "Represents a phone number search request.",
        "required": [
          "assignmentType",
          "capabilities",
          "phoneNumberType"
        ],
        "type": "object",
        "properties": {
          "phoneNumberType": {
            "description": "The phone number type of the search.",
            "enum": [
              "Geographic",
              "TollFree",
              "Unknown"
            ],
            "type": "string",
            "x-ms-enum": {
              "name": "PhoneNumberType",
              "modelAsString": true
            }
          },
          "assignmentType": {
            "description": "The assignment type of the search.",
            "enum": [
              "Unknown",
              "User",
              "Application"
            ],
            "type": "string",
            "x-ms-enum": {
              "name": "PhoneNumberAssignmentType",
              "modelAsString": true
            }
          },
          "capabilities": {
            "$ref": "#/definitions/PhoneNumberCapabilities"
          },
          "areaCode": {
            "description": "The area code of the search.",
            "type": "string"
          },
          "quantity": {
            "format": "int32",
            "description": "The quantity of phone numbers in the search.",
            "maximum": 2147483647,
            "minimum": 1,
            "type": "integer"
          }
        }
      },
      "SearchResponse": {
        "description": "Represents a search response.",
        "type": "object",
        "properties": {
          "searchId": {
            "description": "The search id of the search that was created.",
            "type": "string"
          },
          "phoneNumbers": {
            "description": "The available phone numbers retrieved from the search.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "phoneNumberType": {
            "description": "The phone number type of the search.",
            "enum": [
              "Geographic",
              "TollFree",
              "Unknown"
            ],
            "type": "string",
            "x-ms-enum": {
              "name": "PhoneNumberType",
              "modelAsString": true
            }
          },
          "assignmentType": {
            "description": "The assignment type of the search.",
            "enum": [
              "Unknown",
              "User",
              "Application"
            ],
            "type": "string",
            "x-ms-enum": {
              "name": "PhoneNumberAssignmentType",
              "modelAsString": true
            }
          },
          "capabilities": {
            "$ref": "#/definitions/PhoneNumberCapabilities"
          },
          "cost": {
            "$ref": "#/definitions/PhoneNumberCost"
          },
          "searchExpiresBy": {
            "format": "date-time",
            "description": "The date that search expires and the numbers become available.",
            "type": "string"
          }
        }
      },
      "PhoneNumberPurchaseRequest": {
        "description": "The incurred cost for a single phone number",
        "type": "object",
        "properties": {
          "searchId": {
            "description": "The cost amount.",
            "type": "string"
          }
        }
      }
    },
    "parameters": {
      "ApiVersionParameter": {
        "in": "query",
        "name": "api-version",
        "description": "Version of API to invoke",
        "required": true,
        "type": "string"
      },
      "Endpoint": {
        "in": "path",
        "name": "endpoint",
        "description": "The endpoint of the Azure Communication resource.",
        "required": true,
        "type": "string",
        "x-ms-skip-url-encoding": true,
        "x-ms-parameter-location": "client"
      }
    },
    "securityDefinitions": {
      "azure_auth": {
        "type": "oauth2",
        "flow": "implicit",
        "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
        "scopes": {
          "user_impersonation": "impersonate your user account"
        },
        "description": "Azure Active Directory OAuth2 Flow"
      }
    },
    "x-ms-parameterized-host": {
      "hostTemplate": "{endpoint}",
      "useSchemePrefix": false,
      "parameters": [
        {
          "$ref": "#/parameters/Endpoint"
        }
      ]
    }
  }