{
  "parameters": {
    "api-version": "2017-04-01-preview",
    "subscriptionId": "56b5e0a9-b645-407d-99b0-c64f86013e3d",
    "location": "West US",
    "streamingJob": {
      "properties": {
        "sku": {
          "name": "Standard"
        },
        "eventsOutOfOrderPolicy": "Drop",
        "outputErrorPolicy": "Drop",
        "eventsOutOfOrderMaxDelayInSeconds": 0,
        "eventsLateArrivalMaxDelayInSeconds": 5,
        "dataLocale": "en-US",
        "compatibilityLevel": "1.0",
        "inputs": [
          {
            "properties": {
              "type": "Stream",
              "datasource": {
                "type": "Microsoft.Storage/Blob",
                "properties": {
                  "storageAccounts": [
                    {
                      "accountName": "someAccountName",
                      "accountKey": "someAccountKey=="
                    }
                  ],
                  "container": "state",
                  "pathPattern": "{date}/{time}",
                  "dateFormat": "yyyy/MM/dd",
                  "timeFormat": "HH",
                  "sourcePartitionCount": 16
                }
              },
              "serialization": {
                "type": "Csv",
                "properties": {
                  "fieldDelimiter": ",",
                  "encoding": "UTF8"
                }
              }
            }
          }
        ],
        "transformation": {
          "properties": {
            "streamingUnits": 1,
            "query": "Select Id, Name from inputtest"
          },
          "name": "transformationtest"
        },
        "outputs": [
          {
            "properties": {
              "datasource": {
                "type": "Raw",
                "properties": {
                  "payloadUri": "http://myoutput.com"
                }
              },
              "serialization": {
                "type": "Json"
              }
            },
            "name": "outputtest"
          }
        ],
        "functions": []
      },
      "location": "West US",
      "tags": {
        "key1": "value1",
        "randomKey": "randomValue",
        "key3": "value3"
      }
    }
  },
  "responses": {
    "200": {
      "errors": [
        {
          "message": "Query failed to compile.",
          "isGlobal": true
        }
      ],
      "inputs": [
        "inputtest"
      ],
      "outputs": [
        "outputtest"
      ],
      "functions": [
        "transformationtest"
      ]
    },
    "202": {}
  }
}
