{
  "parameters": {
    "api-version": "2023-11-01",
    "iotConnector": {
      "identity": {
        "type": "SystemAssigned"
      },
      "location": "westus",
      "properties": {
        "deviceMapping": {
          "content": {
            "template": [
              {
                "template": {
                  "deviceIdExpression": "$.deviceid",
                  "timestampExpression": "$.measurementdatetime",
                  "typeMatchExpression": "$..[?(@heartrate)]",
                  "typeName": "heartrate",
                  "values": [
                    {
                      "required": "true",
                      "valueExpression": "$.heartrate",
                      "valueName": "hr"
                    }
                  ]
                },
                "templateType": "JsonPathContent"
              }
            ],
            "templateType": "CollectionContent"
          }
        },
        "ingestionEndpointConfiguration": {
          "consumerGroup": "ConsumerGroupA",
          "eventHubName": "MyEventHubName",
          "fullyQualifiedEventHubNamespace": "myeventhub.servicesbus.windows.net"
        }
      },
      "tags": {
        "additionalProp1": "string",
        "additionalProp2": "string",
        "additionalProp3": "string"
      }
    },
    "iotConnectorName": "blue",
    "resourceGroupName": "testRG",
    "subscriptionId": "subid",
    "workspaceName": "workspace1"
  },
  "responses": {
    "200": {
      "body": {
        "name": "blue",
        "type": "Microsoft.HealthcareApis/workspaces/iotconnectors",
        "etag": "00000000-0000-0000-f5ac-912ca49e01d6",
        "id": "/subscriptions/subid/resourceGroups/testRG/providers/Microsoft.HealthcareApis/workspaces/workspace1/iotconnectors/blue",
        "identity": {
          "type": "SystemAssigned"
        },
        "location": "westus",
        "properties": {
          "deviceMapping": {
            "content": {
              "template": [
                {
                  "template": {
                    "deviceIdExpression": "$.deviceid",
                    "timestampExpression": "$.measurementdatetime",
                    "typeMatchExpression": "$..[?(@heartrate)]",
                    "typeName": "heartrate",
                    "values": [
                      {
                        "required": "true",
                        "valueExpression": "$.heartrate",
                        "valueName": "hr"
                      }
                    ]
                  },
                  "templateType": "JsonPathContent"
                }
              ],
              "templateType": "CollectionContent"
            }
          },
          "ingestionEndpointConfiguration": {
            "consumerGroup": "ConsumerGroupA",
            "eventHubName": "MyEventHubName",
            "fullyQualifiedEventHubNamespace": "myeventhub.servicesbus.windows.net"
          },
          "provisioningState": "Succeeded"
        },
        "systemData": {
          "createdAt": "2021-01-28T19:26:24.072Z",
          "createdBy": "string",
          "lastModifiedAt": "2021-01-28T19:26:24.072Z",
          "lastModifiedBy": "string"
        },
        "tags": {
          "additionalProp1": "string",
          "additionalProp2": "string",
          "additionalProp3": "string"
        }
      }
    },
    "201": {
      "body": {
        "name": "blue",
        "type": "Microsoft.HealthcareApis/workspaces/iotconnectors",
        "etag": "00000000-0000-0000-f5ac-912ca49e01d6",
        "id": "/subscriptions/subid/resourceGroups/testRG/providers/Microsoft.HealthcareApis/workspaces/workspace1/iotconnectors/blue",
        "identity": {
          "type": "SystemAssigned"
        },
        "location": "westus",
        "properties": {
          "deviceMapping": {
            "content": {
              "template": [
                {
                  "template": {
                    "deviceIdExpression": "$.deviceid",
                    "timestampExpression": "$.measurementdatetime",
                    "typeMatchExpression": "$..[?(@heartrate)]",
                    "typeName": "heartrate",
                    "values": [
                      {
                        "required": "true",
                        "valueExpression": "$.heartrate",
                        "valueName": "hr"
                      }
                    ]
                  },
                  "templateType": "JsonPathContent"
                }
              ],
              "templateType": "CollectionContent"
            }
          },
          "ingestionEndpointConfiguration": {
            "consumerGroup": "ConsumerGroupA",
            "eventHubName": "MyEventHubName",
            "fullyQualifiedEventHubNamespace": "myeventhub.servicesbus.windows.net"
          },
          "provisioningState": "Creating"
        },
        "systemData": {
          "createdAt": "2021-01-28T19:26:24.072Z",
          "createdBy": "string",
          "lastModifiedAt": "2021-01-28T19:26:24.072Z",
          "lastModifiedBy": "string"
        },
        "tags": {
          "additionalProp1": "string",
          "additionalProp2": "string",
          "additionalProp3": "string"
        }
      }
    },
    "202": {
      "body": {
        "name": "blue",
        "type": "Microsoft.HealthcareApis/workspaces/iotconnectors",
        "etag": "00000000-0000-0000-f5ac-912ca49e01d6",
        "id": "/subscriptions/subid/resourceGroups/testRG/providers/Microsoft.HealthcareApis/workspaces/workspace1/iotconnectors/blue",
        "identity": {
          "type": "SystemAssigned"
        },
        "location": "westus",
        "properties": {
          "deviceMapping": {
            "content": {
              "template": [
                {
                  "template": {
                    "deviceIdExpression": "$.deviceid",
                    "timestampExpression": "$.measurementdatetime",
                    "typeMatchExpression": "$..[?(@heartrate)]",
                    "typeName": "heartrate",
                    "values": [
                      {
                        "required": "true",
                        "valueExpression": "$.heartrate",
                        "valueName": "hr"
                      }
                    ]
                  },
                  "templateType": "JsonPathContent"
                }
              ],
              "templateType": "CollectionContent"
            }
          },
          "ingestionEndpointConfiguration": {
            "consumerGroup": "ConsumerGroupA",
            "eventHubName": "MyEventHubName",
            "fullyQualifiedEventHubNamespace": "myeventhub.servicesbus.windows.net"
          },
          "provisioningState": "Accepted"
        },
        "systemData": {
          "createdAt": "2021-01-28T19:26:24.072Z",
          "createdBy": "string",
          "lastModifiedAt": "2021-01-28T19:26:24.072Z",
          "lastModifiedBy": "string"
        },
        "tags": {
          "additionalProp1": "string",
          "additionalProp2": "string",
          "additionalProp3": "string"
        }
      }
    }
  },
  "operationId": "IotConnectors_CreateOrUpdate",
  "title": "Create an IoT Connector"
}